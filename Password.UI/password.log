2018-03-27 15:30:26,466 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 15:30:26,468 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:30:26,470 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 15:30:26,471 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:30:26,472 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 15:30:26,474 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 15:30:26,476 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 15:30:26,478 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 15:30:26,480 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:30:26,482 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 15:30:26,483 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:30:26,485 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 15:30:26,487 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 15:30:26,488 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 15:30:26,490 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 15:30:26,491 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:30:26,493 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 15:30:26,495 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 15:30:26,496 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:30:26,498 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:30:26,499 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:30:26,501 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:30:26,506 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 15:30:26,508 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:30:26,509 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:30:26,510 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:30:26,511 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:30:26,513 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:30:26,514 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:30:26,533 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 15:30:26,534 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 15:30:26,536 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 15:30:26,537 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 15:30:26,542 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:30:26,543 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:30:26,545 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:30:26,546 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:30:26,548 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:30:26,550 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:30:26,551 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:30:26,556 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:30:26,557 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 15:30:26,562 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:531fe3aa-2e4f-4cf9-88c5-506a9d2e39d7
Error Number:2714,State:6,Class:16
2018-03-27 15:30:26,563 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 15:30:26,565 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:30:26,566 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:30:26,567 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:30:26,569 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:30:26,570 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:30:26,571 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:30:26,572 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:30:26,574 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:30:26,575 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:30:26,577 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 15:30:26,578 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 15:30:26,579 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:30:26,581 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:30:26,582 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:30:26,583 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 15:30:26,585 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 15:30:26,586 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 15:30:26,588 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 15:30:26,589 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 15:30:26,590 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 15:30:26,591 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 15:30:26,593 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 15:30:26,594 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 15:30:26,595 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 15:30:26,596 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:30:26,597 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 15:30:26,599 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 15:30:26,600 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 15:30:26,601 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 15:30:26,602 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:30:26,604 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 15:30:26,605 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 15:30:26,606 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 15:30:26,607 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 15:30:26,609 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 15:30:26,610 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 15:30:26,611 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:30:26,633 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:30:26,634 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:30:26,635 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 15:30:26,637 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 15:30:26,638 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:30:26,639 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 15:30:26,640 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 15:30:26,642 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 15:30:26,643 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 15:30:26,644 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 15:30:26,646 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 15:30:26,647 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 15:30:26,649 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 15:30:26,650 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:30:26,651 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:30:26,653 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:30:26,654 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:30:26,655 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 15:30:26,657 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:30:26,658 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:30:26,660 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:30:26,662 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 15:30:26,664 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 15:30:26,666 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 15:30:26,667 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 15:30:26,668 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 15:30:26,669 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 15:30:26,670 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:30:26,671 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:30:26,673 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:30:26,674 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:30:26,675 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 15:30:26,676 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:30:26,677 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:30:26,679 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:30:26,680 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 806efa10e968453c9d09865a512367f5(unnamed)
2018-03-27 15:30:26,682 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 15:30:26,683 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 15:30:26,684 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 15:30:26,685 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 15:30:26,686 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 15:30:26,687 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=7d9f26ec-6e58-41af-bab4-a407ab3b7b7e] opened session at timestamp: 636577614266, for session factory: [/806efa10e968453c9d09865a512367f5]
2018-03-27 15:30:26,689 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Email = cokceken alias=this0_
2018-03-27 15:30:26,690 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Email = cokceken
2018-03-27 15:30:26,691 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 15:30:26,692 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Email = ?
2018-03-27 15:30:26,694 [5] DEBUG NHibernate.Type.StringType - binding 'cokceken' to parameter: 0
2018-03-27 15:30:26,694 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Email = @p0;@p0 = 'cokceken' [Type: String (4000:0:0)]
2018-03-27 15:30:26,696 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:30:26,699 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 1 ms
2018-03-27 15:30:26,700 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 15:30:26,701 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 15:30:26,702 [5] DEBUG NHibernate.Loader.Loader - done processing result set (0 rows)
2018-03-27 15:30:26,703 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 15:30:26,704 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 7 ms
2018-03-27 15:30:26,705 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 15:30:26,706 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 15:30:26,707 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:30:26,708 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 0
2018-03-27 15:30:26,709 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 15:30:26,711 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 15:30:26,712 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 15:30:26,713 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=7d9f26ec-6e58-41af-bab4-a407ab3b7b7e] running ISession.Dispose()
2018-03-27 15:30:26,714 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=7d9f26ec-6e58-41af-bab4-a407ab3b7b7e] executing real Dispose(True)
2018-03-27 15:30:26,715 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 15:30:26,716 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 15:33:05,839 [5] INFO  Password.Infrastructure.Services.Log4Net - User not found with email: cokceken
2018-03-27 15:33:09,166 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 15:33:09,168 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,170 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 15:33:09,171 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:33:09,173 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 15:33:09,175 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 15:33:09,176 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 15:33:09,180 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 15:33:09,182 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,184 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 15:33:09,185 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:33:09,187 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 15:33:09,188 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 15:33:09,190 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 15:33:09,191 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 15:33:09,193 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,195 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 15:33:09,197 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 15:33:09,198 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:33:09,200 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:33:09,202 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,203 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:33:09,213 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 15:33:09,214 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:33:09,216 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:33:09,217 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:33:09,218 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:33:09,220 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:33:09,221 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:33:09,333 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 15:33:09,334 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 15:33:09,335 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 15:33:09,336 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 15:33:09,346 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:33:09,347 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,348 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,349 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,351 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,352 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,353 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,357 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:33:09,359 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 15:33:09,362 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:531fe3aa-2e4f-4cf9-88c5-506a9d2e39d7
Error Number:2714,State:6,Class:16
2018-03-27 15:33:09,364 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 15:33:09,365 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:33:09,366 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:33:09,367 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:33:09,369 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:33:09,370 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:33:09,371 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:33:09,372 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:33:09,373 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,375 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,377 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 15:33:09,378 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 15:33:09,379 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:33:09,380 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:33:09,382 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,383 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 15:33:09,384 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 15:33:09,385 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 15:33:09,386 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 15:33:09,387 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 15:33:09,389 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 15:33:09,390 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 15:33:09,391 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 15:33:09,392 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 15:33:09,394 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 15:33:09,395 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:33:09,396 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 15:33:09,397 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 15:33:09,398 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 15:33:09,399 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 15:33:09,400 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:33:09,401 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 15:33:09,402 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 15:33:09,404 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 15:33:09,405 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 15:33:09,406 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 15:33:09,407 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 15:33:09,408 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:33:09,437 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:33:09,439 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,440 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 15:33:09,442 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 15:33:09,443 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,444 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 15:33:09,445 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 15:33:09,447 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 15:33:09,448 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 15:33:09,449 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 15:33:09,451 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 15:33:09,452 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 15:33:09,453 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 15:33:09,455 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:33:09,456 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:33:09,458 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:33:09,459 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:33:09,460 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 15:33:09,461 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:33:09,463 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:33:09,464 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:33:09,465 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 15:33:09,467 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 15:33:09,468 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 15:33:09,469 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 15:33:09,470 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 15:33:09,472 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 15:33:09,473 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:33:09,475 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:33:09,477 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:33:09,478 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:33:09,479 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 15:33:09,481 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:33:09,482 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:33:09,483 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:33:09,484 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: a033610ddd2b403ea05f51686075d5e5(unnamed)
2018-03-27 15:33:09,485 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 15:33:09,486 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 15:33:09,487 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 15:33:09,489 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 15:33:09,491 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 15:33:09,492 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=e75afcf7-d693-441d-acf6-0a1f77895c53] opened session at timestamp: 636577615894, for session factory: [/a033610ddd2b403ea05f51686075d5e5]
2018-03-27 15:33:09,493 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Email = email alias=this0_
2018-03-27 15:33:09,495 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Email = email
2018-03-27 15:33:09,496 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 15:33:09,497 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Email = ?
2018-03-27 15:33:09,498 [5] DEBUG NHibernate.Type.StringType - binding 'email' to parameter: 0
2018-03-27 15:33:09,500 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Email = @p0;@p0 = 'email' [Type: String (4000:0:0)]
2018-03-27 15:33:09,501 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:33:09,505 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-27 15:33:09,506 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 15:33:09,507 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 15:33:09,509 [5] DEBUG NHibernate.Loader.Loader - result set row: 0
2018-03-27 15:33:09,511 [5] DEBUG NHibernate.Type.Int32Type - returning '1' as column: id1_1_0_
2018-03-27 15:33:09,514 [5] DEBUG NHibernate.Loader.Loader - result row: EntityKey[Password.Domain.Model.User#1]
2018-03-27 15:33:09,519 [5] DEBUG NHibernate.Loader.Loader - Initializing object from DataReader: [Password.Domain.Model.User#1]
2018-03-27 15:33:09,524 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Hydrating entity: [Password.Domain.Model.User#1]
2018-03-27 15:33:09,525 [5] DEBUG NHibernate.Type.StringType - returning 'email' as column: email2_1_0_
2018-03-27 15:33:09,526 [5] DEBUG NHibernate.Type.StringType - returning '7a37b85c8918eac19a9089c0fa5a2ab4dce3f90528dcdeec108b23ddf3607b99' as column: password3_1_0_
2018-03-27 15:33:09,528 [5] DEBUG NHibernate.Type.StringType - returning 'cokceken' as column: username4_1_0_
2018-03-27 15:33:09,529 [5] DEBUG NHibernate.Type.StringType - returning 'salt' as column: passwordsalt5_1_0_
2018-03-27 15:33:09,532 [5] DEBUG NHibernate.Loader.Loader - done processing result set (1 rows)
2018-03-27 15:33:09,534 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 15:33:09,535 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 32 ms
2018-03-27 15:33:09,536 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 15:33:09,537 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 15:33:09,538 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:33:09,539 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 1
2018-03-27 15:33:09,541 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - resolving associations for [Password.Domain.Model.User#1]
2018-03-27 15:33:09,545 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - done materializing entity [Password.Domain.Model.User#1]
2018-03-27 15:33:09,546 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 15:33:09,547 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 15:33:09,548 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 15:33:09,549 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=e75afcf7-d693-441d-acf6-0a1f77895c53] running ISession.Dispose()
2018-03-27 15:33:09,551 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=e75afcf7-d693-441d-acf6-0a1f77895c53] executing real Dispose(True)
2018-03-27 15:33:09,552 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 15:33:09,553 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 15:33:09,558 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 15:33:09,559 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,561 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 15:33:09,562 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:33:09,563 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 15:33:09,564 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 15:33:09,565 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 15:33:09,566 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 15:33:09,568 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,569 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 15:33:09,570 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:33:09,571 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 15:33:09,572 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 15:33:09,574 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 15:33:09,575 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 15:33:09,576 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,577 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 15:33:09,578 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 15:33:09,579 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:33:09,581 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:33:09,582 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,583 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:33:09,586 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 15:33:09,588 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:33:09,589 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:33:09,591 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:33:09,592 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:33:09,593 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:33:09,594 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:33:09,611 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 15:33:09,612 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 15:33:09,613 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 15:33:09,614 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 15:33:09,618 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:33:09,619 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,621 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,622 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,624 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,625 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,626 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,631 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:33:09,632 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 15:33:09,647 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:531fe3aa-2e4f-4cf9-88c5-506a9d2e39d7
Error Number:2714,State:6,Class:16
2018-03-27 15:33:09,648 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 15:33:09,650 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:33:09,651 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:33:09,652 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:33:09,653 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:33:09,654 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:33:09,655 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:33:09,657 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:33:09,658 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,660 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,662 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 15:33:09,663 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 15:33:09,665 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:33:09,666 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:33:09,668 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,669 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 15:33:09,671 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 15:33:09,672 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 15:33:09,674 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 15:33:09,675 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 15:33:09,676 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 15:33:09,678 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 15:33:09,679 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 15:33:09,681 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 15:33:09,682 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 15:33:09,684 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:33:09,685 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 15:33:09,686 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 15:33:09,688 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 15:33:09,689 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 15:33:09,690 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:33:09,692 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 15:33:09,693 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 15:33:09,694 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 15:33:09,696 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 15:33:09,697 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 15:33:09,698 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 15:33:09,699 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:33:09,720 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:33:09,721 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,722 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 15:33:09,724 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 15:33:09,725 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:09,726 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 15:33:09,728 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 15:33:09,729 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 15:33:09,730 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 15:33:09,731 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 15:33:09,732 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 15:33:09,733 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 15:33:09,734 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 15:33:09,735 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:33:09,736 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:33:09,738 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:33:09,739 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:33:09,740 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 15:33:09,741 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:33:09,743 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:33:09,744 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:33:09,745 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 15:33:09,746 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 15:33:09,748 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 15:33:09,749 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 15:33:09,750 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 15:33:09,751 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 15:33:09,752 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:33:09,753 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:33:09,754 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:33:09,756 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:33:09,757 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 15:33:09,758 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:33:09,760 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:33:09,761 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:33:09,762 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 44b0c7cc0372421fb2f0f7bf12f1900e(unnamed)
2018-03-27 15:33:09,763 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 15:33:09,764 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 15:33:09,765 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 15:33:09,767 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 15:33:09,768 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 15:33:09,769 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=b41429cd-9709-4a0e-918a-1a3d0cd0b948] opened session at timestamp: 636577615897, for session factory: [/44b0c7cc0372421fb2f0f7bf12f1900e]
2018-03-27 15:33:09,819 [5] DEBUG NHibernate.Linq - Expression (partially evaluated): value(NHibernate.Linq.NhQueryable`1[Password.Domain.Model.Token]).FirstOrDefault(x => (x.User.Id == 1))
2018-03-27 15:33:09,830 [5] DEBUG NHibernate.Engine.Query.QueryPlanCache - unable to locate HQL query plan in cache; generating (.FirstOrDefault[Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null](NHibernate.Linq.NhQueryable`1[Password.Domain.Model.Token], Quote((x, ) => (Equal(x.User.Id, p1))), ))
2018-03-27 15:33:09,930 [5] DEBUG NHibernate.Hql.Ast.ANTLR.HqlSqlWalker - select << begin [level=1, statement=select]
2018-03-27 15:33:09,941 [5] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.FromElement - FromClause{level=1} :  Password.Domain.Model.Token (x) -> token0_
2018-03-27 15:33:09,950 [5] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.FromReferenceNode - Resolved :  x -> token0_.Id
2018-03-27 15:33:09,965 [5] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.FromReferenceNode - Resolved :  x -> token0_.Id
2018-03-27 15:33:09,969 [5] INFO  NHibernate.Hql.Ast.ANTLR.Tree.FromElement - handling property dereference [Password.Domain.Model.Token (x) -> User (Class)]
2018-03-27 15:33:09,973 [5] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.DotNode - getDataType() : User -> NHibernate.Type.ManyToOneType(Password.Domain.Model.User)
2018-03-27 15:33:09,976 [5] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.DotNode - dereferenceShortcut() : property Id in Password.Domain.Model.Token does not require a join.
2018-03-27 15:33:09,979 [5] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.DotNode - Unresolved property path is now 'User.Id'
2018-03-27 15:33:09,981 [5] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.FromReferenceNode - Resolved :  x.User -> token0_.User_id
2018-03-27 15:33:09,983 [5] INFO  NHibernate.Hql.Ast.ANTLR.Tree.FromElement - handling property dereference [Password.Domain.Model.Token (x) -> Id (Class)]
2018-03-27 15:33:09,984 [5] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.DotNode - getDataType() : User.Id -> NHibernate.Type.Int32Type
2018-03-27 15:33:09,986 [5] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.FromReferenceNode - Resolved :  x.User.Id -> token0_.User_id
2018-03-27 15:33:09,993 [5] DEBUG NHibernate.Hql.Ast.ANTLR.HqlSqlWalker - select : finishing up [level=1, statement=select]
2018-03-27 15:33:09,995 [5] DEBUG NHibernate.Hql.Ast.ANTLR.HqlSqlWalker - processQuery() : ( SELECT ( {select clause} token0_.Id ) ( FromClause{level=1} Token token0_ ) ( where ( == ( token0_.User_id ( token0_.User_id token0_.Id User ) Id ) ? ) ) ( take 1 ) )
2018-03-27 15:33:10,009 [5] DEBUG NHibernate.Hql.Ast.ANTLR.Util.JoinProcessor - Using FROM fragment [Token token0_]
2018-03-27 15:33:10,012 [5] DEBUG NHibernate.Hql.Ast.ANTLR.HqlSqlWalker - select >> end [level=1, statement=select]
2018-03-27 15:33:10,014 [5] DEBUG NHibernate.Hql.Ast.ANTLR.ErrorCounter - throwQueryException() : no errors
2018-03-27 15:33:10,048 [5] DEBUG NHibernate.Hql.Ast.ANTLR.HqlSqlGenerator - SQL: select token0_.Id as id1_0_, token0_.ExpireDateTime as expiredatetime2_0_, token0_.Value as value3_0_, token0_.User_id as user4_0_ from Token token0_ where token0_.User_id=? ORDER BY CURRENT_TIMESTAMP OFFSET 0 ROWS FETCH FIRST 1 ROWS ONLY
2018-03-27 15:33:10,050 [5] DEBUG NHibernate.Hql.Ast.ANTLR.ErrorCounter - throwQueryException() : no errors
2018-03-27 15:33:10,067 [5] DEBUG NHibernate.Engine.Query.QueryPlanCache - located HQL query plan in cache (.FirstOrDefault[Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null](NHibernate.Linq.NhQueryable`1[Password.Domain.Model.Token], Quote((x, ) => (Equal(x.User.Id, p1))), ))
2018-03-27 15:33:10,070 [5] DEBUG NHibernate.Engine.Query.HQLQueryPlan - find: .FirstOrDefault[Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null](NHibernate.Linq.NhQueryable`1[Password.Domain.Model.Token], Quote((x, ) => (Equal(x.User.Id, p1))), )
2018-03-27 15:33:10,072 [5] DEBUG NHibernate.Engine.QueryParameters - named parameters: {'p1'='1'}
2018-03-27 15:33:10,077 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 15:33:10,078 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: select token0_.Id as id1_0_, token0_.ExpireDateTime as expiredatetime2_0_, token0_.Value as value3_0_, token0_.User_id as user4_0_ from Token token0_ where token0_.User_id=? ORDER BY CURRENT_TIMESTAMP OFFSET 0 ROWS FETCH FIRST 1 ROWS ONLY
2018-03-27 15:33:10,080 [5] DEBUG NHibernate.Type.Int32Type - binding '1' to parameter: 0
2018-03-27 15:33:10,083 [5] DEBUG NHibernate.SQL - select token0_.Id as id1_0_, token0_.ExpireDateTime as expiredatetime2_0_, token0_.Value as value3_0_, token0_.User_id as user4_0_ from Token token0_ where token0_.User_id=@p0 ORDER BY CURRENT_TIMESTAMP OFFSET 0 ROWS FETCH FIRST 1 ROWS ONLY;@p0 = 1 [Type: Int32 (0:0:0)]
2018-03-27 15:33:10,084 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:33:10,089 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-27 15:33:10,091 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 15:33:10,093 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 15:33:10,095 [5] DEBUG NHibernate.Loader.Loader - done processing result set (0 rows)
2018-03-27 15:33:10,096 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 15:33:10,098 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 11 ms
2018-03-27 15:33:10,100 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 15:33:10,102 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 15:33:10,103 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:33:10,104 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 0
2018-03-27 15:33:10,106 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 15:33:10,107 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 15:33:10,109 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 15:33:10,112 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=b41429cd-9709-4a0e-918a-1a3d0cd0b948] running ISession.Dispose()
2018-03-27 15:33:10,113 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=b41429cd-9709-4a0e-918a-1a3d0cd0b948] executing real Dispose(True)
2018-03-27 15:33:10,115 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 15:33:10,117 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 15:33:10,133 [5] DEBUG Password.Infrastructure.Services.Log4Net - Token not found for userId: 1
Password.Domain.Model.Exception.TokenNotFoundException: $Token not found with userId:{userId}
   at Password.Domain.Service.TokenService.GetTokenByUserId(Int32 userId) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\TokenService.cs:line 23
   at Password.Domain.Service.AuthenticationService.SendResetEmail(String email) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\AuthenticationService.cs:line 49
2018-03-27 15:33:10,136 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 15:33:10,138 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:10,139 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 15:33:10,141 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:33:10,142 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 15:33:10,143 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 15:33:10,145 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 15:33:10,146 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 15:33:10,148 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:10,149 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 15:33:10,151 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:33:10,152 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 15:33:10,153 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 15:33:10,155 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 15:33:10,157 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 15:33:10,158 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:10,160 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 15:33:10,161 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 15:33:10,162 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:33:10,164 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:33:10,165 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:10,166 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:33:10,171 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 15:33:10,172 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:33:10,174 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:33:10,175 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:33:10,176 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:33:10,177 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:33:10,179 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:33:10,194 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 15:33:10,196 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 15:33:10,197 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 15:33:10,198 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 15:33:10,203 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:33:10,205 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:10,206 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:10,207 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:10,209 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:10,210 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:10,212 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:10,217 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:33:10,219 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 15:33:10,222 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:531fe3aa-2e4f-4cf9-88c5-506a9d2e39d7
Error Number:2714,State:6,Class:16
2018-03-27 15:33:10,224 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 15:33:10,225 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:33:10,226 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:33:10,227 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:33:10,229 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:33:10,230 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:33:10,231 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:33:10,232 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:33:10,233 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:10,235 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:10,237 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 15:33:10,239 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 15:33:10,240 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:33:10,241 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:33:10,242 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:10,244 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 15:33:10,245 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 15:33:10,246 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 15:33:10,247 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 15:33:10,248 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 15:33:10,249 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 15:33:10,250 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 15:33:10,252 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 15:33:10,253 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 15:33:10,254 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 15:33:10,255 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:33:10,256 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 15:33:10,258 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 15:33:10,259 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 15:33:10,260 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 15:33:10,261 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:33:10,262 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 15:33:10,263 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 15:33:10,265 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 15:33:10,266 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 15:33:10,268 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 15:33:10,269 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 15:33:10,270 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:33:10,289 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:33:10,291 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:10,293 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 15:33:10,294 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 15:33:10,295 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:33:10,297 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 15:33:10,298 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 15:33:10,300 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 15:33:10,301 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 15:33:10,302 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 15:33:10,303 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 15:33:10,305 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 15:33:10,306 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 15:33:10,308 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:33:10,309 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:33:10,310 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:33:10,311 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:33:10,313 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 15:33:10,314 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:33:10,316 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:33:10,317 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:33:10,319 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 15:33:10,321 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 15:33:10,322 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 15:33:10,324 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 15:33:10,326 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 15:33:10,327 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 15:33:10,329 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:33:10,330 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:33:10,331 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:33:10,333 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:33:10,334 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 15:33:10,336 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:33:10,337 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:33:10,338 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:33:10,339 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 0dc45a472423476da549a7620b949f15(unnamed)
2018-03-27 15:33:10,340 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 15:33:10,342 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 15:33:10,343 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 15:33:10,344 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 15:33:10,345 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 15:33:10,347 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=c0ffa867-e9e9-42cb-99fb-03c3a44804fc] opened session at timestamp: 636577615903, for session factory: [/0dc45a472423476da549a7620b949f15]
2018-03-27 15:33:10,349 [5] DEBUG NHibernate.Event.Default.DefaultSaveOrUpdateEventListener - saving transient instance
2018-03-27 15:33:10,352 [5] DEBUG NHibernate.Event.Default.AbstractSaveEventListener - saving [Password.Domain.Model.Token#<null>]
2018-03-27 15:33:10,356 [5] DEBUG NHibernate.Event.Default.AbstractSaveEventListener - executing insertions
2018-03-27 15:33:10,362 [5] DEBUG NHibernate.Engine.IdentifierValue - unsaved-value: 0
2018-03-27 15:33:10,364 [5] DEBUG NHibernate.Event.Default.AbstractSaveEventListener - executing identity-insert immediately
2018-03-27 15:33:10,367 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Inserting entity: Password.Domain.Model.Token (native id)
2018-03-27 15:33:10,369 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 15:33:10,370 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:33:10,372 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Dehydrating entity: [Password.Domain.Model.Token#<null>]
2018-03-27 15:33:10,373 [5] DEBUG NHibernate.Type.DateTimeType - binding '3/27/2018 4:33:09 PM' to parameter: 0
2018-03-27 15:33:10,375 [5] DEBUG NHibernate.Type.StringType - binding '5aRCXK99FU' to parameter: 1
2018-03-27 15:33:10,378 [5] DEBUG NHibernate.Engine.IdentifierValue - unsaved-value: 0
2018-03-27 15:33:10,379 [5] DEBUG NHibernate.Type.Int32Type - binding '1' to parameter: 2
2018-03-27 15:33:10,380 [5] DEBUG NHibernate.SQL - INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (@p0, @p1, @p2); select SCOPE_IDENTITY();@p0 = 2018-03-27T16:33:09.5567899+03:00 [Type: DateTime2 (8:0:0)], @p1 = '5aRCXK99FU' [Type: String (4000:0:0)], @p2 = 1 [Type: Int32 (0:0:0)]
2018-03-27 15:33:10,382 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:33:10,388 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 5 ms
2018-03-27 15:33:10,390 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 15:33:10,392 [5] DEBUG NHibernate.Type.Int32Type - returning '1' as column: 
2018-03-27 15:33:10,394 [5] DEBUG NHibernate.Id.IdentifierGeneratorFactory - Natively generated identity: 1
2018-03-27 15:33:10,395 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 15:33:10,396 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 12 ms
2018-03-27 15:33:10,397 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 15:33:10,399 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 15:33:10,400 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:33:10,403 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=c0ffa867-e9e9-42cb-99fb-03c3a44804fc] running ISession.Dispose()
2018-03-27 15:33:10,404 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=c0ffa867-e9e9-42cb-99fb-03c3a44804fc] executing real Dispose(True)
2018-03-27 15:33:10,405 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 15:33:10,406 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 15:40:26,483 [9] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-27 15:40:26,494 [9] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-27 15:40:26,497 [9] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-27 15:40:26,499 [9] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-27 15:40:26,594 [9] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 15:40:26,990 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,021 [9] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 15:40:27,040 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:40:27,051 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 15:40:27,053 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 15:40:27,059 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 15:40:27,064 [9] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 15:40:27,065 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,067 [9] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 15:40:27,068 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:40:27,069 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 15:40:27,070 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 15:40:27,072 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 15:40:27,073 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 15:40:27,075 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,077 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 15:40:27,079 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 15:40:27,081 [9] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:40:27,083 [9] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:40:27,086 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,088 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:27,134 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 15:40:27,139 [9] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:40:27,140 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:40:27,142 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:40:27,143 [9] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:40:27,145 [9] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:40:27,148 [9] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:40:27,275 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 15:40:27,277 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 15:40:27,278 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 15:40:27,279 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 15:40:27,293 [9] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:40:27,300 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,302 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,304 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,306 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,308 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,310 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,316 [9] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:40:27,325 [9] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 15:40:27,330 [9] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:d778e2f3-10a8-4ad5-9c12-44f99104579e
Error Number:2714,State:6,Class:16
2018-03-27 15:40:27,335 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 15:40:27,337 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:27,338 [9] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:40:27,340 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:40:27,341 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:40:27,342 [9] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:40:27,343 [9] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:40:27,344 [9] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:40:27,354 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,359 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,403 [9] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 15:40:27,405 [9] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 15:40:27,407 [9] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:40:27,408 [9] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:40:27,409 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,410 [9] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 15:40:27,412 [9] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 15:40:27,413 [9] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 15:40:27,414 [9] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 15:40:27,415 [9] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 15:40:27,417 [9] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 15:40:27,418 [9] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 15:40:27,419 [9] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 15:40:27,421 [9] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 15:40:27,423 [9] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 15:40:27,425 [9] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:40:27,426 [9] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 15:40:27,427 [9] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 15:40:27,429 [9] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 15:40:27,430 [9] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 15:40:27,431 [9] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:40:27,432 [9] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 15:40:27,434 [9] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 15:40:27,435 [9] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 15:40:27,444 [9] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 15:40:27,445 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 15:40:27,447 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 15:40:27,448 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:27,482 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:27,485 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,515 [9] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 15:40:27,527 [9] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 15:40:27,546 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,549 [9] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 15:40:27,551 [9] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 15:40:27,580 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 15:40:27,581 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 15:40:27,582 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 15:40:27,583 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 15:40:27,585 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 15:40:27,586 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 15:40:27,587 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:40:27,610 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:27,611 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:27,613 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:40:27,614 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 15:40:27,615 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:40:27,617 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:27,619 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:27,620 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 15:40:27,621 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 15:40:27,623 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 15:40:27,624 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 15:40:27,625 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 15:40:27,626 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 15:40:27,627 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:40:27,628 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:27,629 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:27,631 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:40:27,632 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 15:40:27,633 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:40:27,634 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:27,635 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:27,636 [9] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-27 15:40:27,638 [9] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: d4b82dd440214a99a4d17e3a8fba967b(unnamed)
2018-03-27 15:40:27,639 [9] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 15:40:27,641 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 15:40:27,645 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 15:40:27,646 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 15:40:27,648 [9] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 15:40:27,661 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=461d252a-6bab-4cd6-a207-5621657be224] opened session at timestamp: 636577620276, for session factory: [/d4b82dd440214a99a4d17e3a8fba967b]
2018-03-27 15:40:27,711 [9] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Email = email alias=this0_
2018-03-27 15:40:27,719 [9] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Email = email
2018-03-27 15:40:27,757 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 15:40:27,759 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Email = ?
2018-03-27 15:40:27,761 [9] DEBUG NHibernate.Type.StringType - binding 'email' to parameter: 0
2018-03-27 15:40:27,767 [9] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Email = @p0;@p0 = 'email' [Type: String (4000:0:0)]
2018-03-27 15:40:27,769 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:27,776 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 3 ms
2018-03-27 15:40:27,778 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 15:40:27,780 [9] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 15:40:27,781 [9] DEBUG NHibernate.Loader.Loader - result set row: 0
2018-03-27 15:40:27,784 [9] DEBUG NHibernate.Type.Int32Type - returning '1' as column: id1_1_0_
2018-03-27 15:40:27,787 [9] DEBUG NHibernate.Loader.Loader - result row: EntityKey[Password.Domain.Model.User#1]
2018-03-27 15:40:27,792 [9] DEBUG NHibernate.Loader.Loader - Initializing object from DataReader: [Password.Domain.Model.User#1]
2018-03-27 15:40:27,797 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Hydrating entity: [Password.Domain.Model.User#1]
2018-03-27 15:40:27,799 [9] DEBUG NHibernate.Type.StringType - returning 'email' as column: email2_1_0_
2018-03-27 15:40:27,800 [9] DEBUG NHibernate.Type.StringType - returning '7a37b85c8918eac19a9089c0fa5a2ab4dce3f90528dcdeec108b23ddf3607b99' as column: password3_1_0_
2018-03-27 15:40:27,802 [9] DEBUG NHibernate.Type.StringType - returning 'cokceken' as column: username4_1_0_
2018-03-27 15:40:27,803 [9] DEBUG NHibernate.Type.StringType - returning 'salt' as column: passwordsalt5_1_0_
2018-03-27 15:40:27,807 [9] DEBUG NHibernate.Loader.Loader - done processing result set (1 rows)
2018-03-27 15:40:27,810 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 15:40:27,812 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 39 ms
2018-03-27 15:40:27,815 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 15:40:27,817 [9] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 15:40:27,819 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:27,821 [9] DEBUG NHibernate.Loader.Loader - total objects hydrated: 1
2018-03-27 15:40:27,824 [9] DEBUG NHibernate.Engine.TwoPhaseLoad - resolving associations for [Password.Domain.Model.User#1]
2018-03-27 15:40:27,827 [9] DEBUG NHibernate.Engine.TwoPhaseLoad - done materializing entity [Password.Domain.Model.User#1]
2018-03-27 15:40:27,829 [9] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 15:40:27,831 [9] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 15:40:27,833 [9] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 15:40:27,837 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=461d252a-6bab-4cd6-a207-5621657be224] running ISession.Dispose()
2018-03-27 15:40:27,838 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=461d252a-6bab-4cd6-a207-5621657be224] executing real Dispose(True)
2018-03-27 15:40:27,841 [9] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 15:40:27,842 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 15:40:27,850 [9] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 15:40:27,852 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,853 [9] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 15:40:27,855 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:40:27,856 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 15:40:27,857 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 15:40:27,859 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 15:40:27,860 [9] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 15:40:27,861 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,863 [9] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 15:40:27,864 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:40:27,865 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 15:40:27,866 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 15:40:27,867 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 15:40:27,868 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 15:40:27,869 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,871 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 15:40:27,872 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 15:40:27,873 [9] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:40:27,874 [9] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:40:27,875 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,876 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:27,881 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 15:40:27,882 [9] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:40:27,883 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:40:27,884 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:40:27,885 [9] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:40:27,886 [9] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:40:27,887 [9] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:40:27,903 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 15:40:27,904 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 15:40:27,905 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 15:40:27,906 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 15:40:27,911 [9] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:40:27,913 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,914 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,915 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,917 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,918 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,919 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,924 [9] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:40:27,925 [9] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 15:40:27,929 [9] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:d778e2f3-10a8-4ad5-9c12-44f99104579e
Error Number:2714,State:6,Class:16
2018-03-27 15:40:27,930 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 15:40:27,931 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:27,932 [9] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:40:27,933 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:40:27,934 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:40:27,935 [9] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:40:27,937 [9] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:40:27,938 [9] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:40:27,938 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,940 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,942 [9] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 15:40:27,944 [9] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 15:40:27,945 [9] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:40:27,946 [9] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:40:27,948 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:27,949 [9] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 15:40:27,951 [9] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 15:40:27,952 [9] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 15:40:27,953 [9] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 15:40:27,954 [9] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 15:40:27,955 [9] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 15:40:27,957 [9] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 15:40:27,958 [9] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 15:40:27,960 [9] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 15:40:27,961 [9] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 15:40:27,962 [9] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:40:27,964 [9] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 15:40:27,965 [9] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 15:40:27,967 [9] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 15:40:27,968 [9] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 15:40:27,970 [9] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:40:27,971 [9] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 15:40:27,973 [9] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 15:40:27,974 [9] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 15:40:27,975 [9] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 15:40:27,976 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 15:40:27,977 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 15:40:27,978 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:28,003 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:28,005 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,006 [9] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 15:40:28,007 [9] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 15:40:28,009 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,010 [9] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 15:40:28,012 [9] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 15:40:28,013 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 15:40:28,014 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 15:40:28,015 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 15:40:28,016 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 15:40:28,017 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 15:40:28,018 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 15:40:28,019 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:40:28,020 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:28,021 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:28,023 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:40:28,024 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 15:40:28,025 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:40:28,026 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:28,027 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:28,028 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 15:40:28,029 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 15:40:28,030 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 15:40:28,031 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 15:40:28,032 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 15:40:28,033 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 15:40:28,034 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:40:28,035 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:28,037 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:28,038 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:40:28,039 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 15:40:28,040 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:40:28,041 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:28,042 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:28,043 [9] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 5e34988d1278492f8ed39aef4a5a0ccd(unnamed)
2018-03-27 15:40:28,044 [9] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 15:40:28,046 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 15:40:28,047 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 15:40:28,048 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 15:40:28,049 [9] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 15:40:28,050 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=5a6f41b9-6dde-4aa6-b462-48d13615e70b] opened session at timestamp: 636577620280, for session factory: [/5e34988d1278492f8ed39aef4a5a0ccd]
2018-03-27 15:40:28,101 [9] DEBUG NHibernate.Linq - Expression (partially evaluated): value(NHibernate.Linq.NhQueryable`1[Password.Domain.Model.Token]).FirstOrDefault(x => (x.User.Id == 1))
2018-03-27 15:40:28,110 [9] DEBUG NHibernate.Engine.Query.QueryPlanCache - unable to locate HQL query plan in cache; generating (.FirstOrDefault[Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null](NHibernate.Linq.NhQueryable`1[Password.Domain.Model.Token], Quote((x, ) => (Equal(x.User.Id, p1))), ))
2018-03-27 15:40:28,214 [9] DEBUG NHibernate.Hql.Ast.ANTLR.HqlSqlWalker - select << begin [level=1, statement=select]
2018-03-27 15:40:28,225 [9] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.FromElement - FromClause{level=1} :  Password.Domain.Model.Token (x) -> token0_
2018-03-27 15:40:28,234 [9] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.FromReferenceNode - Resolved :  x -> token0_.Id
2018-03-27 15:40:28,249 [9] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.FromReferenceNode - Resolved :  x -> token0_.Id
2018-03-27 15:40:28,253 [9] INFO  NHibernate.Hql.Ast.ANTLR.Tree.FromElement - handling property dereference [Password.Domain.Model.Token (x) -> User (Class)]
2018-03-27 15:40:28,256 [9] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.DotNode - getDataType() : User -> NHibernate.Type.ManyToOneType(Password.Domain.Model.User)
2018-03-27 15:40:28,259 [9] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.DotNode - dereferenceShortcut() : property Id in Password.Domain.Model.Token does not require a join.
2018-03-27 15:40:28,262 [9] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.DotNode - Unresolved property path is now 'User.Id'
2018-03-27 15:40:28,263 [9] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.FromReferenceNode - Resolved :  x.User -> token0_.User_id
2018-03-27 15:40:28,264 [9] INFO  NHibernate.Hql.Ast.ANTLR.Tree.FromElement - handling property dereference [Password.Domain.Model.Token (x) -> Id (Class)]
2018-03-27 15:40:28,265 [9] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.DotNode - getDataType() : User.Id -> NHibernate.Type.Int32Type
2018-03-27 15:40:28,267 [9] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.FromReferenceNode - Resolved :  x.User.Id -> token0_.User_id
2018-03-27 15:40:28,273 [9] DEBUG NHibernate.Hql.Ast.ANTLR.HqlSqlWalker - select : finishing up [level=1, statement=select]
2018-03-27 15:40:28,275 [9] DEBUG NHibernate.Hql.Ast.ANTLR.HqlSqlWalker - processQuery() : ( SELECT ( {select clause} token0_.Id ) ( FromClause{level=1} Token token0_ ) ( where ( == ( token0_.User_id ( token0_.User_id token0_.Id User ) Id ) ? ) ) ( take 1 ) )
2018-03-27 15:40:28,291 [9] DEBUG NHibernate.Hql.Ast.ANTLR.Util.JoinProcessor - Using FROM fragment [Token token0_]
2018-03-27 15:40:28,294 [9] DEBUG NHibernate.Hql.Ast.ANTLR.HqlSqlWalker - select >> end [level=1, statement=select]
2018-03-27 15:40:28,295 [9] DEBUG NHibernate.Hql.Ast.ANTLR.ErrorCounter - throwQueryException() : no errors
2018-03-27 15:40:28,330 [9] DEBUG NHibernate.Hql.Ast.ANTLR.HqlSqlGenerator - SQL: select token0_.Id as id1_0_, token0_.ExpireDateTime as expiredatetime2_0_, token0_.Value as value3_0_, token0_.User_id as user4_0_ from Token token0_ where token0_.User_id=? ORDER BY CURRENT_TIMESTAMP OFFSET 0 ROWS FETCH FIRST 1 ROWS ONLY
2018-03-27 15:40:28,332 [9] DEBUG NHibernate.Hql.Ast.ANTLR.ErrorCounter - throwQueryException() : no errors
2018-03-27 15:40:28,345 [9] DEBUG NHibernate.Engine.Query.QueryPlanCache - located HQL query plan in cache (.FirstOrDefault[Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null](NHibernate.Linq.NhQueryable`1[Password.Domain.Model.Token], Quote((x, ) => (Equal(x.User.Id, p1))), ))
2018-03-27 15:40:28,348 [9] DEBUG NHibernate.Engine.Query.HQLQueryPlan - find: .FirstOrDefault[Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null](NHibernate.Linq.NhQueryable`1[Password.Domain.Model.Token], Quote((x, ) => (Equal(x.User.Id, p1))), )
2018-03-27 15:40:28,350 [9] DEBUG NHibernate.Engine.QueryParameters - named parameters: {'p1'='1'}
2018-03-27 15:40:28,354 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 15:40:28,355 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: select token0_.Id as id1_0_, token0_.ExpireDateTime as expiredatetime2_0_, token0_.Value as value3_0_, token0_.User_id as user4_0_ from Token token0_ where token0_.User_id=? ORDER BY CURRENT_TIMESTAMP OFFSET 0 ROWS FETCH FIRST 1 ROWS ONLY
2018-03-27 15:40:28,357 [9] DEBUG NHibernate.Type.Int32Type - binding '1' to parameter: 0
2018-03-27 15:40:28,358 [9] DEBUG NHibernate.SQL - select token0_.Id as id1_0_, token0_.ExpireDateTime as expiredatetime2_0_, token0_.Value as value3_0_, token0_.User_id as user4_0_ from Token token0_ where token0_.User_id=@p0 ORDER BY CURRENT_TIMESTAMP OFFSET 0 ROWS FETCH FIRST 1 ROWS ONLY;@p0 = 1 [Type: Int32 (0:0:0)]
2018-03-27 15:40:28,360 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:28,376 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 14 ms
2018-03-27 15:40:28,378 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 15:40:28,380 [9] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 15:40:28,382 [9] DEBUG NHibernate.Loader.Loader - result set row: 0
2018-03-27 15:40:28,383 [9] DEBUG NHibernate.Type.Int32Type - returning '1' as column: id1_0_
2018-03-27 15:40:28,385 [9] DEBUG NHibernate.Loader.Loader - result row: EntityKey[Password.Domain.Model.Token#1]
2018-03-27 15:40:28,386 [9] DEBUG NHibernate.Loader.Loader - Initializing object from DataReader: [Password.Domain.Model.Token#1]
2018-03-27 15:40:28,387 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Hydrating entity: [Password.Domain.Model.Token#1]
2018-03-27 15:40:28,390 [9] DEBUG NHibernate.Type.DateTimeType - returning '3/27/2018 4:33:09 PM' as column: expiredatetime2_0_
2018-03-27 15:40:28,391 [9] DEBUG NHibernate.Type.StringType - returning '5aRCXK99FU' as column: value3_0_
2018-03-27 15:40:28,392 [9] DEBUG NHibernate.Type.Int32Type - returning '1' as column: user4_0_
2018-03-27 15:40:28,394 [9] DEBUG NHibernate.Loader.Loader - done processing result set (1 rows)
2018-03-27 15:40:28,396 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 15:40:28,397 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 35 ms
2018-03-27 15:40:28,398 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 15:40:28,399 [9] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 15:40:28,400 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:28,402 [9] DEBUG NHibernate.Loader.Loader - total objects hydrated: 1
2018-03-27 15:40:28,403 [9] DEBUG NHibernate.Engine.TwoPhaseLoad - resolving associations for [Password.Domain.Model.Token#1]
2018-03-27 15:40:28,407 [9] DEBUG NHibernate.Event.Default.DefaultLoadEventListener - loading entity: [Password.Domain.Model.User#1]
2018-03-27 15:40:28,409 [9] DEBUG NHibernate.Event.Default.DefaultLoadEventListener - creating new proxy for entity
2018-03-27 15:40:28,429 [9] DEBUG NHibernate.Engine.TwoPhaseLoad - done materializing entity [Password.Domain.Model.Token#1]
2018-03-27 15:40:28,430 [9] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 15:40:28,432 [9] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 15:40:28,433 [9] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 15:40:28,436 [9] DEBUG NHibernate.Impl.SessionImpl - initializing proxy: [Password.Domain.Model.User#1]
2018-03-27 15:40:28,438 [9] DEBUG NHibernate.Event.Default.DefaultLoadEventListener - attempting to resolve: [Password.Domain.Model.User#1]
2018-03-27 15:40:28,440 [9] DEBUG NHibernate.Event.Default.DefaultLoadEventListener - object not resolved in any cache: [Password.Domain.Model.User#1]
2018-03-27 15:40:28,442 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Fetching entity: [Password.Domain.Model.User#1]
2018-03-27 15:40:28,445 [9] DEBUG NHibernate.Loader.Loader - loading entity: [Password.Domain.Model.User#1]
2018-03-27 15:40:28,448 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 15:40:28,449 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:28,450 [9] DEBUG NHibernate.Type.Int32Type - binding '1' to parameter: 0
2018-03-27 15:40:28,451 [9] DEBUG NHibernate.SQL - SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=@p0;@p0 = 1 [Type: Int32 (0:0:0)]
2018-03-27 15:40:28,453 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:28,456 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-27 15:40:28,458 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 15:40:28,459 [9] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 15:40:28,460 [9] DEBUG NHibernate.Loader.Loader - result set row: 0
2018-03-27 15:40:28,461 [9] DEBUG NHibernate.Loader.Loader - result row: EntityKey[Password.Domain.Model.User#1]
2018-03-27 15:40:28,463 [9] DEBUG NHibernate.Loader.Loader - Initializing object from DataReader: [Password.Domain.Model.User#1]
2018-03-27 15:40:28,464 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Hydrating entity: [Password.Domain.Model.User#1]
2018-03-27 15:40:28,465 [9] DEBUG NHibernate.Type.StringType - returning 'email' as column: email2_1_0_
2018-03-27 15:40:28,466 [9] DEBUG NHibernate.Type.StringType - returning '7a37b85c8918eac19a9089c0fa5a2ab4dce3f90528dcdeec108b23ddf3607b99' as column: password3_1_0_
2018-03-27 15:40:28,467 [9] DEBUG NHibernate.Type.StringType - returning 'cokceken' as column: username4_1_0_
2018-03-27 15:40:28,468 [9] DEBUG NHibernate.Type.StringType - returning 'salt' as column: passwordsalt5_1_0_
2018-03-27 15:40:28,469 [9] DEBUG NHibernate.Loader.Loader - done processing result set (1 rows)
2018-03-27 15:40:28,470 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 15:40:28,471 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 17 ms
2018-03-27 15:40:28,472 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 15:40:28,474 [9] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 15:40:28,475 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:28,476 [9] DEBUG NHibernate.Loader.Loader - total objects hydrated: 1
2018-03-27 15:40:28,477 [9] DEBUG NHibernate.Engine.TwoPhaseLoad - resolving associations for [Password.Domain.Model.User#1]
2018-03-27 15:40:28,479 [9] DEBUG NHibernate.Engine.TwoPhaseLoad - done materializing entity [Password.Domain.Model.User#1]
2018-03-27 15:40:28,480 [9] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 15:40:28,481 [9] DEBUG NHibernate.Loader.Loader - done entity load
2018-03-27 15:40:28,482 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=5a6f41b9-6dde-4aa6-b462-48d13615e70b] running ISession.Dispose()
2018-03-27 15:40:28,483 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=5a6f41b9-6dde-4aa6-b462-48d13615e70b] executing real Dispose(True)
2018-03-27 15:40:28,484 [9] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 15:40:28,485 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 15:40:28,488 [9] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 15:40:28,490 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,491 [9] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 15:40:28,493 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:40:28,494 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 15:40:28,495 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 15:40:28,496 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 15:40:28,497 [9] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 15:40:28,499 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,500 [9] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 15:40:28,501 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:40:28,503 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 15:40:28,504 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 15:40:28,505 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 15:40:28,507 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 15:40:28,508 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,509 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 15:40:28,510 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 15:40:28,511 [9] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:40:28,512 [9] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:40:28,513 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,514 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:28,518 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 15:40:28,520 [9] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:40:28,521 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:40:28,522 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:40:28,523 [9] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:40:28,524 [9] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:40:28,525 [9] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:40:28,541 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 15:40:28,542 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 15:40:28,543 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 15:40:28,544 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 15:40:28,549 [9] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:40:28,550 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,551 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,553 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,554 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,556 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,558 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,563 [9] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:40:28,564 [9] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 15:40:28,567 [9] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:d778e2f3-10a8-4ad5-9c12-44f99104579e
Error Number:2714,State:6,Class:16
2018-03-27 15:40:28,569 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 15:40:28,570 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:28,571 [9] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:40:28,572 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:40:28,573 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:40:28,574 [9] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:40:28,575 [9] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:40:28,576 [9] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:40:28,577 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,579 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,580 [9] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 15:40:28,581 [9] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 15:40:28,582 [9] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:40:28,584 [9] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:40:28,585 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,587 [9] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 15:40:28,588 [9] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 15:40:28,589 [9] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 15:40:28,591 [9] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 15:40:28,592 [9] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 15:40:28,593 [9] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 15:40:28,595 [9] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 15:40:28,596 [9] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 15:40:28,597 [9] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 15:40:28,599 [9] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 15:40:28,600 [9] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:40:28,614 [9] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 15:40:28,616 [9] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 15:40:28,617 [9] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 15:40:28,618 [9] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 15:40:28,620 [9] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:40:28,621 [9] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 15:40:28,623 [9] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 15:40:28,624 [9] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 15:40:28,626 [9] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 15:40:28,627 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 15:40:28,629 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 15:40:28,630 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:28,650 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:28,652 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,653 [9] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 15:40:28,654 [9] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 15:40:28,656 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,657 [9] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 15:40:28,659 [9] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 15:40:28,660 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 15:40:28,661 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 15:40:28,663 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 15:40:28,664 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 15:40:28,665 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 15:40:28,666 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 15:40:28,667 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:40:28,668 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:28,669 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:28,670 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:40:28,671 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 15:40:28,673 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:40:28,674 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:28,675 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:28,676 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 15:40:28,677 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 15:40:28,678 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 15:40:28,679 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 15:40:28,680 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 15:40:28,681 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 15:40:28,682 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:40:28,684 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:28,685 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:28,686 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:40:28,687 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 15:40:28,689 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:40:28,690 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:28,691 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:28,692 [9] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 0229c93104f244949af3e9442ac9a966(unnamed)
2018-03-27 15:40:28,693 [9] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 15:40:28,694 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 15:40:28,695 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 15:40:28,696 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 15:40:28,698 [9] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 15:40:28,699 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=3cdcf951-8741-4320-92b9-2922d24dcfe2] opened session at timestamp: 636577620286, for session factory: [/0229c93104f244949af3e9442ac9a966]
2018-03-27 15:40:28,701 [9] DEBUG NHibernate.Transaction.AdoTransaction - Begin (Unspecified)
2018-03-27 15:40:28,714 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:28,717 [9] DEBUG NHibernate.Event.Default.DefaultDeleteEventListener - entity was not persistent in delete processing
2018-03-27 15:40:28,720 [9] DEBUG NHibernate.Engine.IdentifierValue - unsaved-value: 0
2018-03-27 15:40:28,725 [9] DEBUG NHibernate.Event.Default.DefaultDeleteEventListener - deleting [Password.Domain.Model.Token#1]
2018-03-27 15:40:28,727 [9] DEBUG NHibernate.Impl.SessionImpl - setting cache mode to: Get
2018-03-27 15:40:28,729 [9] DEBUG NHibernate.Impl.SessionImpl - setting cache mode to: Normal
2018-03-27 15:40:28,732 [9] DEBUG NHibernate.Impl.SessionImpl - setting cache mode to: Get
2018-03-27 15:40:28,733 [9] DEBUG NHibernate.Impl.SessionImpl - setting cache mode to: Normal
2018-03-27 15:40:28,735 [9] DEBUG NHibernate.Transaction.AdoTransaction - Start Commit
2018-03-27 15:40:28,737 [9] DEBUG NHibernate.Impl.SessionImpl - before transaction completion
2018-03-27 15:40:28,739 [9] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - flushing session
2018-03-27 15:40:28,741 [9] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - processing flush-time cascades
2018-03-27 15:40:28,742 [9] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - dirty checking collections
2018-03-27 15:40:28,744 [9] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Flushing entities and processing referenced collections
2018-03-27 15:40:28,750 [9] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Processing unreferenced collections
2018-03-27 15:40:28,752 [9] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Scheduling collection removes/(re)creates/updates
2018-03-27 15:40:28,754 [9] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 1 deletions to 1 objects
2018-03-27 15:40:28,755 [9] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2018-03-27 15:40:28,756 [9] DEBUG NHibernate.Impl.Printer - listing entities:
2018-03-27 15:40:28,759 [9] DEBUG NHibernate.Impl.Printer - Password.Domain.Model.Token{'Id'='1', 'ExpireDateTime'='3/27/2018 4:33:09 PM', 'Value'='5aRCXK99FU', 'User'='Password.Domain.Model.User#1'}
2018-03-27 15:40:28,760 [9] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - executing flush
2018-03-27 15:40:28,761 [9] DEBUG NHibernate.AdoNet.ConnectionManager - Registering flush begin
2018-03-27 15:40:28,766 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Deleting entity: [Password.Domain.Model.Token#1]
2018-03-27 15:40:28,768 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 15:40:28,769 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: DELETE FROM Token WHERE Id = ?
2018-03-27 15:40:28,771 [9] DEBUG NHibernate.Type.Int32Type - binding '1' to parameter: 0
2018-03-27 15:40:28,773 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Adding to batch:DELETE FROM Token WHERE Id = @p0;@p0 = 1 [Type: Int32 (0:0:0)]
2018-03-27 15:40:28,777 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Executing batch
2018-03-27 15:40:28,778 [9] DEBUG NHibernate.Transaction.AdoTransaction - Enlist Command
2018-03-27 15:40:28,780 [9] DEBUG NHibernate.SQL - Batch commands:
command 0:DELETE FROM Token WHERE Id = @p0;@p0 = 1 [Type: Int32 (0:0:0)]

2018-03-27 15:40:28,784 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteBatch for 1 statements took 6 ms
2018-03-27 15:40:28,785 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 15:40:28,786 [9] DEBUG NHibernate.AdoNet.ConnectionManager - Registering flush end
2018-03-27 15:40:28,788 [9] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - post flush
2018-03-27 15:40:28,791 [9] DEBUG NHibernate.Transaction.AdoTransaction - DbTransaction Committed
2018-03-27 15:40:28,792 [9] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 15:40:28,794 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:28,795 [9] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 15:40:28,796 [9] DEBUG NHibernate.Transaction.AdoTransaction - DbTransaction disposed.
2018-03-27 15:40:28,797 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=3cdcf951-8741-4320-92b9-2922d24dcfe2] running ISession.Dispose()
2018-03-27 15:40:28,798 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=3cdcf951-8741-4320-92b9-2922d24dcfe2] executing real Dispose(True)
2018-03-27 15:40:28,799 [9] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 15:40:28,800 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 15:40:28,804 [9] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 15:40:28,806 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,807 [9] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 15:40:28,809 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:40:28,810 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 15:40:28,811 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 15:40:28,812 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 15:40:28,814 [9] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 15:40:28,815 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,816 [9] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 15:40:28,818 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:40:28,819 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 15:40:28,820 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 15:40:28,823 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 15:40:28,824 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 15:40:28,825 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,827 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 15:40:28,828 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 15:40:28,829 [9] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:40:28,830 [9] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:40:28,831 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,833 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:28,837 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 15:40:28,838 [9] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:40:28,839 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:40:28,840 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:40:28,842 [9] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:40:28,843 [9] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:40:28,844 [9] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:40:28,860 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 15:40:28,861 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 15:40:28,862 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 15:40:28,863 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 15:40:28,867 [9] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:40:28,869 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,870 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,871 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,872 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,874 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,875 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,880 [9] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:40:28,881 [9] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 15:40:28,884 [9] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:d778e2f3-10a8-4ad5-9c12-44f99104579e
Error Number:2714,State:6,Class:16
2018-03-27 15:40:28,885 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 15:40:28,886 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:28,888 [9] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:40:28,889 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:40:28,890 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:40:28,891 [9] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:40:28,892 [9] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:40:28,893 [9] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:40:28,895 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,896 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,897 [9] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 15:40:28,899 [9] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 15:40:28,900 [9] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:40:28,901 [9] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:40:28,902 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,903 [9] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 15:40:28,904 [9] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 15:40:28,906 [9] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 15:40:28,907 [9] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 15:40:28,908 [9] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 15:40:28,909 [9] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 15:40:28,910 [9] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 15:40:28,911 [9] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 15:40:28,912 [9] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 15:40:28,913 [9] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 15:40:28,914 [9] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:40:28,915 [9] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 15:40:28,916 [9] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 15:40:28,917 [9] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 15:40:28,918 [9] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 15:40:28,919 [9] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:40:28,920 [9] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 15:40:28,921 [9] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 15:40:28,923 [9] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 15:40:28,924 [9] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 15:40:28,925 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 15:40:28,926 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 15:40:28,928 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:28,948 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:28,949 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,950 [9] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 15:40:28,951 [9] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 15:40:28,952 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:28,954 [9] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 15:40:28,955 [9] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 15:40:28,957 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 15:40:28,958 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 15:40:28,959 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 15:40:28,960 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 15:40:28,961 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 15:40:28,962 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 15:40:28,963 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:40:28,964 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:28,966 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:28,967 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:40:28,968 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 15:40:28,969 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:40:28,971 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:28,972 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:28,973 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 15:40:28,975 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 15:40:28,976 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 15:40:28,977 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 15:40:28,978 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 15:40:28,979 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 15:40:28,981 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:40:28,982 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:28,982 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:28,983 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:40:28,984 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 15:40:28,985 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:40:28,986 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:28,989 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:28,989 [9] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: ec426f285e1f469db606d0f47367fbd3(unnamed)
2018-03-27 15:40:28,990 [9] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 15:40:28,991 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 15:40:28,993 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 15:40:28,993 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 15:40:28,994 [9] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 15:40:28,996 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=6021cea8-2c82-449a-9f40-e5597a002cba] opened session at timestamp: 636577620289, for session factory: [/ec426f285e1f469db606d0f47367fbd3]
2018-03-27 15:40:28,998 [9] DEBUG NHibernate.Event.Default.DefaultSaveOrUpdateEventListener - saving transient instance
2018-03-27 15:40:29,000 [9] DEBUG NHibernate.Event.Default.AbstractSaveEventListener - saving [Password.Domain.Model.Token#<null>]
2018-03-27 15:40:29,003 [9] DEBUG NHibernate.Event.Default.AbstractSaveEventListener - executing insertions
2018-03-27 15:40:29,005 [9] DEBUG NHibernate.Engine.IdentifierValue - unsaved-value: 0
2018-03-27 15:40:29,007 [9] DEBUG NHibernate.Event.Default.AbstractSaveEventListener - executing identity-insert immediately
2018-03-27 15:40:29,012 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Inserting entity: Password.Domain.Model.Token (native id)
2018-03-27 15:40:29,014 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 15:40:29,014 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:40:29,016 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Dehydrating entity: [Password.Domain.Model.Token#<null>]
2018-03-27 15:40:29,018 [9] DEBUG NHibernate.Type.DateTimeType - binding '3/27/2018 4:40:27 PM' to parameter: 0
2018-03-27 15:40:29,019 [9] DEBUG NHibernate.Type.StringType - binding 'xFc1Nw4Ujp' to parameter: 1
2018-03-27 15:40:29,021 [9] DEBUG NHibernate.Engine.IdentifierValue - unsaved-value: 0
2018-03-27 15:40:29,024 [9] DEBUG NHibernate.Type.Int32Type - binding '1' to parameter: 2
2018-03-27 15:40:29,025 [9] DEBUG NHibernate.SQL - INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (@p0, @p1, @p2); select SCOPE_IDENTITY();@p0 = 2018-03-27T16:40:27.8491908+03:00 [Type: DateTime2 (8:0:0)], @p1 = 'xFc1Nw4Ujp' [Type: String (4000:0:0)], @p2 = 1 [Type: Int32 (0:0:0)]
2018-03-27 15:40:29,026 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:29,041 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 13 ms
2018-03-27 15:40:29,043 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 15:40:29,045 [9] DEBUG NHibernate.Type.Int32Type - returning '2' as column: 
2018-03-27 15:40:29,047 [9] DEBUG NHibernate.Id.IdentifierGeneratorFactory - Natively generated identity: 2
2018-03-27 15:40:29,048 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 15:40:29,050 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 22 ms
2018-03-27 15:40:29,051 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 15:40:29,052 [9] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 15:40:29,053 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:29,056 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=6021cea8-2c82-449a-9f40-e5597a002cba] running ISession.Dispose()
2018-03-27 15:40:29,057 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=6021cea8-2c82-449a-9f40-e5597a002cba] executing real Dispose(True)
2018-03-27 15:40:29,058 [9] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 15:40:29,060 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 15:40:57,957 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 15:40:57,958 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:57,961 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 15:40:57,962 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:40:57,963 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 15:40:57,965 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 15:40:57,966 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 15:40:57,968 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 15:40:57,969 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:57,971 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 15:40:57,973 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:40:57,974 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 15:40:57,975 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 15:40:57,977 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 15:40:57,979 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 15:40:57,982 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:57,984 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 15:40:57,985 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 15:40:57,986 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:40:57,988 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:40:57,990 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:57,991 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:58,002 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 15:40:58,004 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:40:58,005 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:40:58,007 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:40:58,008 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:40:58,010 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:40:58,012 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:40:58,116 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 15:40:58,117 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 15:40:58,119 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 15:40:58,120 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 15:40:58,132 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:40:58,134 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,135 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,137 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,138 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,139 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,140 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,144 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:40:58,146 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 15:40:58,150 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:d778e2f3-10a8-4ad5-9c12-44f99104579e
Error Number:2714,State:6,Class:16
2018-03-27 15:40:58,151 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 15:40:58,153 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:58,154 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:40:58,155 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:40:58,156 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:40:58,157 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:40:58,158 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:40:58,160 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:40:58,161 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,162 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,164 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 15:40:58,165 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 15:40:58,166 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:40:58,168 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:40:58,169 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,170 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 15:40:58,172 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 15:40:58,173 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 15:40:58,174 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 15:40:58,175 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 15:40:58,176 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 15:40:58,178 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 15:40:58,179 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 15:40:58,180 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 15:40:58,181 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 15:40:58,183 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:40:58,184 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 15:40:58,185 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 15:40:58,186 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 15:40:58,187 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 15:40:58,189 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:40:58,190 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 15:40:58,191 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 15:40:58,192 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 15:40:58,193 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 15:40:58,194 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 15:40:58,195 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 15:40:58,197 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:58,231 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:58,233 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,235 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 15:40:58,236 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 15:40:58,238 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,239 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 15:40:58,241 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 15:40:58,242 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 15:40:58,243 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 15:40:58,244 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 15:40:58,246 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 15:40:58,247 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 15:40:58,248 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 15:40:58,249 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:40:58,250 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:58,252 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:58,253 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:40:58,254 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 15:40:58,256 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:40:58,257 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:58,259 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:58,260 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 15:40:58,261 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 15:40:58,262 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 15:40:58,263 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 15:40:58,264 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 15:40:58,265 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 15:40:58,266 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:40:58,267 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:58,268 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:58,269 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:40:58,271 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 15:40:58,272 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:40:58,273 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:58,274 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:58,275 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: f805a2d40ae745b89710276c25757067(unnamed)
2018-03-27 15:40:58,276 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 15:40:58,277 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 15:40:58,278 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 15:40:58,279 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 15:40:58,280 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 15:40:58,281 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=8c4c0961-1e60-4f72-8fa9-6458beef3352] opened session at timestamp: 636577620582, for session factory: [/f805a2d40ae745b89710276c25757067]
2018-03-27 15:40:58,282 [5] DEBUG NHibernate.Linq - Expression (partially evaluated): value(NHibernate.Linq.NhQueryable`1[Password.Domain.Model.Token]).FirstOrDefault(x => x.Value.Equals("xFc1Nw4Ujp"))
2018-03-27 15:40:58,284 [5] DEBUG NHibernate.Engine.Query.QueryPlanCache - unable to locate HQL query plan in cache; generating (.FirstOrDefault[Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null](NHibernate.Linq.NhQueryable`1[Password.Domain.Model.Token], Quote((x, ) => (x.Value.Equals(p1, ))), ))
2018-03-27 15:40:58,288 [5] DEBUG NHibernate.Hql.Ast.ANTLR.HqlSqlWalker - select << begin [level=1, statement=select]
2018-03-27 15:40:58,289 [5] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.FromElement - FromClause{level=1} :  Password.Domain.Model.Token (x) -> token0_
2018-03-27 15:40:58,290 [5] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.FromReferenceNode - Resolved :  x -> token0_.Id
2018-03-27 15:40:58,291 [5] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.FromReferenceNode - Resolved :  x -> token0_.Id
2018-03-27 15:40:58,292 [5] INFO  NHibernate.Hql.Ast.ANTLR.Tree.FromElement - handling property dereference [Password.Domain.Model.Token (x) -> Value (Class)]
2018-03-27 15:40:58,294 [5] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.DotNode - getDataType() : Value -> NHibernate.Type.StringType
2018-03-27 15:40:58,295 [5] DEBUG NHibernate.Hql.Ast.ANTLR.Tree.FromReferenceNode - Resolved :  x.Value -> token0_.Value
2018-03-27 15:40:58,296 [5] DEBUG NHibernate.Hql.Ast.ANTLR.HqlSqlWalker - select : finishing up [level=1, statement=select]
2018-03-27 15:40:58,297 [5] DEBUG NHibernate.Hql.Ast.ANTLR.HqlSqlWalker - processQuery() : ( SELECT ( {select clause} token0_.Id ) ( FromClause{level=1} Token token0_ ) ( where ( == ( token0_.Value token0_.Id Value ) ? ) ) ( take 1 ) )
2018-03-27 15:40:58,298 [5] DEBUG NHibernate.Hql.Ast.ANTLR.Util.JoinProcessor - Using FROM fragment [Token token0_]
2018-03-27 15:40:58,299 [5] DEBUG NHibernate.Hql.Ast.ANTLR.HqlSqlWalker - select >> end [level=1, statement=select]
2018-03-27 15:40:58,300 [5] DEBUG NHibernate.Hql.Ast.ANTLR.ErrorCounter - throwQueryException() : no errors
2018-03-27 15:40:58,301 [5] DEBUG NHibernate.Hql.Ast.ANTLR.HqlSqlGenerator - SQL: select token0_.Id as id1_0_, token0_.ExpireDateTime as expiredatetime2_0_, token0_.Value as value3_0_, token0_.User_id as user4_0_ from Token token0_ where token0_.Value=? ORDER BY CURRENT_TIMESTAMP OFFSET 0 ROWS FETCH FIRST 1 ROWS ONLY
2018-03-27 15:40:58,302 [5] DEBUG NHibernate.Hql.Ast.ANTLR.ErrorCounter - throwQueryException() : no errors
2018-03-27 15:40:58,304 [5] DEBUG NHibernate.Engine.Query.QueryPlanCache - located HQL query plan in cache (.FirstOrDefault[Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null](NHibernate.Linq.NhQueryable`1[Password.Domain.Model.Token], Quote((x, ) => (x.Value.Equals(p1, ))), ))
2018-03-27 15:40:58,305 [5] DEBUG NHibernate.Engine.Query.HQLQueryPlan - find: .FirstOrDefault[Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null](NHibernate.Linq.NhQueryable`1[Password.Domain.Model.Token], Quote((x, ) => (x.Value.Equals(p1, ))), )
2018-03-27 15:40:58,306 [5] DEBUG NHibernate.Engine.QueryParameters - named parameters: {'p1'='xFc1Nw4Ujp'}
2018-03-27 15:40:58,307 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 15:40:58,308 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: select token0_.Id as id1_0_, token0_.ExpireDateTime as expiredatetime2_0_, token0_.Value as value3_0_, token0_.User_id as user4_0_ from Token token0_ where token0_.Value=? ORDER BY CURRENT_TIMESTAMP OFFSET 0 ROWS FETCH FIRST 1 ROWS ONLY
2018-03-27 15:40:58,309 [5] DEBUG NHibernate.Type.StringType - binding 'xFc1Nw4Ujp' to parameter: 0
2018-03-27 15:40:58,310 [5] DEBUG NHibernate.SQL - select token0_.Id as id1_0_, token0_.ExpireDateTime as expiredatetime2_0_, token0_.Value as value3_0_, token0_.User_id as user4_0_ from Token token0_ where token0_.Value=@p0 ORDER BY CURRENT_TIMESTAMP OFFSET 0 ROWS FETCH FIRST 1 ROWS ONLY;@p0 = 'xFc1Nw4Ujp' [Type: String (4000:0:0)]
2018-03-27 15:40:58,311 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:58,326 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 14 ms
2018-03-27 15:40:58,327 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 15:40:58,328 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 15:40:58,329 [5] DEBUG NHibernate.Loader.Loader - result set row: 0
2018-03-27 15:40:58,331 [5] DEBUG NHibernate.Type.Int32Type - returning '2' as column: id1_0_
2018-03-27 15:40:58,332 [5] DEBUG NHibernate.Loader.Loader - result row: EntityKey[Password.Domain.Model.Token#2]
2018-03-27 15:40:58,333 [5] DEBUG NHibernate.Loader.Loader - Initializing object from DataReader: [Password.Domain.Model.Token#2]
2018-03-27 15:40:58,334 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Hydrating entity: [Password.Domain.Model.Token#2]
2018-03-27 15:40:58,335 [5] DEBUG NHibernate.Type.DateTimeType - returning '3/27/2018 4:40:27 PM' as column: expiredatetime2_0_
2018-03-27 15:40:58,336 [5] DEBUG NHibernate.Type.StringType - returning 'xFc1Nw4Ujp' as column: value3_0_
2018-03-27 15:40:58,337 [5] DEBUG NHibernate.Type.Int32Type - returning '1' as column: user4_0_
2018-03-27 15:40:58,338 [5] DEBUG NHibernate.Loader.Loader - done processing result set (1 rows)
2018-03-27 15:40:58,339 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 15:40:58,340 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 28 ms
2018-03-27 15:40:58,341 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 15:40:58,342 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 15:40:58,343 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:58,344 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 1
2018-03-27 15:40:58,345 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - resolving associations for [Password.Domain.Model.Token#2]
2018-03-27 15:40:58,346 [5] DEBUG NHibernate.Event.Default.DefaultLoadEventListener - loading entity: [Password.Domain.Model.User#1]
2018-03-27 15:40:58,347 [5] DEBUG NHibernate.Event.Default.DefaultLoadEventListener - creating new proxy for entity
2018-03-27 15:40:58,349 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - done materializing entity [Password.Domain.Model.Token#2]
2018-03-27 15:40:58,350 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 15:40:58,351 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 15:40:58,352 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 15:40:58,354 [5] DEBUG NHibernate.Impl.SessionImpl - initializing proxy: [Password.Domain.Model.User#1]
2018-03-27 15:40:58,355 [5] DEBUG NHibernate.Event.Default.DefaultLoadEventListener - attempting to resolve: [Password.Domain.Model.User#1]
2018-03-27 15:40:58,356 [5] DEBUG NHibernate.Event.Default.DefaultLoadEventListener - object not resolved in any cache: [Password.Domain.Model.User#1]
2018-03-27 15:40:58,357 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Fetching entity: [Password.Domain.Model.User#1]
2018-03-27 15:40:58,358 [5] DEBUG NHibernate.Loader.Loader - loading entity: [Password.Domain.Model.User#1]
2018-03-27 15:40:58,359 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 15:40:58,360 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:58,361 [5] DEBUG NHibernate.Type.Int32Type - binding '1' to parameter: 0
2018-03-27 15:40:58,361 [5] DEBUG NHibernate.SQL - SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=@p0;@p0 = 1 [Type: Int32 (0:0:0)]
2018-03-27 15:40:58,362 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:58,365 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 1 ms
2018-03-27 15:40:58,366 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 15:40:58,367 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 15:40:58,368 [5] DEBUG NHibernate.Loader.Loader - result set row: 0
2018-03-27 15:40:58,369 [5] DEBUG NHibernate.Loader.Loader - result row: EntityKey[Password.Domain.Model.User#1]
2018-03-27 15:40:58,370 [5] DEBUG NHibernate.Loader.Loader - Initializing object from DataReader: [Password.Domain.Model.User#1]
2018-03-27 15:40:58,371 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Hydrating entity: [Password.Domain.Model.User#1]
2018-03-27 15:40:58,372 [5] DEBUG NHibernate.Type.StringType - returning 'email' as column: email2_1_0_
2018-03-27 15:40:58,374 [5] DEBUG NHibernate.Type.StringType - returning '7a37b85c8918eac19a9089c0fa5a2ab4dce3f90528dcdeec108b23ddf3607b99' as column: password3_1_0_
2018-03-27 15:40:58,375 [5] DEBUG NHibernate.Type.StringType - returning 'cokceken' as column: username4_1_0_
2018-03-27 15:40:58,376 [5] DEBUG NHibernate.Type.StringType - returning 'salt' as column: passwordsalt5_1_0_
2018-03-27 15:40:58,377 [5] DEBUG NHibernate.Loader.Loader - done processing result set (1 rows)
2018-03-27 15:40:58,378 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 15:40:58,379 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 15 ms
2018-03-27 15:40:58,380 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 15:40:58,381 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 15:40:58,382 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:58,383 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 1
2018-03-27 15:40:58,384 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - resolving associations for [Password.Domain.Model.User#1]
2018-03-27 15:40:58,386 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - done materializing entity [Password.Domain.Model.User#1]
2018-03-27 15:40:58,387 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 15:40:58,388 [5] DEBUG NHibernate.Loader.Loader - done entity load
2018-03-27 15:40:58,389 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=8c4c0961-1e60-4f72-8fa9-6458beef3352] running ISession.Dispose()
2018-03-27 15:40:58,390 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=8c4c0961-1e60-4f72-8fa9-6458beef3352] executing real Dispose(True)
2018-03-27 15:40:58,391 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 15:40:58,392 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 15:40:58,396 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 15:40:58,398 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,399 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 15:40:58,400 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:40:58,401 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 15:40:58,402 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 15:40:58,404 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 15:40:58,405 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 15:40:58,406 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,407 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 15:40:58,408 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:40:58,409 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 15:40:58,410 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 15:40:58,412 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 15:40:58,413 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 15:40:58,414 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,415 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 15:40:58,416 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 15:40:58,417 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:40:58,419 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:40:58,421 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,422 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:58,426 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 15:40:58,428 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:40:58,429 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:40:58,431 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:40:58,432 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:40:58,434 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:40:58,435 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:40:58,452 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 15:40:58,454 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 15:40:58,455 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 15:40:58,456 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 15:40:58,460 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:40:58,461 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,462 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,464 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,465 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,467 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,469 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,472 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:40:58,474 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 15:40:58,477 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:d778e2f3-10a8-4ad5-9c12-44f99104579e
Error Number:2714,State:6,Class:16
2018-03-27 15:40:58,479 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 15:40:58,480 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:58,481 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:40:58,482 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:40:58,483 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:40:58,484 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:40:58,486 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:40:58,487 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:40:58,488 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,489 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,491 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 15:40:58,492 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 15:40:58,493 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:40:58,494 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:40:58,495 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,496 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 15:40:58,497 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 15:40:58,498 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 15:40:58,499 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 15:40:58,500 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 15:40:58,501 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 15:40:58,502 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 15:40:58,503 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 15:40:58,504 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 15:40:58,505 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 15:40:58,506 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:40:58,507 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 15:40:58,508 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 15:40:58,509 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 15:40:58,510 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 15:40:58,511 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:40:58,512 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 15:40:58,513 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 15:40:58,514 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 15:40:58,515 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 15:40:58,516 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 15:40:58,517 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 15:40:58,518 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:58,536 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:58,537 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,538 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 15:40:58,540 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 15:40:58,541 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:40:58,542 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 15:40:58,543 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 15:40:58,544 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 15:40:58,545 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 15:40:58,547 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 15:40:58,548 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 15:40:58,549 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 15:40:58,550 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 15:40:58,550 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:40:58,552 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:58,553 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:58,554 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:40:58,556 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 15:40:58,557 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:40:58,558 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:58,559 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:40:58,560 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 15:40:58,562 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 15:40:58,562 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 15:40:58,563 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 15:40:58,564 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 15:40:58,566 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 15:40:58,567 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:40:58,568 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:58,569 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:58,571 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:40:58,572 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 15:40:58,573 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:40:58,574 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:58,575 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:40:58,576 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: b19b6738edc6415e84a4877d48b8d0b5(unnamed)
2018-03-27 15:40:58,577 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 15:40:58,578 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 15:40:58,579 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 15:40:58,580 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 15:40:58,581 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 15:40:58,582 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=45b9b5ef-510a-40e9-ad85-fcec69cdce62] opened session at timestamp: 636577620585, for session factory: [/b19b6738edc6415e84a4877d48b8d0b5]
2018-03-27 15:40:58,584 [5] DEBUG NHibernate.Transaction.AdoTransaction - Begin (Unspecified)
2018-03-27 15:40:58,585 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:40:58,588 [5] DEBUG NHibernate.Event.Default.DefaultSaveOrUpdateEventListener - updating detached instance
2018-03-27 15:40:58,590 [5] DEBUG NHibernate.Event.Default.DefaultSaveOrUpdateEventListener - updating [Password.Domain.Model.User#1]
2018-03-27 15:40:58,592 [5] DEBUG NHibernate.Event.Default.DefaultSaveOrUpdateEventListener - updating [Password.Domain.Model.User#1]
2018-03-27 15:40:58,593 [5] DEBUG NHibernate.Transaction.AdoTransaction - Start Commit
2018-03-27 15:40:58,594 [5] DEBUG NHibernate.Impl.SessionImpl - before transaction completion
2018-03-27 15:40:58,595 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - flushing session
2018-03-27 15:40:58,596 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - processing flush-time cascades
2018-03-27 15:40:58,597 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - dirty checking collections
2018-03-27 15:40:58,598 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Flushing entities and processing referenced collections
2018-03-27 15:40:58,602 [5] DEBUG NHibernate.Event.Default.DefaultFlushEntityEventListener - Updating entity: [Password.Domain.Model.User#1]
2018-03-27 15:40:58,604 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Processing unreferenced collections
2018-03-27 15:40:58,605 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Scheduling collection removes/(re)creates/updates
2018-03-27 15:40:58,606 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Flushed: 0 insertions, 1 updates, 0 deletions to 1 objects
2018-03-27 15:40:58,607 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2018-03-27 15:40:58,608 [5] DEBUG NHibernate.Impl.Printer - listing entities:
2018-03-27 15:40:58,609 [5] DEBUG NHibernate.Impl.Printer - Password.Domain.Model.User{'Id'='1', 'Email'='email', 'Password'='8214822332f34da7c595f73512b5a5e24ddf8a0d5cc1bc12a860f7bb076dde1b', 'Username'='cokceken', 'PasswordSalt'='salt'}
2018-03-27 15:40:58,610 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - executing flush
2018-03-27 15:40:58,611 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Registering flush begin
2018-03-27 15:40:58,617 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Updating entity: [Password.Domain.Model.User#1]
2018-03-27 15:40:58,618 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 15:40:58,619 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 15:40:58,620 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Dehydrating entity: [Password.Domain.Model.User#1]
2018-03-27 15:40:58,621 [5] DEBUG NHibernate.Type.StringType - binding 'email' to parameter: 0
2018-03-27 15:40:58,622 [5] DEBUG NHibernate.Type.StringType - binding '8214822332f34da7c595f73512b5a5e24ddf8a0d5cc1bc12a860f7bb076dde1b' to parameter: 1
2018-03-27 15:40:58,623 [5] DEBUG NHibernate.Type.StringType - binding 'cokceken' to parameter: 2
2018-03-27 15:40:58,624 [5] DEBUG NHibernate.Type.StringType - binding 'salt' to parameter: 3
2018-03-27 15:40:58,625 [5] DEBUG NHibernate.Type.Int32Type - binding '1' to parameter: 4
2018-03-27 15:40:58,626 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Adding to batch:UPDATE [User] SET Email = @p0, Password = @p1, Username = @p2, PasswordSalt = @p3 WHERE Id = @p4;@p0 = 'email' [Type: String (4000:0:0)], @p1 = '8214822332f34da7c595f73512b5a5e24ddf8a0d5cc1bc12a860f7bb076dde1b' [Type: String (4000:0:0)], @p2 = 'cokceken' [Type: String (4000:0:0)], @p3 = 'salt' [Type: String (4000:0:0)], @p4 = 1 [Type: Int32 (0:0:0)]
2018-03-27 15:40:58,628 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Executing batch
2018-03-27 15:40:58,630 [5] DEBUG NHibernate.Transaction.AdoTransaction - Enlist Command
2018-03-27 15:40:58,631 [5] DEBUG NHibernate.SQL - Batch commands:
command 0:UPDATE [User] SET Email = @p0, Password = @p1, Username = @p2, PasswordSalt = @p3 WHERE Id = @p4;@p0 = 'email' [Type: String (4000:0:0)], @p1 = '8214822332f34da7c595f73512b5a5e24ddf8a0d5cc1bc12a860f7bb076dde1b' [Type: String (4000:0:0)], @p2 = 'cokceken' [Type: String (4000:0:0)], @p3 = 'salt' [Type: String (4000:0:0)], @p4 = 1 [Type: Int32 (0:0:0)]

2018-03-27 15:40:58,635 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteBatch for 1 statements took 6 ms
2018-03-27 15:40:58,637 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 15:40:58,638 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Registering flush end
2018-03-27 15:40:58,640 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - post flush
2018-03-27 15:40:58,653 [5] DEBUG NHibernate.Transaction.AdoTransaction - DbTransaction Committed
2018-03-27 15:40:58,654 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 15:40:58,656 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:40:58,658 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 15:40:58,659 [5] DEBUG NHibernate.Transaction.AdoTransaction - DbTransaction disposed.
2018-03-27 15:40:58,660 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=45b9b5ef-510a-40e9-ad85-fcec69cdce62] running ISession.Dispose()
2018-03-27 15:40:58,662 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=45b9b5ef-510a-40e9-ad85-fcec69cdce62] executing real Dispose(True)
2018-03-27 15:40:58,663 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 15:40:58,664 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 15:41:08,644 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:cokceken, password:new
2018-03-27 15:41:08,648 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 15:41:08,649 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:41:08,651 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 15:41:08,652 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:41:08,653 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 15:41:08,655 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 15:41:08,656 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 15:41:08,657 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 15:41:08,660 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:41:08,662 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 15:41:08,663 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 15:41:08,665 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 15:41:08,666 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 15:41:08,667 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 15:41:08,669 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 15:41:08,670 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:41:08,672 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 15:41:08,673 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 15:41:08,674 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:41:08,676 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:41:08,677 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:41:08,678 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:41:08,683 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 15:41:08,684 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:41:08,685 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:41:08,686 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:41:08,688 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:41:08,689 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:41:08,690 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:41:08,709 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 15:41:08,710 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 15:41:08,711 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 15:41:08,713 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 15:41:08,717 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:41:08,718 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:41:08,720 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:41:08,721 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:41:08,722 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:41:08,724 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:41:08,725 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:41:08,730 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 15:41:08,731 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 15:41:08,735 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:d778e2f3-10a8-4ad5-9c12-44f99104579e
Error Number:2714,State:6,Class:16
2018-03-27 15:41:08,737 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 15:41:08,738 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:41:08,739 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 15:41:08,741 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 15:41:08,742 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 15:41:08,743 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 15:41:08,745 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 15:41:08,746 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 15:41:08,748 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:41:08,749 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:41:08,751 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 15:41:08,753 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 15:41:08,754 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 15:41:08,755 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 15:41:08,756 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:41:08,758 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 15:41:08,759 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 15:41:08,761 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 15:41:08,763 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 15:41:08,765 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 15:41:08,766 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 15:41:08,768 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 15:41:08,769 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 15:41:08,770 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 15:41:08,772 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 15:41:08,773 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:41:08,774 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 15:41:08,775 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 15:41:08,776 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 15:41:08,778 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 15:41:08,779 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 15:41:08,780 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 15:41:08,781 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 15:41:08,782 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 15:41:08,783 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 15:41:08,784 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 15:41:08,785 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 15:41:08,786 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:41:08,809 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:41:08,810 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:41:08,811 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 15:41:08,812 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 15:41:08,814 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 15:41:08,815 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 15:41:08,816 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 15:41:08,817 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 15:41:08,818 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 15:41:08,819 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 15:41:08,820 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 15:41:08,821 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 15:41:08,822 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 15:41:08,823 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:41:08,824 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:41:08,825 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:41:08,826 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:41:08,828 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 15:41:08,829 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 15:41:08,830 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:41:08,831 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 15:41:08,832 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 15:41:08,833 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 15:41:08,834 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 15:41:08,835 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 15:41:08,836 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 15:41:08,837 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 15:41:08,838 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 15:41:08,839 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:41:08,840 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:41:08,841 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:41:08,842 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 15:41:08,843 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 15:41:08,844 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:41:08,845 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 15:41:08,847 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 0cd510cf069445aca9a01738245c2a29(unnamed)
2018-03-27 15:41:08,848 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 15:41:08,849 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 15:41:08,850 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 15:41:08,851 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 15:41:08,852 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 15:41:08,853 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=fd525de4-cb79-4405-8435-74c94ce76996] opened session at timestamp: 636577620688, for session factory: [/0cd510cf069445aca9a01738245c2a29]
2018-03-27 15:41:08,854 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = cokceken alias=this0_
2018-03-27 15:41:08,856 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = cokceken
2018-03-27 15:41:08,857 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 15:41:08,858 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 15:41:08,859 [5] DEBUG NHibernate.Type.StringType - binding 'cokceken' to parameter: 0
2018-03-27 15:41:08,860 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'cokceken' [Type: String (4000:0:0)]
2018-03-27 15:41:08,861 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 15:41:08,864 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 1 ms
2018-03-27 15:41:08,866 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 15:41:08,867 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 15:41:08,868 [5] DEBUG NHibernate.Loader.Loader - result set row: 0
2018-03-27 15:41:08,868 [5] DEBUG NHibernate.Type.Int32Type - returning '1' as column: id1_1_0_
2018-03-27 15:41:08,869 [5] DEBUG NHibernate.Loader.Loader - result row: EntityKey[Password.Domain.Model.User#1]
2018-03-27 15:41:08,871 [5] DEBUG NHibernate.Loader.Loader - Initializing object from DataReader: [Password.Domain.Model.User#1]
2018-03-27 15:41:08,871 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Hydrating entity: [Password.Domain.Model.User#1]
2018-03-27 15:41:08,872 [5] DEBUG NHibernate.Type.StringType - returning 'email' as column: email2_1_0_
2018-03-27 15:41:08,874 [5] DEBUG NHibernate.Type.StringType - returning '8214822332f34da7c595f73512b5a5e24ddf8a0d5cc1bc12a860f7bb076dde1b' as column: password3_1_0_
2018-03-27 15:41:08,875 [5] DEBUG NHibernate.Type.StringType - returning 'cokceken' as column: username4_1_0_
2018-03-27 15:41:08,876 [5] DEBUG NHibernate.Type.StringType - returning 'salt' as column: passwordsalt5_1_0_
2018-03-27 15:41:08,876 [5] DEBUG NHibernate.Loader.Loader - done processing result set (1 rows)
2018-03-27 15:41:08,878 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 15:41:08,879 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 16 ms
2018-03-27 15:41:08,880 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 15:41:08,881 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 15:41:08,882 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 15:41:08,883 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 1
2018-03-27 15:41:08,884 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - resolving associations for [Password.Domain.Model.User#1]
2018-03-27 15:41:08,885 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - done materializing entity [Password.Domain.Model.User#1]
2018-03-27 15:41:08,886 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 15:41:08,887 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 15:41:08,888 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 15:41:08,889 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=fd525de4-cb79-4405-8435-74c94ce76996] running ISession.Dispose()
2018-03-27 15:41:08,890 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=fd525de4-cb79-4405-8435-74c94ce76996] executing real Dispose(True)
2018-03-27 15:41:08,891 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 15:41:08,892 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-28 10:56:52,953 [5] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-28 10:56:52,967 [5] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-28 10:56:52,970 [5] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-28 10:56:52,973 [5] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-28 10:56:53,074 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-28 10:56:53,480 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:56:53,509 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-28 10:56:53,527 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-28 10:56:53,537 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-28 10:56:53,538 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-28 10:56:53,544 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-28 10:56:53,550 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-28 10:56:53,551 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:56:53,553 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-28 10:56:53,554 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-28 10:56:53,556 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-28 10:56:53,557 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-28 10:56:53,558 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-28 10:56:53,560 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-28 10:56:53,562 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:56:53,565 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-28 10:56:53,567 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-28 10:56:53,569 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-28 10:56:53,570 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-28 10:56:53,573 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:56:53,575 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 10:56:53,634 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-28 10:56:53,639 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-28 10:56:53,641 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-28 10:56:53,642 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-28 10:56:53,643 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-28 10:56:53,646 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-28 10:56:53,649 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-28 10:56:53,811 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-28 10:56:53,813 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-28 10:56:53,814 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-28 10:56:53,815 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-28 10:56:53,833 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-28 10:56:53,839 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:56:53,841 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:56:53,843 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:56:53,844 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:56:53,845 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:56:53,847 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:56:53,853 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-28 10:56:53,861 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-28 10:56:53,867 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:0106d3c5-96ca-4656-a3dc-ef36954f94a0
Error Number:2714,State:6,Class:16
2018-03-28 10:56:53,872 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-28 10:56:53,874 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 10:56:53,876 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-28 10:56:53,877 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-28 10:56:53,878 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-28 10:56:53,879 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-28 10:56:53,881 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-28 10:56:53,882 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-28 10:56:53,892 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:56:53,897 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:56:53,942 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-28 10:56:53,944 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-28 10:56:53,945 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-28 10:56:53,947 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-28 10:56:53,948 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:56:53,950 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-28 10:56:53,951 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-28 10:56:53,953 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-28 10:56:53,954 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-28 10:56:53,955 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-28 10:56:53,957 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-28 10:56:53,958 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-28 10:56:53,960 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-28 10:56:53,962 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-28 10:56:53,964 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-28 10:56:53,966 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-28 10:56:53,968 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-28 10:56:53,969 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-28 10:56:53,970 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-28 10:56:53,971 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-28 10:56:53,973 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-28 10:56:53,975 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-28 10:56:53,977 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-28 10:56:53,979 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-28 10:56:53,988 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-28 10:56:53,990 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-28 10:56:53,991 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-28 10:56:53,993 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 10:56:54,028 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 10:56:54,032 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:56:54,062 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-28 10:56:54,073 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-28 10:56:54,089 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:56:54,092 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-28 10:56:54,093 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-28 10:56:54,120 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-28 10:56:54,122 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-28 10:56:54,123 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-28 10:56:54,124 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-28 10:56:54,126 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-28 10:56:54,127 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-28 10:56:54,128 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-28 10:56:54,152 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 10:56:54,153 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 10:56:54,155 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-28 10:56:54,156 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-28 10:56:54,157 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-28 10:56:54,160 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 10:56:54,162 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 10:56:54,163 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-28 10:56:54,165 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-28 10:56:54,166 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-28 10:56:54,167 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-28 10:56:54,168 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-28 10:56:54,170 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-28 10:56:54,171 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-28 10:56:54,172 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 10:56:54,173 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 10:56:54,175 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-28 10:56:54,176 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-28 10:56:54,177 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-28 10:56:54,178 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 10:56:54,180 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 10:56:54,181 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-28 10:56:54,183 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 8f9c23af0fab40b1aafe320141e728a9(unnamed)
2018-03-28 10:56:54,184 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-28 10:56:54,185 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-28 10:56:54,188 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-28 10:56:54,190 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-28 10:58:28,623 [5] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-28 10:58:28,637 [5] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-28 10:58:28,639 [5] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-28 10:58:28,641 [5] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-28 10:58:28,740 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-28 10:58:29,109 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:58:29,138 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-28 10:58:29,156 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-28 10:58:29,166 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-28 10:58:29,169 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-28 10:58:29,174 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-28 10:58:29,180 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-28 10:58:29,182 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:58:29,183 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-28 10:58:29,185 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-28 10:58:29,186 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-28 10:58:29,188 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-28 10:58:29,189 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-28 10:58:29,191 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-28 10:58:29,193 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:58:29,196 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-28 10:58:29,198 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-28 10:58:29,200 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-28 10:58:29,201 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-28 10:58:29,203 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:58:29,205 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 10:58:29,249 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-28 10:58:29,254 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-28 10:58:29,256 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-28 10:58:29,258 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-28 10:58:29,260 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-28 10:58:29,263 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-28 10:58:29,267 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-28 10:58:29,395 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-28 10:58:29,397 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-28 10:58:29,399 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-28 10:58:29,400 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-28 10:58:29,414 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-28 10:58:29,419 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:58:29,422 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:58:29,423 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:58:29,426 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:58:29,428 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:58:29,429 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:58:29,436 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-28 10:58:29,443 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-28 10:58:29,449 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:09825efe-cf3e-4af8-86e2-bc197dc00a77
Error Number:2714,State:6,Class:16
2018-03-28 10:58:29,455 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-28 10:58:29,458 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 10:58:29,460 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-28 10:58:29,462 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-28 10:58:29,464 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-28 10:58:29,466 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-28 10:58:29,468 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-28 10:58:29,470 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-28 10:58:29,481 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:58:29,485 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:58:29,529 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-28 10:58:29,531 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-28 10:58:29,532 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-28 10:58:29,533 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-28 10:58:29,535 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:58:29,537 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-28 10:58:29,538 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-28 10:58:29,540 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-28 10:58:29,541 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-28 10:58:29,542 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-28 10:58:29,543 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-28 10:58:29,544 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-28 10:58:29,546 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-28 10:58:29,548 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-28 10:58:29,550 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-28 10:58:29,552 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-28 10:58:29,554 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-28 10:58:29,555 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-28 10:58:29,556 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-28 10:58:29,558 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-28 10:58:29,559 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-28 10:58:29,561 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-28 10:58:29,562 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-28 10:58:29,564 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-28 10:58:29,573 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-28 10:58:29,575 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-28 10:58:29,577 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-28 10:58:29,579 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 10:58:29,612 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 10:58:29,615 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:58:29,643 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-28 10:58:29,656 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-28 10:58:29,673 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 10:58:29,676 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-28 10:58:29,678 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-28 10:58:29,709 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-28 10:58:29,711 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-28 10:58:29,712 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-28 10:58:29,714 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-28 10:58:29,715 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-28 10:58:29,717 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-28 10:58:29,718 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-28 10:58:29,740 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 10:58:29,742 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 10:58:29,743 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-28 10:58:29,745 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-28 10:58:29,746 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-28 10:58:29,749 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 10:58:29,750 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 10:58:29,752 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-28 10:58:29,753 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-28 10:58:29,754 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-28 10:58:29,756 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-28 10:58:29,757 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-28 10:58:29,758 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-28 10:58:29,759 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-28 10:58:29,761 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 10:58:29,762 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 10:58:29,764 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-28 10:58:29,765 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-28 10:58:29,766 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-28 10:58:29,768 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 10:58:29,769 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 10:58:29,772 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-28 10:58:29,774 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 23c07c6ef5b94490b108364acab61421(unnamed)
2018-03-28 10:58:29,775 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-28 10:58:29,776 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-28 10:58:29,779 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-28 10:58:29,780 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-28 10:58:32,034 [5] INFO  NHibernate.Impl.SessionFactoryImpl - Closing
2018-03-28 10:58:32,036 [5] DEBUG NHibernate.Connection.ConnectionProvider - Disposing of ConnectionProvider.
2018-03-28 10:59:12,835 [9] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:cokceken, password:password
2018-03-28 11:00:15,234 [5] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-28 11:00:15,246 [5] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-28 11:00:15,249 [5] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-28 11:00:15,251 [5] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-28 11:00:15,344 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-28 11:00:15,753 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:00:15,783 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-28 11:00:15,801 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-28 11:00:15,813 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-28 11:00:15,815 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-28 11:00:15,821 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-28 11:00:15,826 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-28 11:00:15,828 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:00:15,829 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-28 11:00:15,830 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-28 11:00:15,832 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-28 11:00:15,833 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-28 11:00:15,835 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-28 11:00:15,836 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-28 11:00:15,838 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:00:15,841 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-28 11:00:15,843 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-28 11:00:15,845 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-28 11:00:15,846 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-28 11:00:15,849 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:00:15,850 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 11:00:15,893 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-28 11:00:15,898 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-28 11:00:15,899 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-28 11:00:15,901 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-28 11:00:15,902 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-28 11:00:15,904 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-28 11:00:15,907 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-28 11:00:16,031 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-28 11:00:16,033 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-28 11:00:16,034 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-28 11:00:16,036 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-28 11:00:16,049 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-28 11:00:16,056 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:00:16,058 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:00:16,059 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:00:16,060 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:00:16,061 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:00:16,063 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:00:16,069 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-28 11:00:16,078 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-28 11:00:16,083 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:40833877-c69a-4c7b-85a5-33a563301488
Error Number:2714,State:6,Class:16
2018-03-28 11:00:16,088 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-28 11:00:16,090 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 11:00:16,091 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-28 11:00:16,093 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-28 11:00:16,094 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-28 11:00:16,095 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-28 11:00:16,096 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-28 11:00:16,098 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-28 11:00:16,108 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:00:16,112 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:00:16,159 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-28 11:00:16,161 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-28 11:00:16,162 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-28 11:00:16,163 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-28 11:00:16,165 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:00:16,166 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-28 11:00:16,168 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-28 11:00:16,169 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-28 11:00:16,171 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-28 11:00:16,172 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-28 11:00:16,173 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-28 11:00:16,174 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-28 11:00:16,176 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-28 11:00:16,178 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-28 11:00:16,180 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-28 11:00:16,182 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-28 11:00:16,183 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-28 11:00:16,185 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-28 11:00:16,186 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-28 11:00:16,187 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-28 11:00:16,188 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-28 11:00:16,190 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-28 11:00:16,191 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-28 11:00:16,193 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-28 11:00:16,201 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-28 11:00:16,202 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-28 11:00:16,204 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-28 11:00:16,205 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 11:00:16,243 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 11:00:16,246 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:00:16,275 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-28 11:00:16,286 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-28 11:00:16,301 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:00:16,304 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-28 11:00:16,306 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-28 11:00:16,333 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-28 11:00:16,335 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-28 11:00:16,336 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-28 11:00:16,337 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-28 11:00:16,339 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-28 11:00:16,340 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-28 11:00:16,341 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-28 11:00:16,363 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:00:16,365 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:00:16,367 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-28 11:00:16,368 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-28 11:00:16,370 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-28 11:00:16,372 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:00:16,373 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:00:16,375 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-28 11:00:16,376 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-28 11:00:16,378 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-28 11:00:16,379 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-28 11:00:16,381 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-28 11:00:16,382 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-28 11:00:16,384 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-28 11:00:16,385 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:00:16,386 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:00:16,388 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-28 11:00:16,389 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-28 11:00:16,390 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-28 11:00:16,391 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:00:16,393 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:00:16,394 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-28 11:00:16,396 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 21cd5fe5f06a4f2fb566b069539b7987(unnamed)
2018-03-28 11:00:16,398 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-28 11:00:16,399 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-28 11:00:16,402 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-28 11:00:16,404 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-28 11:00:17,994 [5] INFO  NHibernate.Impl.SessionFactoryImpl - Closing
2018-03-28 11:00:17,996 [5] DEBUG NHibernate.Connection.ConnectionProvider - Disposing of ConnectionProvider.
2018-03-28 11:01:03,857 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:cokceken, password:asd
2018-03-28 11:01:08,178 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-28 11:01:08,195 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=2ebf9448-d38e-4a19-8c77-93f1303e908b] opened session at timestamp: 636578316681, for session factory: [/21cd5fe5f06a4f2fb566b069539b7987]
2018-03-28 11:01:09,194 [5] DEBUG NHibernate.Transaction.AdoTransaction - Begin (ReadCommitted)
2018-03-28 11:01:09,196 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 11:12:14,433 [5] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-28 11:12:14,444 [5] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-28 11:12:14,447 [5] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-28 11:12:14,449 [5] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-28 11:12:14,543 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-28 11:12:14,918 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:12:14,947 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-28 11:12:14,965 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-28 11:12:14,975 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-28 11:12:14,977 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-28 11:12:14,983 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-28 11:12:14,988 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-28 11:12:14,989 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:12:14,991 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-28 11:12:14,993 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-28 11:12:14,994 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-28 11:12:14,996 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-28 11:12:14,997 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-28 11:12:14,999 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-28 11:12:15,001 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:12:15,003 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-28 11:12:15,005 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-28 11:12:15,007 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-28 11:12:15,009 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-28 11:12:15,011 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:12:15,012 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 11:12:15,058 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-28 11:12:15,064 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-28 11:12:15,066 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-28 11:12:15,068 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-28 11:12:15,070 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-28 11:12:15,073 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-28 11:12:15,075 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-28 11:12:15,194 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-28 11:12:15,196 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-28 11:12:15,198 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-28 11:12:15,199 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-28 11:12:15,213 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-28 11:12:15,218 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:12:15,220 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:12:15,221 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:12:15,223 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:12:15,224 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:12:15,226 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:12:15,231 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-28 11:12:15,239 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-28 11:12:15,244 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:68acb32b-f031-4514-8ca8-559b8a6867f0
Error Number:2714,State:6,Class:16
2018-03-28 11:12:15,249 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-28 11:12:15,251 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 11:12:15,253 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-28 11:12:15,255 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-28 11:12:15,257 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-28 11:12:15,258 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-28 11:12:15,259 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-28 11:12:15,260 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-28 11:12:15,273 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:12:15,277 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:12:15,322 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-28 11:12:15,324 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-28 11:12:15,325 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-28 11:12:15,326 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-28 11:12:15,328 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:12:15,329 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-28 11:12:15,331 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-28 11:12:15,332 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-28 11:12:15,334 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-28 11:12:15,335 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-28 11:12:15,336 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-28 11:12:15,337 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-28 11:12:15,339 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-28 11:12:15,341 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-28 11:12:15,343 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-28 11:12:15,345 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-28 11:12:15,346 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-28 11:12:15,347 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-28 11:12:15,349 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-28 11:12:15,350 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-28 11:12:15,352 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-28 11:12:15,353 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-28 11:12:15,354 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-28 11:12:15,356 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-28 11:12:15,364 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-28 11:12:15,366 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-28 11:12:15,369 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-28 11:12:15,372 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 11:12:15,400 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 11:12:15,403 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:12:15,434 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-28 11:12:15,444 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-28 11:12:15,459 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:12:15,462 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-28 11:12:15,463 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-28 11:12:15,497 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-28 11:12:15,499 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-28 11:12:15,500 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-28 11:12:15,502 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-28 11:12:15,503 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-28 11:12:15,505 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-28 11:12:15,506 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-28 11:12:15,529 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:12:15,531 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:12:15,533 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-28 11:12:15,534 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-28 11:12:15,536 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-28 11:12:15,538 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:12:15,540 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:12:15,542 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-28 11:12:15,543 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-28 11:12:15,544 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-28 11:12:15,545 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-28 11:12:15,547 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-28 11:12:15,548 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-28 11:12:15,549 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-28 11:12:15,550 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:12:15,552 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:12:15,553 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-28 11:12:15,554 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-28 11:12:15,556 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-28 11:12:15,557 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:12:15,559 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:12:15,561 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-28 11:12:15,563 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: f262b76c22364bf68ed41f24fc4fddc0(unnamed)
2018-03-28 11:12:15,565 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-28 11:12:15,566 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-28 11:12:15,570 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-28 11:12:15,571 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-28 11:14:13,476 [5] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-28 11:14:13,490 [5] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-28 11:14:13,493 [5] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-28 11:14:13,494 [5] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-28 11:14:13,595 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-28 11:14:13,991 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:14:14,023 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-28 11:14:14,043 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-28 11:14:14,055 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-28 11:14:14,057 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-28 11:14:14,064 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-28 11:14:14,071 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-28 11:14:14,072 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:14:14,074 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-28 11:14:14,076 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-28 11:14:14,078 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-28 11:14:14,080 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-28 11:14:14,081 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-28 11:14:14,083 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-28 11:14:14,085 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:14:14,088 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-28 11:14:14,090 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-28 11:14:14,092 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-28 11:14:14,093 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-28 11:14:14,096 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:14:14,098 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 11:14:14,142 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-28 11:14:14,146 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-28 11:14:14,148 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-28 11:14:14,149 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-28 11:14:14,151 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-28 11:14:14,153 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-28 11:14:14,156 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-28 11:14:14,298 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-28 11:14:14,300 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-28 11:14:14,301 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-28 11:14:14,303 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-28 11:14:14,319 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-28 11:14:14,326 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:14:14,329 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:14:14,331 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:14:14,333 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:14:14,334 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:14:14,336 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:14:14,341 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-28 11:14:14,350 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-28 11:14:14,355 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:2d403104-0c00-4463-a51e-1954b043570e
Error Number:2714,State:6,Class:16
2018-03-28 11:14:14,360 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-28 11:14:14,362 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 11:14:14,363 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-28 11:14:14,365 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-28 11:14:14,366 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-28 11:14:14,368 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-28 11:14:14,370 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-28 11:14:14,371 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-28 11:14:14,382 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:14:14,387 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:14:14,434 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-28 11:14:14,436 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-28 11:14:14,437 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-28 11:14:14,438 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-28 11:14:14,439 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:14:14,441 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-28 11:14:14,443 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-28 11:14:14,445 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-28 11:14:14,446 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-28 11:14:14,447 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-28 11:14:14,449 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-28 11:14:14,450 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-28 11:14:14,452 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-28 11:14:14,454 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-28 11:14:14,456 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-28 11:14:14,458 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-28 11:14:14,459 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-28 11:14:14,460 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-28 11:14:14,462 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-28 11:14:14,463 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-28 11:14:14,465 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-28 11:14:14,467 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-28 11:14:14,468 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-28 11:14:14,470 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-28 11:14:14,478 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-28 11:14:14,480 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-28 11:14:14,482 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-28 11:14:14,484 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 11:14:14,514 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 11:14:14,517 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:14:14,545 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-28 11:14:14,556 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-28 11:14:14,574 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:14:14,577 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-28 11:14:14,579 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-28 11:14:14,607 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-28 11:14:14,610 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-28 11:14:14,611 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-28 11:14:14,612 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-28 11:14:14,614 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-28 11:14:14,615 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-28 11:14:14,617 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-28 11:14:14,638 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:14:14,641 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:14:14,642 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-28 11:14:14,644 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-28 11:14:14,645 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-28 11:14:14,648 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:14:14,649 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:14:14,651 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-28 11:14:14,652 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-28 11:14:14,653 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-28 11:14:14,654 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-28 11:14:14,656 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-28 11:14:14,657 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-28 11:14:14,658 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-28 11:14:14,659 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:14:14,660 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:14:14,662 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-28 11:14:14,663 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-28 11:14:14,664 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-28 11:14:14,665 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:14:14,667 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:14:14,669 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-28 11:14:14,671 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 22ef12523b94488fa395b2001341de68(unnamed)
2018-03-28 11:14:14,672 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-28 11:14:14,674 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-28 11:14:14,677 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-28 11:14:14,678 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-28 11:14:16,313 [5] INFO  NHibernate.Impl.SessionFactoryImpl - Closing
2018-03-28 11:14:16,315 [5] DEBUG NHibernate.Connection.ConnectionProvider - Disposing of ConnectionProvider.
2018-03-28 11:14:31,460 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:cokceken, password:nasd
2018-03-28 11:14:37,549 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-28 11:14:37,562 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=9c059fe3-8f6c-4887-8555-9a943cd99285] opened session at timestamp: 636578324775, for session factory: [/22ef12523b94488fa395b2001341de68]
2018-03-28 11:14:44,732 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 11:15:07,555 [5] DEBUG NHibernate.Transaction.AdoTransaction - Begin (ReadCommitted)
2018-03-28 11:52:15,875 [8] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-28 11:52:15,888 [8] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-28 11:52:15,891 [8] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-28 11:52:15,893 [8] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-28 11:52:15,993 [8] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-28 11:52:16,391 [8] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:52:16,429 [8] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-28 11:52:16,456 [8] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-28 11:52:16,470 [8] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-28 11:52:16,472 [8] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-28 11:52:16,479 [8] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-28 11:52:16,486 [8] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-28 11:52:16,489 [8] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:52:16,491 [8] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-28 11:52:16,492 [8] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-28 11:52:16,495 [8] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-28 11:52:16,496 [8] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-28 11:52:16,497 [8] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-28 11:52:16,499 [8] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-28 11:52:16,501 [8] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:52:16,505 [8] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-28 11:52:16,507 [8] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-28 11:52:16,510 [8] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-28 11:52:16,511 [8] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-28 11:52:16,515 [8] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:52:16,517 [8] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 11:52:16,568 [8] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-28 11:52:16,573 [8] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-28 11:52:16,575 [8] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-28 11:52:16,576 [8] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-28 11:52:16,577 [8] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-28 11:52:16,580 [8] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-28 11:52:16,583 [8] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-28 11:52:16,701 [8] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-28 11:52:16,703 [8] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-28 11:52:16,705 [8] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-28 11:52:16,706 [8] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-28 11:52:16,722 [8] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-28 11:52:16,727 [8] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:52:16,729 [8] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:52:16,731 [8] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:52:16,732 [8] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:52:16,734 [8] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:52:16,735 [8] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:52:16,741 [8] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-28 11:52:16,749 [8] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-28 11:52:16,755 [8] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:ea99ed0e-db94-433f-8a2f-103a27920a6d
Error Number:2714,State:6,Class:16
2018-03-28 11:52:16,761 [8] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-28 11:52:16,763 [8] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 11:52:16,765 [8] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-28 11:52:16,767 [8] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-28 11:52:16,768 [8] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-28 11:52:16,770 [8] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-28 11:52:16,771 [8] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-28 11:52:16,773 [8] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-28 11:52:16,783 [8] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:52:16,788 [8] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:52:16,832 [8] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-28 11:52:16,834 [8] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-28 11:52:16,836 [8] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-28 11:52:16,837 [8] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-28 11:52:16,839 [8] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:52:16,841 [8] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-28 11:52:16,843 [8] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-28 11:52:16,845 [8] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-28 11:52:16,846 [8] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-28 11:52:16,847 [8] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-28 11:52:16,848 [8] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-28 11:52:16,850 [8] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-28 11:52:16,851 [8] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-28 11:52:16,853 [8] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-28 11:52:16,856 [8] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-28 11:52:16,858 [8] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-28 11:52:16,859 [8] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-28 11:52:16,861 [8] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-28 11:52:16,862 [8] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-28 11:52:16,863 [8] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-28 11:52:16,865 [8] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-28 11:52:16,866 [8] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-28 11:52:16,868 [8] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-28 11:52:16,870 [8] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-28 11:52:16,878 [8] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-28 11:52:16,880 [8] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-28 11:52:16,881 [8] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-28 11:52:16,883 [8] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 11:52:16,913 [8] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 11:52:16,916 [8] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:52:16,944 [8] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-28 11:52:16,955 [8] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-28 11:52:16,974 [8] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:52:16,976 [8] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-28 11:52:16,977 [8] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-28 11:52:17,009 [8] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-28 11:52:17,010 [8] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-28 11:52:17,012 [8] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-28 11:52:17,013 [8] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-28 11:52:17,015 [8] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-28 11:52:17,016 [8] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-28 11:52:17,018 [8] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-28 11:52:17,039 [8] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:52:17,042 [8] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:52:17,044 [8] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-28 11:52:17,045 [8] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-28 11:52:17,047 [8] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-28 11:52:17,049 [8] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:52:17,051 [8] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:52:17,052 [8] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-28 11:52:17,053 [8] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-28 11:52:17,055 [8] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-28 11:52:17,056 [8] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-28 11:52:17,057 [8] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-28 11:52:17,058 [8] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-28 11:52:17,059 [8] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-28 11:52:17,061 [8] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:52:17,062 [8] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:52:17,063 [8] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-28 11:52:17,064 [8] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-28 11:52:17,066 [8] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-28 11:52:17,067 [8] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:52:17,068 [8] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:52:17,070 [8] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-28 11:52:17,072 [8] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 75703f635c2442a0830c02ff2eb1f3cc(unnamed)
2018-03-28 11:52:17,073 [8] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-28 11:52:17,074 [8] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-28 11:52:17,078 [8] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-28 11:52:17,079 [8] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-28 11:52:19,389 [8] INFO  NHibernate.Impl.SessionFactoryImpl - Closing
2018-03-28 11:52:19,391 [8] DEBUG NHibernate.Connection.ConnectionProvider - Disposing of ConnectionProvider.
2018-03-28 11:52:30,008 [8] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:cokceken, password:password
2018-03-28 11:52:30,012 [8] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-28 11:52:30,025 [8] DEBUG NHibernate.Impl.SessionImpl - [session-id=1a343564-af6b-4b06-8c7d-c8c070096dfd] opened session at timestamp: 636578347500, for session factory: [/75703f635c2442a0830c02ff2eb1f3cc]
2018-03-28 11:52:30,052 [8] ERROR Password.Infrastructure.Services.Log4Net - No current session context configured.
NHibernate.HibernateException: No current session context configured.
   at NHibernate.Context.CurrentSessionContext.GetCurrentSessionContext(ISessionFactory factory)
   at NHibernate.Context.CurrentSessionContext.Bind(ISession session)
   at Password.Repository.UnitOfWork.UnitOfWork.Start() in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Repository\UnitOfWork\UnitOfWork.cs:line 25
   at Password.UI.Interceptor.UnitOfWorkInterceptor.Intercept(IInvocation invocation) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Password.UI\Interceptor\UnitOfWorkInterceptor.cs:line 24
2018-03-28 11:53:11,599 [10] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-28 11:53:11,611 [10] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-28 11:53:11,614 [10] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-28 11:53:11,616 [10] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-28 11:53:11,710 [10] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-28 11:53:12,102 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:53:12,130 [10] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-28 11:53:12,149 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-28 11:53:12,160 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-28 11:53:12,161 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-28 11:53:12,167 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-28 11:53:12,174 [10] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-28 11:53:12,176 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:53:12,177 [10] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-28 11:53:12,179 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-28 11:53:12,180 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-28 11:53:12,182 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-28 11:53:12,183 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-28 11:53:12,185 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-28 11:53:12,188 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:53:12,191 [10] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-28 11:53:12,193 [10] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-28 11:53:12,195 [10] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-28 11:53:12,197 [10] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-28 11:53:12,199 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:53:12,201 [10] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 11:53:12,244 [10] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-28 11:53:12,249 [10] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-28 11:53:12,251 [10] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-28 11:53:12,252 [10] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-28 11:53:12,253 [10] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-28 11:53:12,256 [10] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-28 11:53:12,259 [10] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-28 11:53:12,385 [10] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-28 11:53:12,388 [10] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-28 11:53:12,389 [10] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-28 11:53:12,390 [10] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-28 11:53:12,407 [10] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-28 11:53:12,414 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:53:12,416 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:53:12,418 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:53:12,419 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:53:12,421 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:53:12,422 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:53:12,428 [10] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-28 11:53:12,438 [10] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-28 11:53:12,442 [10] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:546874bb-62e8-4d9d-af7b-7bd93d192c5f
Error Number:2714,State:6,Class:16
2018-03-28 11:53:12,447 [10] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-28 11:53:12,450 [10] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 11:53:12,451 [10] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-28 11:53:12,453 [10] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-28 11:53:12,454 [10] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-28 11:53:12,455 [10] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-28 11:53:12,456 [10] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-28 11:53:12,458 [10] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-28 11:53:12,468 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:53:12,473 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:53:12,518 [10] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-28 11:53:12,519 [10] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-28 11:53:12,521 [10] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-28 11:53:12,522 [10] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-28 11:53:12,523 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:53:12,526 [10] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-28 11:53:12,528 [10] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-28 11:53:12,529 [10] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-28 11:53:12,531 [10] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-28 11:53:12,532 [10] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-28 11:53:12,533 [10] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-28 11:53:12,534 [10] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-28 11:53:12,536 [10] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-28 11:53:12,538 [10] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-28 11:53:12,539 [10] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-28 11:53:12,541 [10] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-28 11:53:12,543 [10] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-28 11:53:12,544 [10] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-28 11:53:12,546 [10] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-28 11:53:12,547 [10] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-28 11:53:12,549 [10] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-28 11:53:12,550 [10] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-28 11:53:12,551 [10] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-28 11:53:12,553 [10] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-28 11:53:12,562 [10] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-28 11:53:12,564 [10] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-28 11:53:12,565 [10] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-28 11:53:12,567 [10] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 11:53:12,599 [10] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 11:53:12,602 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:53:12,635 [10] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-28 11:53:12,648 [10] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-28 11:53:12,664 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 11:53:12,666 [10] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-28 11:53:12,668 [10] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-28 11:53:12,694 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-28 11:53:12,696 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-28 11:53:12,697 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-28 11:53:12,698 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-28 11:53:12,700 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-28 11:53:12,701 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-28 11:53:12,702 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-28 11:53:12,725 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:53:12,727 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:53:12,728 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-28 11:53:12,729 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-28 11:53:12,731 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-28 11:53:12,733 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:53:12,735 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 11:53:12,737 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-28 11:53:12,738 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-28 11:53:12,739 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-28 11:53:12,740 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-28 11:53:12,742 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-28 11:53:12,743 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-28 11:53:12,744 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-28 11:53:12,745 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:53:12,747 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:53:12,748 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-28 11:53:12,749 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-28 11:53:12,750 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-28 11:53:12,751 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:53:12,753 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 11:53:12,755 [10] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-28 11:53:12,757 [10] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: e0ba45dc233a45939253b752bc2bfd23(unnamed)
2018-03-28 11:53:12,758 [10] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-28 11:53:12,759 [10] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-28 11:53:12,763 [10] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-28 11:53:12,764 [10] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-28 11:53:14,348 [10] INFO  NHibernate.Impl.SessionFactoryImpl - Closing
2018-03-28 11:53:14,350 [10] DEBUG NHibernate.Connection.ConnectionProvider - Disposing of ConnectionProvider.
2018-03-28 11:53:21,591 [14] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:cokceken, password:password
2018-03-28 11:53:26,267 [14] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-28 11:53:26,280 [14] DEBUG NHibernate.Impl.SessionImpl - [session-id=76f263e1-3fa6-4e2d-a007-561704d7eaa1] opened session at timestamp: 636578348062, for session factory: [/e0ba45dc233a45939253b752bc2bfd23]
2018-03-28 15:08:18,073 [5] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-28 15:08:18,087 [5] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-28 15:08:18,091 [5] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-28 15:08:18,092 [5] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-28 15:08:18,226 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-28 15:08:18,652 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 15:08:18,689 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-28 15:08:18,717 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-28 15:08:18,730 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-28 15:08:18,732 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-28 15:08:18,740 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-28 15:08:18,748 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-28 15:08:18,750 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 15:08:18,752 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-28 15:08:18,754 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-28 15:08:18,756 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-28 15:08:18,757 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-28 15:08:18,759 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-28 15:08:18,761 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-28 15:08:18,763 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 15:08:18,777 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-28 15:08:18,780 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-28 15:08:18,783 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-28 15:08:18,785 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-28 15:08:18,788 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 15:08:18,790 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 15:08:18,857 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-28 15:08:18,861 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-28 15:08:18,863 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-28 15:08:18,864 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-28 15:08:18,866 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-28 15:08:18,869 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-28 15:08:18,872 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-28 15:08:19,015 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-28 15:08:19,017 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-28 15:08:19,019 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-28 15:08:19,020 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-28 15:08:19,033 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-28 15:08:19,038 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 15:08:19,040 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 15:08:19,042 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 15:08:19,043 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 15:08:19,045 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 15:08:19,046 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 15:08:19,052 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-28 15:08:19,060 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-28 15:08:19,065 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:986d57ee-f29e-403e-ba7e-e9a2653c22bd
Error Number:2714,State:6,Class:16
2018-03-28 15:08:19,070 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-28 15:08:19,072 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 15:08:19,074 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-28 15:08:19,075 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-28 15:08:19,077 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-28 15:08:19,078 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-28 15:08:19,079 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-28 15:08:19,081 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-28 15:08:19,090 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 15:08:19,096 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 15:08:19,144 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-28 15:08:19,145 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-28 15:08:19,147 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-28 15:08:19,148 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-28 15:08:19,149 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 15:08:19,151 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-28 15:08:19,153 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-28 15:08:19,155 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-28 15:08:19,156 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-28 15:08:19,157 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-28 15:08:19,158 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-28 15:08:19,159 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-28 15:08:19,161 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-28 15:08:19,162 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-28 15:08:19,164 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-28 15:08:19,166 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-28 15:08:19,168 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-28 15:08:19,169 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-28 15:08:19,171 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-28 15:08:19,172 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-28 15:08:19,174 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-28 15:08:19,175 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-28 15:08:19,178 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-28 15:08:19,180 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-28 15:08:19,189 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-28 15:08:19,190 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-28 15:08:19,192 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-28 15:08:19,193 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 15:08:19,224 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 15:08:19,227 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 15:08:19,258 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-28 15:08:19,269 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-28 15:08:19,286 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-28 15:08:19,289 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-28 15:08:19,290 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-28 15:08:19,321 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-28 15:08:19,322 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-28 15:08:19,324 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-28 15:08:19,325 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-28 15:08:19,327 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-28 15:08:19,329 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-28 15:08:19,330 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-28 15:08:19,355 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 15:08:19,357 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 15:08:19,359 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-28 15:08:19,360 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-28 15:08:19,361 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-28 15:08:19,364 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 15:08:19,365 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-28 15:08:19,366 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-28 15:08:19,368 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-28 15:08:19,369 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-28 15:08:19,371 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-28 15:08:19,372 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-28 15:08:19,373 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-28 15:08:19,374 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-28 15:08:19,375 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 15:08:19,376 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 15:08:19,378 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-28 15:08:19,380 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-28 15:08:19,381 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-28 15:08:19,382 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 15:08:19,384 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-28 15:08:19,386 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-28 15:08:19,388 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 462b4f93e55f44228f45dce097b92ab8(unnamed)
2018-03-28 15:08:19,389 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-28 15:08:19,390 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-28 15:08:19,393 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-28 15:08:19,394 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-28 15:08:52,660 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:cokceken, password:password
2018-03-28 15:08:52,666 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-28 15:08:52,680 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=f05d69a4-cdf4-4534-95cd-28d6c209772c] opened session at timestamp: 636578465326, for session factory: [/462b4f93e55f44228f45dce097b92ab8]
2018-03-28 15:08:52,685 [5] DEBUG NHibernate.Transaction.AdoTransaction - Begin (Unspecified)
2018-03-28 15:08:52,687 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 15:09:17,561 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = cokceken alias=this0_
2018-03-28 15:09:17,570 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = cokceken
2018-03-28 15:09:17,605 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-28 15:09:17,607 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-28 15:09:17,609 [5] DEBUG NHibernate.Type.StringType - binding 'cokceken' to parameter: 0
2018-03-28 15:09:17,617 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'cokceken' [Type: String (4000:0:0)]
2018-03-28 15:09:17,620 [5] DEBUG NHibernate.Transaction.AdoTransaction - Enlist Command
2018-03-28 15:09:17,624 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-28 15:09:17,626 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-28 15:09:17,629 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-28 15:09:17,630 [5] DEBUG NHibernate.Loader.Loader - result set row: 0
2018-03-28 15:09:17,634 [5] DEBUG NHibernate.Type.Int32Type - returning '1' as column: id1_1_0_
2018-03-28 15:09:17,637 [5] DEBUG NHibernate.Loader.Loader - result row: EntityKey[Password.Domain.Model.User#1]
2018-03-28 15:09:17,643 [5] DEBUG NHibernate.Loader.Loader - Initializing object from DataReader: [Password.Domain.Model.User#1]
2018-03-28 15:09:17,648 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Hydrating entity: [Password.Domain.Model.User#1]
2018-03-28 15:09:17,650 [5] DEBUG NHibernate.Type.StringType - returning 'email' as column: email2_1_0_
2018-03-28 15:09:17,651 [5] DEBUG NHibernate.Type.StringType - returning '8214822332f34da7c595f73512b5a5e24ddf8a0d5cc1bc12a860f7bb076dde1b' as column: password3_1_0_
2018-03-28 15:09:17,652 [5] DEBUG NHibernate.Type.StringType - returning 'cokceken' as column: username4_1_0_
2018-03-28 15:09:17,654 [5] DEBUG NHibernate.Type.StringType - returning 'salt' as column: passwordsalt5_1_0_
2018-03-28 15:09:17,657 [5] DEBUG NHibernate.Loader.Loader - done processing result set (1 rows)
2018-03-28 15:09:17,660 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-28 15:09:17,662 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 40 ms
2018-03-28 15:09:17,664 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-28 15:09:17,666 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 1
2018-03-28 15:09:17,670 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - resolving associations for [Password.Domain.Model.User#1]
2018-03-28 15:09:17,673 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - done materializing entity [Password.Domain.Model.User#1]
2018-03-28 15:09:17,676 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-28 15:09:34,899 [5] DEBUG NHibernate.Transaction.AdoTransaction - Start Commit
2018-03-28 15:09:34,923 [5] DEBUG NHibernate.Impl.SessionImpl - before transaction completion
2018-03-28 15:09:34,927 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - flushing session
2018-03-28 15:09:34,929 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - processing flush-time cascades
2018-03-28 15:09:34,932 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - dirty checking collections
2018-03-28 15:09:34,935 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Flushing entities and processing referenced collections
2018-03-28 15:09:34,943 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Processing unreferenced collections
2018-03-28 15:09:34,945 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Scheduling collection removes/(re)creates/updates
2018-03-28 15:09:34,946 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
2018-03-28 15:09:34,948 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2018-03-28 15:09:34,950 [5] DEBUG NHibernate.Impl.Printer - listing entities:
2018-03-28 15:09:34,952 [5] DEBUG NHibernate.Impl.Printer - Password.Domain.Model.User{'Id'='1', 'Email'='email', 'Password'='8214822332f34da7c595f73512b5a5e24ddf8a0d5cc1bc12a860f7bb076dde1b', 'Username'='cokceken', 'PasswordSalt'='salt'}
2018-03-28 15:09:34,954 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - executing flush
2018-03-28 15:09:34,956 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Registering flush begin
2018-03-28 15:09:34,958 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Registering flush end
2018-03-28 15:09:34,962 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - post flush
2018-03-28 15:09:34,965 [5] DEBUG NHibernate.Transaction.AdoTransaction - DbTransaction Committed
2018-03-28 15:09:34,967 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-28 15:09:34,969 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 15:09:34,970 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-28 15:09:34,973 [5] DEBUG NHibernate.Transaction.AdoTransaction - DbTransaction disposed.
2018-03-28 15:09:34,974 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-28 15:09:34,976 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-28 15:09:45,232 [5] INFO  Password.Infrastructure.Services.Log4Net - Wrong password
2018-03-28 15:09:51,678 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:cokceken, password:elma
2018-03-28 15:09:58,007 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-28 15:09:58,009 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=cccfad57-39c2-473e-a55f-ad107918c2ac] opened session at timestamp: 636578465980, for session factory: [/462b4f93e55f44228f45dce097b92ab8]
2018-03-28 15:09:58,010 [5] DEBUG NHibernate.Transaction.AdoTransaction - Begin (Unspecified)
2018-03-28 15:09:58,012 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-28 15:10:03,776 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = cokceken alias=this0_
2018-03-28 15:10:03,778 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = cokceken
2018-03-28 15:10:03,780 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-28 15:10:03,781 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-28 15:10:03,782 [5] DEBUG NHibernate.Type.StringType - binding 'cokceken' to parameter: 0
2018-03-28 15:10:03,784 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'cokceken' [Type: String (4000:0:0)]
2018-03-28 15:10:03,785 [5] DEBUG NHibernate.Transaction.AdoTransaction - Enlist Command
2018-03-28 15:10:03,789 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-28 15:10:03,790 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-28 15:10:03,791 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-28 15:10:03,793 [5] DEBUG NHibernate.Loader.Loader - result set row: 0
2018-03-28 15:10:03,795 [5] DEBUG NHibernate.Type.Int32Type - returning '1' as column: id1_1_0_
2018-03-28 15:10:03,796 [5] DEBUG NHibernate.Loader.Loader - result row: EntityKey[Password.Domain.Model.User#1]
2018-03-28 15:10:03,797 [5] DEBUG NHibernate.Loader.Loader - Initializing object from DataReader: [Password.Domain.Model.User#1]
2018-03-28 15:10:03,799 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Hydrating entity: [Password.Domain.Model.User#1]
2018-03-28 15:10:03,800 [5] DEBUG NHibernate.Type.StringType - returning 'email' as column: email2_1_0_
2018-03-28 15:10:03,802 [5] DEBUG NHibernate.Type.StringType - returning '8214822332f34da7c595f73512b5a5e24ddf8a0d5cc1bc12a860f7bb076dde1b' as column: password3_1_0_
2018-03-28 15:10:03,804 [5] DEBUG NHibernate.Type.StringType - returning 'cokceken' as column: username4_1_0_
2018-03-28 15:10:03,806 [5] DEBUG NHibernate.Type.StringType - returning 'salt' as column: passwordsalt5_1_0_
2018-03-28 15:10:03,808 [5] DEBUG NHibernate.Loader.Loader - done processing result set (1 rows)
2018-03-28 15:10:03,810 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-28 15:10:03,811 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 24 ms
2018-03-28 15:10:03,813 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-28 15:10:03,815 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 1
2018-03-28 15:10:03,816 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - resolving associations for [Password.Domain.Model.User#1]
2018-03-28 15:10:03,817 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - done materializing entity [Password.Domain.Model.User#1]
2018-03-28 15:10:03,819 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-28 15:10:18,203 [5] DEBUG NHibernate.Transaction.AdoTransaction - Start Commit
2018-03-28 15:10:18,205 [5] DEBUG NHibernate.Impl.SessionImpl - before transaction completion
2018-03-28 15:10:18,206 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - flushing session
2018-03-28 15:10:18,207 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - processing flush-time cascades
2018-03-28 15:10:18,208 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - dirty checking collections
2018-03-28 15:10:18,210 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Flushing entities and processing referenced collections
2018-03-28 15:10:18,211 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Processing unreferenced collections
2018-03-28 15:10:18,212 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Scheduling collection removes/(re)creates/updates
2018-03-28 15:10:18,214 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Flushed: 0 insertions, 0 updates, 0 deletions to 1 objects
2018-03-28 15:10:18,215 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - Flushed: 0 (re)creations, 0 updates, 0 removals to 0 collections
2018-03-28 15:10:18,216 [5] DEBUG NHibernate.Impl.Printer - listing entities:
2018-03-28 15:10:18,217 [5] DEBUG NHibernate.Impl.Printer - Password.Domain.Model.User{'Id'='1', 'Email'='email', 'Password'='8214822332f34da7c595f73512b5a5e24ddf8a0d5cc1bc12a860f7bb076dde1b', 'Username'='cokceken', 'PasswordSalt'='salt'}
2018-03-28 15:10:18,218 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - executing flush
2018-03-28 15:10:18,220 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Registering flush begin
2018-03-28 15:10:18,221 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Registering flush end
2018-03-28 15:10:18,222 [5] DEBUG NHibernate.Event.Default.AbstractFlushingEventListener - post flush
2018-03-28 15:10:18,224 [5] DEBUG NHibernate.Transaction.AdoTransaction - DbTransaction Committed
2018-03-28 15:10:18,225 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-28 15:10:18,226 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-28 15:10:18,227 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-28 15:10:18,228 [5] DEBUG NHibernate.Transaction.AdoTransaction - DbTransaction disposed.
2018-03-28 15:10:18,230 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-28 15:10:18,231 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-28 15:10:31,160 [5] INFO  Password.Infrastructure.Services.Log4Net - Wrong password
