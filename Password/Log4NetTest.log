2018-03-26 17:22:42,886 [6] DEBUG Password.Infrastructure.Services.Log4Net - Hello
2018-03-26 17:24:22,134 [5] DEBUG Password.Infrastructure.Services.Log4Net - Hello
2018-03-27 09:32:51,249 [9] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:cokceken, password:elma
2018-03-27 09:32:51,273 [9] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-27 09:32:51,277 [9] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-27 09:32:51,279 [9] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-27 09:32:51,282 [9] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-27 09:32:51,379 [9] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 09:32:51,825 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:32:51,854 [9] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 09:32:51,871 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:32:51,883 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 09:32:51,884 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 09:32:51,890 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 09:32:51,896 [9] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 09:32:51,898 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:32:51,899 [9] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 09:32:51,900 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:32:51,902 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 09:32:51,903 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 09:32:51,904 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 09:32:51,905 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 09:32:51,908 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:32:51,911 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 09:32:51,912 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 09:32:51,914 [9] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:32:51,915 [9] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:32:51,918 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:32:51,919 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:32:51,973 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 09:32:51,978 [9] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:32:51,980 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:32:51,981 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:32:51,983 [9] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:32:51,985 [9] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:32:51,987 [9] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:32:52,141 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 09:32:52,143 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 09:32:52,145 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 09:32:52,146 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 09:32:52,165 [9] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:32:52,171 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:32:52,174 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:32:52,176 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:32:52,178 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:32:52,180 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:32:52,182 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:32:52,189 [9] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:32:52,200 [9] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 09:32:52,205 [9] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:f5c37417-d685-45dc-bda3-d442472591b8
Error Number:2714,State:6,Class:16
2018-03-27 09:32:52,212 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 09:32:52,215 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:32:52,217 [9] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:32:52,218 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:32:52,220 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:32:52,221 [9] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:32:52,223 [9] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:32:52,225 [9] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:32:52,238 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:32:52,245 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:32:52,303 [9] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 09:32:52,305 [9] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 09:32:52,307 [9] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:32:52,308 [9] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:32:52,309 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:32:52,311 [9] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 09:32:52,312 [9] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 09:32:52,314 [9] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 09:32:52,315 [9] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 09:32:52,316 [9] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 09:32:52,317 [9] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 09:32:52,318 [9] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 09:32:52,320 [9] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 09:32:52,322 [9] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 09:32:52,325 [9] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 09:32:52,326 [9] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:32:52,328 [9] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 09:32:52,329 [9] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 09:32:52,330 [9] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 09:32:52,332 [9] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 09:32:52,333 [9] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:32:52,335 [9] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 09:32:52,336 [9] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 09:32:52,338 [9] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 09:32:52,347 [9] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 09:32:52,349 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 09:32:52,350 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 09:32:52,352 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:32:52,382 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:32:52,385 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:32:52,414 [9] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 09:32:52,426 [9] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 09:32:52,444 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:32:52,447 [9] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 09:32:52,448 [9] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 09:32:52,479 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 09:32:52,480 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 09:32:52,481 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 09:32:52,482 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 09:32:52,484 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 09:32:52,485 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 09:32:52,487 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:32:52,510 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:32:52,511 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:32:52,513 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:32:52,514 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 09:32:52,515 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:32:52,517 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:32:52,519 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:32:52,520 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 09:32:52,521 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 09:32:52,522 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 09:32:52,523 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 09:32:52,525 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 09:32:52,526 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 09:32:52,527 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:32:52,528 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:32:52,529 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:32:52,530 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:32:52,531 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 09:32:52,532 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:32:52,534 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:32:52,535 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:32:52,537 [9] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-27 09:32:52,539 [9] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 747a3bcd479840619697c1bc70cf1d0e(unnamed)
2018-03-27 09:32:52,541 [9] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 09:32:52,542 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 09:32:52,545 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 09:32:52,547 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 09:32:52,549 [9] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 09:32:52,561 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=17168da2-60a2-4e11-8103-b3e6ded3b080] opened session at timestamp: 636577399725, for session factory: [/747a3bcd479840619697c1bc70cf1d0e]
2018-03-27 09:32:52,613 [9] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = cokceken alias=this0_
2018-03-27 09:32:52,622 [9] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = cokceken
2018-03-27 09:32:52,657 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 09:32:52,659 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 09:32:52,663 [9] DEBUG NHibernate.Type.StringType - binding 'cokceken' to parameter: 0
2018-03-27 09:32:52,669 [9] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'cokceken' [Type: String (4000:0:0)]
2018-03-27 09:32:52,672 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:32:52,679 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 3 ms
2018-03-27 09:32:52,681 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 09:32:52,684 [9] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 09:32:52,686 [9] DEBUG NHibernate.Loader.Loader - result set row: 0
2018-03-27 09:32:52,689 [9] DEBUG NHibernate.Type.Int32Type - returning '1' as column: id1_1_0_
2018-03-27 09:32:52,693 [9] DEBUG NHibernate.Loader.Loader - result row: EntityKey[Password.Domain.Model.User#1]
2018-03-27 09:32:52,697 [9] DEBUG NHibernate.Loader.Loader - Initializing object from DataReader: [Password.Domain.Model.User#1]
2018-03-27 09:32:52,702 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Hydrating entity: [Password.Domain.Model.User#1]
2018-03-27 09:32:52,705 [9] DEBUG NHibernate.Type.StringType - returning 'email' as column: email2_1_0_
2018-03-27 09:32:52,706 [9] DEBUG NHibernate.Type.StringType - returning 'password' as column: password3_1_0_
2018-03-27 09:32:52,708 [9] DEBUG NHibernate.Type.StringType - returning 'cokceken' as column: username4_1_0_
2018-03-27 09:32:52,709 [9] DEBUG NHibernate.Type.StringType - returning 'salt' as column: passwordsalt5_1_0_
2018-03-27 09:32:52,712 [9] DEBUG NHibernate.Loader.Loader - done processing result set (1 rows)
2018-03-27 09:32:52,714 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 09:32:52,716 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 40 ms
2018-03-27 09:32:52,718 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 09:32:52,720 [9] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 09:32:52,722 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:32:52,724 [9] DEBUG NHibernate.Loader.Loader - total objects hydrated: 1
2018-03-27 09:32:52,727 [9] DEBUG NHibernate.Engine.TwoPhaseLoad - resolving associations for [Password.Domain.Model.User#1]
2018-03-27 09:32:52,730 [9] DEBUG NHibernate.Engine.TwoPhaseLoad - done materializing entity [Password.Domain.Model.User#1]
2018-03-27 09:32:52,732 [9] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 09:32:52,734 [9] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 09:32:52,736 [9] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 09:32:52,739 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=17168da2-60a2-4e11-8103-b3e6ded3b080] running ISession.Dispose()
2018-03-27 09:32:52,741 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=17168da2-60a2-4e11-8103-b3e6ded3b080] executing real Dispose(True)
2018-03-27 09:32:52,742 [9] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 09:32:52,744 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 09:33:15,721 [9] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:cokceken, password:elma
2018-03-27 09:33:15,726 [9] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 09:33:15,728 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:33:15,730 [9] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 09:33:15,732 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:33:15,733 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 09:33:15,735 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 09:33:15,737 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 09:33:15,738 [9] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 09:33:15,740 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:33:15,743 [9] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 09:33:15,744 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:33:15,746 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 09:33:15,748 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 09:33:15,749 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 09:33:15,751 [9] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 09:33:15,753 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:33:15,755 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 09:33:15,756 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 09:33:15,757 [9] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:33:15,759 [9] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:33:15,760 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:33:15,762 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:33:15,774 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 09:33:15,776 [9] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:33:15,777 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:33:15,779 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:33:15,780 [9] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:33:15,782 [9] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:33:15,784 [9] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:33:15,889 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 09:33:15,890 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 09:33:15,892 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 09:33:15,893 [9] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 09:33:15,904 [9] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:33:15,906 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:33:15,908 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:33:15,910 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:33:15,911 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:33:15,913 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:33:15,916 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:33:15,921 [9] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:33:15,923 [9] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 09:33:15,927 [9] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:f5c37417-d685-45dc-bda3-d442472591b8
Error Number:2714,State:6,Class:16
2018-03-27 09:33:15,929 [9] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 09:33:15,930 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:33:15,932 [9] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:33:15,933 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:33:15,934 [9] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:33:15,936 [9] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:33:15,937 [9] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:33:15,939 [9] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:33:15,940 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:33:15,942 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:33:15,944 [9] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 09:33:15,946 [9] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 09:33:15,947 [9] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:33:15,948 [9] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:33:15,950 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:33:15,951 [9] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 09:33:15,953 [9] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 09:33:15,954 [9] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 09:33:15,956 [9] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 09:33:15,957 [9] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 09:33:15,959 [9] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 09:33:15,960 [9] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 09:33:15,962 [9] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 09:33:15,963 [9] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 09:33:15,965 [9] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 09:33:15,966 [9] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:33:15,968 [9] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 09:33:15,969 [9] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 09:33:15,970 [9] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 09:33:15,972 [9] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 09:33:15,973 [9] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:33:15,974 [9] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 09:33:15,975 [9] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 09:33:15,977 [9] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 09:33:15,978 [9] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 09:33:15,979 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 09:33:15,982 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 09:33:15,983 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:33:16,013 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:33:16,015 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:33:16,017 [9] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 09:33:16,018 [9] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 09:33:16,020 [9] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:33:16,021 [9] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 09:33:16,022 [9] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 09:33:16,023 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 09:33:16,025 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 09:33:16,026 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 09:33:16,027 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 09:33:16,028 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 09:33:16,030 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 09:33:16,031 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:33:16,032 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:33:16,034 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:33:16,035 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:33:16,036 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 09:33:16,038 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:33:16,039 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:33:16,041 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:33:16,042 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 09:33:16,043 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 09:33:16,044 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 09:33:16,046 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 09:33:16,047 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 09:33:16,049 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 09:33:16,050 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:33:16,051 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:33:16,052 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:33:16,054 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:33:16,055 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 09:33:16,057 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:33:16,058 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:33:16,060 [9] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:33:16,061 [9] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: ba2891c033ee4c219bfd12bc84416969(unnamed)
2018-03-27 09:33:16,063 [9] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 09:33:16,064 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 09:33:16,066 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 09:33:16,067 [9] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 09:33:16,068 [9] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 09:33:16,069 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=60818f21-aae6-4dbc-aee9-e41edba8576c] opened session at timestamp: 636577399960, for session factory: [/ba2891c033ee4c219bfd12bc84416969]
2018-03-27 09:33:16,071 [9] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = cokceken alias=this0_
2018-03-27 09:33:16,072 [9] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = cokceken
2018-03-27 09:33:16,074 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 09:33:16,075 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 09:33:16,077 [9] DEBUG NHibernate.Type.StringType - binding 'cokceken' to parameter: 0
2018-03-27 09:33:16,078 [9] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'cokceken' [Type: String (4000:0:0)]
2018-03-27 09:33:16,080 [9] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:33:16,083 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-27 09:33:16,085 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 09:33:16,086 [9] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 09:33:16,087 [9] DEBUG NHibernate.Loader.Loader - result set row: 0
2018-03-27 09:33:16,089 [9] DEBUG NHibernate.Type.Int32Type - returning '1' as column: id1_1_0_
2018-03-27 09:33:16,090 [9] DEBUG NHibernate.Loader.Loader - result row: EntityKey[Password.Domain.Model.User#1]
2018-03-27 09:33:16,091 [9] DEBUG NHibernate.Loader.Loader - Initializing object from DataReader: [Password.Domain.Model.User#1]
2018-03-27 09:33:16,092 [9] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Hydrating entity: [Password.Domain.Model.User#1]
2018-03-27 09:33:16,094 [9] DEBUG NHibernate.Type.StringType - returning 'email' as column: email2_1_0_
2018-03-27 09:33:16,095 [9] DEBUG NHibernate.Type.StringType - returning 'password' as column: password3_1_0_
2018-03-27 09:33:16,096 [9] DEBUG NHibernate.Type.StringType - returning 'cokceken' as column: username4_1_0_
2018-03-27 09:33:16,098 [9] DEBUG NHibernate.Type.StringType - returning 'salt' as column: passwordsalt5_1_0_
2018-03-27 09:33:16,099 [9] DEBUG NHibernate.Loader.Loader - done processing result set (1 rows)
2018-03-27 09:33:16,101 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 09:33:16,102 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 20 ms
2018-03-27 09:33:16,103 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 09:33:16,104 [9] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 09:33:16,106 [9] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:33:16,107 [9] DEBUG NHibernate.Loader.Loader - total objects hydrated: 1
2018-03-27 09:33:16,108 [9] DEBUG NHibernate.Engine.TwoPhaseLoad - resolving associations for [Password.Domain.Model.User#1]
2018-03-27 09:33:16,110 [9] DEBUG NHibernate.Engine.TwoPhaseLoad - done materializing entity [Password.Domain.Model.User#1]
2018-03-27 09:33:16,111 [9] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 09:33:16,112 [9] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 09:33:16,114 [9] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 09:33:16,115 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=60818f21-aae6-4dbc-aee9-e41edba8576c] running ISession.Dispose()
2018-03-27 09:33:16,116 [9] DEBUG NHibernate.Impl.SessionImpl - [session-id=60818f21-aae6-4dbc-aee9-e41edba8576c] executing real Dispose(True)
2018-03-27 09:33:16,117 [9] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 09:33:16,118 [9] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 09:34:42,007 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:semih, password:asd
2018-03-27 09:34:45,093 [5] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-27 09:34:45,098 [5] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-27 09:34:45,101 [5] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-27 09:34:45,103 [5] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-27 09:34:45,197 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 09:34:45,557 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:34:45,587 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 09:34:45,607 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:34:45,617 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 09:34:45,620 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 09:34:45,626 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 09:34:45,631 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 09:34:45,633 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:34:45,634 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 09:34:45,635 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:34:45,637 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 09:34:45,638 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 09:34:45,639 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 09:34:45,640 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 09:34:45,642 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:34:45,645 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 09:34:45,647 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 09:34:45,648 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:34:45,650 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:34:45,652 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:34:45,654 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:34:45,693 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 09:34:45,697 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:34:45,698 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:34:45,699 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:34:45,700 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:34:45,703 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:34:45,706 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:34:45,832 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 09:34:45,834 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 09:34:45,836 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 09:34:45,837 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 09:34:45,850 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:34:45,855 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:34:45,857 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:34:45,858 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:34:45,860 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:34:45,861 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:34:45,863 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:34:45,868 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:34:45,875 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 09:34:45,880 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:1d1645e2-9700-4f70-9ede-56fc388966c8
Error Number:2714,State:6,Class:16
2018-03-27 09:34:45,884 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 09:34:45,886 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:34:45,887 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:34:45,888 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:34:45,889 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:34:45,890 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:34:45,892 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:34:45,893 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:34:45,903 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:34:45,907 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:34:45,954 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 09:34:45,955 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 09:34:45,957 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:34:45,958 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:34:45,959 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:34:45,961 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 09:34:45,962 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 09:34:45,964 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 09:34:45,965 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 09:34:45,966 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 09:34:45,967 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 09:34:45,968 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 09:34:45,969 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 09:34:45,971 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 09:34:45,973 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 09:34:45,975 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:34:45,976 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 09:34:45,977 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 09:34:45,978 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 09:34:45,979 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 09:34:45,981 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:34:45,982 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 09:34:45,983 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 09:34:45,985 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 09:34:45,994 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 09:34:45,996 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 09:34:45,997 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 09:34:45,998 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:34:46,031 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:34:46,034 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:34:46,067 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 09:34:46,079 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 09:34:46,097 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:34:46,100 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 09:34:46,102 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 09:34:46,130 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 09:34:46,131 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 09:34:46,132 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 09:34:46,134 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 09:34:46,135 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 09:34:46,137 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 09:34:46,138 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:34:46,164 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:34:46,166 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:34:46,167 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:34:46,168 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 09:34:46,170 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:34:46,172 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:34:46,173 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:34:46,175 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 09:34:46,176 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 09:34:46,177 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 09:34:46,178 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 09:34:46,179 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 09:34:46,180 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 09:34:46,182 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:34:46,183 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:34:46,184 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:34:46,185 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:34:46,187 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 09:34:46,188 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:34:46,190 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:34:46,191 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:34:46,193 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-27 09:34:46,195 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 310d236a1dc9494cb9cf7c17f2c3680e(unnamed)
2018-03-27 09:34:46,196 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 09:34:46,197 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 09:34:46,201 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 09:34:46,202 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 09:34:46,204 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 09:34:46,217 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=00cec94b-40e4-4392-b105-cc4181727ef9] opened session at timestamp: 636577400862, for session factory: [/310d236a1dc9494cb9cf7c17f2c3680e]
2018-03-27 09:34:46,269 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = semih alias=this0_
2018-03-27 09:34:46,278 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = semih
2018-03-27 09:34:46,310 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 09:34:46,311 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 09:34:46,314 [5] DEBUG NHibernate.Type.StringType - binding 'semih' to parameter: 0
2018-03-27 09:34:46,321 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'semih' [Type: String (4000:0:0)]
2018-03-27 09:34:46,324 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:34:46,329 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-27 09:34:46,332 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 09:34:46,334 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 09:34:46,335 [5] DEBUG NHibernate.Loader.Loader - done processing result set (0 rows)
2018-03-27 09:34:46,338 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 09:34:46,339 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 12 ms
2018-03-27 09:34:46,341 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 09:34:46,343 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 09:34:46,344 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:34:46,346 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 0
2018-03-27 09:34:46,347 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 09:34:46,349 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 09:34:46,351 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 09:34:46,354 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=00cec94b-40e4-4392-b105-cc4181727ef9] running ISession.Dispose()
2018-03-27 09:34:46,356 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=00cec94b-40e4-4392-b105-cc4181727ef9] executing real Dispose(True)
2018-03-27 09:34:46,357 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 09:34:46,359 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 09:35:09,552 [5] ERROR Password.Infrastructure.Services.Log4Net - Token not found with username: semih
Password.Domain.Model.Exception.UserNotFoundException: Token not found with username: semih
   at Password.Domain.Service.UserService.GetUserWithUsername(String username) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\UserService.cs:line 21
   at Password.Domain.Service.AuthenticationService.AreValidUserCredentials(String username, String password) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\AuthenticationService.cs:line 33
   at Password.UI.Controllers.HomeController.Login(UserCredentialModel model) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Password\Controllers\HomeController.cs:line 35
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c.<BeginInvokeSynchronousActionMethod>b__9_0(IAsyncResult asyncResult, ActionInvocation innerInvokeState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__11_0()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass11_1.<InvokeActionMethodFilterAsynchronouslyRecursive>b__2()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass7_0.<BeginInvokeActionMethodWithFilters>b__1(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_6.<BeginInvokeAction>b__3()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_1.<BeginInvokeAction>b__5(IAsyncResult asyncResult)
2018-03-27 09:36:22,346 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:cokceken, password:elma
2018-03-27 09:36:23,829 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 09:36:23,832 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:36:23,834 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 09:36:23,835 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:36:23,837 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 09:36:23,839 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 09:36:23,842 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 09:36:23,844 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 09:36:23,846 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:36:23,848 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 09:36:23,850 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:36:23,851 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 09:36:23,853 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 09:36:23,854 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 09:36:23,856 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 09:36:23,857 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:36:23,859 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 09:36:23,861 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 09:36:23,862 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:36:23,864 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:36:23,866 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:36:23,867 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:36:23,878 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 09:36:23,879 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:36:23,881 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:36:23,882 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:36:23,883 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:36:23,884 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:36:23,885 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:36:23,989 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 09:36:23,990 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 09:36:23,992 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 09:36:23,993 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 09:36:24,002 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:36:24,004 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:36:24,005 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:36:24,007 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:36:24,008 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:36:24,009 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:36:24,011 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:36:24,015 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:36:24,016 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 09:36:24,020 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:1d1645e2-9700-4f70-9ede-56fc388966c8
Error Number:2714,State:6,Class:16
2018-03-27 09:36:24,022 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 09:36:24,023 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:36:24,024 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:36:24,025 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:36:24,026 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:36:24,027 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:36:24,028 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:36:24,030 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:36:24,031 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:36:24,032 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:36:24,034 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 09:36:24,035 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 09:36:24,036 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:36:24,038 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:36:24,039 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:36:24,040 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 09:36:24,042 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 09:36:24,043 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 09:36:24,044 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 09:36:24,045 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 09:36:24,046 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 09:36:24,048 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 09:36:24,049 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 09:36:24,051 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 09:36:24,052 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 09:36:24,054 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:36:24,055 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 09:36:24,056 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 09:36:24,058 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 09:36:24,059 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 09:36:24,060 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:36:24,061 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 09:36:24,063 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 09:36:24,064 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 09:36:24,065 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 09:36:24,067 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 09:36:24,069 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 09:36:24,070 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:36:24,100 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:36:24,102 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:36:24,103 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 09:36:24,105 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 09:36:24,106 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:36:24,107 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 09:36:24,108 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 09:36:24,110 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 09:36:24,112 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 09:36:24,113 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 09:36:24,114 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 09:36:24,116 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 09:36:24,117 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 09:36:24,118 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:36:24,120 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:36:24,122 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:36:24,123 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:36:24,124 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 09:36:24,126 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:36:24,127 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:36:24,128 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:36:24,130 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 09:36:24,131 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 09:36:24,131 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 09:36:24,134 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 09:36:24,135 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 09:36:24,136 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 09:36:24,138 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:36:24,139 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:36:24,140 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:36:24,141 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:36:24,142 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 09:36:24,144 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:36:24,145 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:36:24,146 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:36:24,148 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 1c2494f5b0c54308b03d29819d5336c4(unnamed)
2018-03-27 09:36:24,149 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 09:36:24,150 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 09:36:24,151 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 09:36:24,152 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 09:36:24,154 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 09:36:24,155 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=b4f52b7d-b3a9-42cf-b12c-fadb6e924fcf] opened session at timestamp: 636577401841, for session factory: [/1c2494f5b0c54308b03d29819d5336c4]
2018-03-27 09:36:24,156 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = cokceken alias=this0_
2018-03-27 09:36:24,157 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = cokceken
2018-03-27 09:36:24,159 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 09:36:24,160 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 09:36:24,162 [5] DEBUG NHibernate.Type.StringType - binding 'cokceken' to parameter: 0
2018-03-27 09:36:24,163 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'cokceken' [Type: String (4000:0:0)]
2018-03-27 09:36:24,164 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:36:24,168 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-27 09:36:24,169 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 09:36:24,170 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 09:36:24,172 [5] DEBUG NHibernate.Loader.Loader - result set row: 0
2018-03-27 09:36:24,174 [5] DEBUG NHibernate.Type.Int32Type - returning '1' as column: id1_1_0_
2018-03-27 09:36:24,178 [5] DEBUG NHibernate.Loader.Loader - result row: EntityKey[Password.Domain.Model.User#1]
2018-03-27 09:36:24,183 [5] DEBUG NHibernate.Loader.Loader - Initializing object from DataReader: [Password.Domain.Model.User#1]
2018-03-27 09:36:24,188 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Hydrating entity: [Password.Domain.Model.User#1]
2018-03-27 09:36:24,189 [5] DEBUG NHibernate.Type.StringType - returning 'email' as column: email2_1_0_
2018-03-27 09:36:24,191 [5] DEBUG NHibernate.Type.StringType - returning 'password' as column: password3_1_0_
2018-03-27 09:36:24,192 [5] DEBUG NHibernate.Type.StringType - returning 'cokceken' as column: username4_1_0_
2018-03-27 09:36:24,194 [5] DEBUG NHibernate.Type.StringType - returning 'salt' as column: passwordsalt5_1_0_
2018-03-27 09:36:24,197 [5] DEBUG NHibernate.Loader.Loader - done processing result set (1 rows)
2018-03-27 09:36:24,198 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 09:36:24,199 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 34 ms
2018-03-27 09:36:24,201 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 09:36:24,202 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 09:36:24,203 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:36:24,205 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 1
2018-03-27 09:36:24,209 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - resolving associations for [Password.Domain.Model.User#1]
2018-03-27 09:36:24,213 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - done materializing entity [Password.Domain.Model.User#1]
2018-03-27 09:36:24,214 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 09:36:24,217 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 09:36:24,218 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 09:36:24,220 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=b4f52b7d-b3a9-42cf-b12c-fadb6e924fcf] running ISession.Dispose()
2018-03-27 09:36:24,221 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=b4f52b7d-b3a9-42cf-b12c-fadb6e924fcf] executing real Dispose(True)
2018-03-27 09:36:24,223 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 09:36:24,224 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 09:40:51,534 [5] ERROR Password.Infrastructure.Services.Log4Net - Cannot apply indexing with [] to an expression of type 'System.Dynamic.DynamicObject'
Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: Cannot apply indexing with [] to an expression of type 'System.Dynamic.DynamicObject'
   at CallSite.Target(Closure , CallSite , Object , String )
   at System.Dynamic.UpdateDelegates.UpdateAndExecute2[T0,T1,TRet](CallSite site, T0 arg0, T1 arg1)
   at ASP._Page_Views_Shared__Layout_cshtml.Execute() in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Password\Views\Shared\_Layout.cshtml:line 30
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.WebPages.WebPageBase.<>c__DisplayClass40_0.<RenderPageCore>b__0(TextWriter writer)
   at System.Web.WebPages.HelperResult.WriteTo(TextWriter writer)
   at System.Web.WebPages.WebPageBase.Write(HelperResult result)
   at System.Web.WebPages.WebPageBase.RenderSurrounding(String partialViewName, Action`1 body)
   at System.Web.WebPages.WebPageBase.PopContext()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance)
   at System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer)
   at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilterRecursive(IList`1 filters, Int32 filterIndex, ResultExecutingContext preContext, ControllerContext controllerContext, ActionResult actionResult)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilterRecursive(IList`1 filters, Int32 filterIndex, ResultExecutingContext preContext, ControllerContext controllerContext, ActionResult actionResult)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_6.<BeginInvokeAction>b__3()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_1.<BeginInvokeAction>b__5(IAsyncResult asyncResult)
2018-03-27 09:42:44,132 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:cokceken, password:asfknas+
2018-03-27 09:42:45,553 [5] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-27 09:42:45,563 [5] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-27 09:42:45,566 [5] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-27 09:42:45,570 [5] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-27 09:42:45,664 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 09:42:46,063 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:42:46,093 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 09:42:46,110 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:42:46,121 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 09:42:46,123 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 09:42:46,128 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 09:42:46,134 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 09:42:46,136 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:42:46,138 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 09:42:46,139 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:42:46,141 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 09:42:46,142 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 09:42:46,143 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 09:42:46,145 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 09:42:46,147 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:42:46,151 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 09:42:46,153 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 09:42:46,155 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:42:46,156 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:42:46,159 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:42:46,161 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:42:46,204 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 09:42:46,209 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:42:46,211 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:42:46,212 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:42:46,213 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:42:46,216 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:42:46,218 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:42:46,369 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 09:42:46,371 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 09:42:46,373 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 09:42:46,374 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 09:42:46,392 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:42:46,399 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:42:46,402 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:42:46,404 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:42:46,405 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:42:46,407 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:42:46,408 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:42:46,416 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:42:46,425 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 09:42:46,430 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:0a53c404-f8fd-4115-b6f1-fd8c496c6c35
Error Number:2714,State:6,Class:16
2018-03-27 09:42:46,437 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 09:42:46,439 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:42:46,441 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:42:46,443 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:42:46,444 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:42:46,446 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:42:46,447 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:42:46,448 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:42:46,459 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:42:46,464 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:42:46,507 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 09:42:46,509 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 09:42:46,510 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:42:46,512 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:42:46,513 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:42:46,515 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 09:42:46,517 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 09:42:46,519 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 09:42:46,520 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 09:42:46,522 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 09:42:46,523 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 09:42:46,525 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 09:42:46,527 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 09:42:46,530 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 09:42:46,534 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 09:42:46,537 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:42:46,539 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 09:42:46,541 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 09:42:46,543 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 09:42:46,545 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 09:42:46,547 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:42:46,548 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 09:42:46,549 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 09:42:46,552 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 09:42:46,562 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 09:42:46,563 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 09:42:46,565 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 09:42:46,567 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:42:46,601 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:42:46,604 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:42:46,635 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 09:42:46,647 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 09:42:46,663 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:42:46,666 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 09:42:46,667 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 09:42:46,694 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 09:42:46,695 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 09:42:46,697 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 09:42:46,698 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 09:42:46,700 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 09:42:46,701 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 09:42:46,702 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:42:46,725 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:42:46,727 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:42:46,728 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:42:46,730 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 09:42:46,731 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:42:46,733 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:42:46,735 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:42:46,737 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 09:42:46,738 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 09:42:46,740 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 09:42:46,741 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 09:42:46,743 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 09:42:46,744 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 09:42:46,745 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:42:46,747 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:42:46,748 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:42:46,750 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:42:46,751 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 09:42:46,752 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:42:46,754 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:42:46,755 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:42:46,757 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-27 09:42:46,759 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 8bde037722fc4ed0aab0f88ac1f034fa(unnamed)
2018-03-27 09:42:46,761 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 09:42:46,762 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 09:42:46,765 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 09:42:46,767 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 09:42:46,770 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 09:42:46,784 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=648c95dc-d497-4329-a342-d4c61a8595b6] opened session at timestamp: 636577405667, for session factory: [/8bde037722fc4ed0aab0f88ac1f034fa]
2018-03-27 09:42:46,836 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = cokceken alias=this0_
2018-03-27 09:42:46,844 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = cokceken
2018-03-27 09:42:46,876 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 09:42:46,878 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 09:42:46,881 [5] DEBUG NHibernate.Type.StringType - binding 'cokceken' to parameter: 0
2018-03-27 09:42:46,886 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'cokceken' [Type: String (4000:0:0)]
2018-03-27 09:42:46,889 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:42:46,895 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-27 09:42:46,897 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 09:42:46,899 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 09:42:46,901 [5] DEBUG NHibernate.Loader.Loader - result set row: 0
2018-03-27 09:42:46,904 [5] DEBUG NHibernate.Type.Int32Type - returning '1' as column: id1_1_0_
2018-03-27 09:42:46,907 [5] DEBUG NHibernate.Loader.Loader - result row: EntityKey[Password.Domain.Model.User#1]
2018-03-27 09:42:46,911 [5] DEBUG NHibernate.Loader.Loader - Initializing object from DataReader: [Password.Domain.Model.User#1]
2018-03-27 09:42:46,916 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Hydrating entity: [Password.Domain.Model.User#1]
2018-03-27 09:42:46,918 [5] DEBUG NHibernate.Type.StringType - returning 'email' as column: email2_1_0_
2018-03-27 09:42:46,919 [5] DEBUG NHibernate.Type.StringType - returning 'password' as column: password3_1_0_
2018-03-27 09:42:46,921 [5] DEBUG NHibernate.Type.StringType - returning 'cokceken' as column: username4_1_0_
2018-03-27 09:42:46,922 [5] DEBUG NHibernate.Type.StringType - returning 'salt' as column: passwordsalt5_1_0_
2018-03-27 09:42:46,925 [5] DEBUG NHibernate.Loader.Loader - done processing result set (1 rows)
2018-03-27 09:42:46,928 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 09:42:46,930 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 38 ms
2018-03-27 09:42:46,932 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 09:42:46,934 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 09:42:46,936 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:42:46,939 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 1
2018-03-27 09:42:46,943 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - resolving associations for [Password.Domain.Model.User#1]
2018-03-27 09:42:46,948 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - done materializing entity [Password.Domain.Model.User#1]
2018-03-27 09:42:46,950 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 09:42:46,952 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 09:42:46,955 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 09:42:46,959 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=648c95dc-d497-4329-a342-d4c61a8595b6] running ISession.Dispose()
2018-03-27 09:42:46,961 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=648c95dc-d497-4329-a342-d4c61a8595b6] executing real Dispose(True)
2018-03-27 09:42:46,963 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 09:42:46,966 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 09:42:58,356 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:cokceken, password:asfknas+
2018-03-27 09:43:01,823 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 09:43:01,825 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:01,827 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 09:43:01,829 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:43:01,831 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 09:43:01,833 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 09:43:01,836 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 09:43:01,838 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 09:43:01,840 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:01,842 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 09:43:01,844 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:43:01,845 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 09:43:01,847 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 09:43:01,849 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 09:43:01,850 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 09:43:01,852 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:01,854 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 09:43:01,855 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 09:43:01,857 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:43:01,858 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:43:01,860 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:01,862 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:43:01,872 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 09:43:01,873 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:43:01,875 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:43:01,877 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:43:01,878 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:43:01,880 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:43:01,881 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:43:02,122 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 09:43:02,124 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 09:43:02,126 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 09:43:02,127 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 09:43:02,139 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:43:02,141 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:02,142 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:02,144 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:02,146 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:02,147 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:02,149 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:02,154 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:43:02,156 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 09:43:02,160 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:0a53c404-f8fd-4115-b6f1-fd8c496c6c35
Error Number:2714,State:6,Class:16
2018-03-27 09:43:02,162 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 09:43:02,163 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:43:02,164 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:43:02,165 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:43:02,166 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:43:02,168 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:43:02,169 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:43:02,170 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:43:02,172 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:02,173 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:02,176 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 09:43:02,177 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 09:43:02,179 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:43:02,180 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:43:02,181 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:02,182 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 09:43:02,184 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 09:43:02,185 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 09:43:02,186 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 09:43:02,188 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 09:43:02,189 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 09:43:02,191 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 09:43:02,192 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 09:43:02,193 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 09:43:02,195 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 09:43:02,196 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:43:02,198 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 09:43:02,199 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 09:43:02,201 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 09:43:02,202 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 09:43:02,204 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:43:02,205 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 09:43:02,207 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 09:43:02,208 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 09:43:02,210 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 09:43:02,212 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 09:43:02,213 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 09:43:02,215 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:43:02,252 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:43:02,254 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:02,256 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 09:43:02,258 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 09:43:02,260 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:02,261 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 09:43:02,263 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 09:43:02,265 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 09:43:02,266 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 09:43:02,268 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 09:43:02,269 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 09:43:02,271 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 09:43:02,272 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 09:43:02,274 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:43:02,276 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:43:02,278 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:43:02,279 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:43:02,281 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 09:43:02,283 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:43:02,284 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:43:02,286 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:43:02,287 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 09:43:02,289 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 09:43:02,290 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 09:43:02,291 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 09:43:02,293 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 09:43:02,295 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 09:43:02,296 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:43:02,298 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:43:02,299 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:43:02,301 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:43:02,302 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 09:43:02,304 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:43:02,305 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:43:02,306 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:43:02,308 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: d8a27060e23643729f8dd3fed41e0314(unnamed)
2018-03-27 09:43:02,310 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 09:43:02,311 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 09:43:02,313 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 09:43:02,314 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 09:43:02,316 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 09:43:02,317 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=712d5fbe-cb9f-4daf-8d8d-c3ed1d74984f] opened session at timestamp: 636577405823, for session factory: [/d8a27060e23643729f8dd3fed41e0314]
2018-03-27 09:43:02,319 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = cokceken alias=this0_
2018-03-27 09:43:02,321 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = cokceken
2018-03-27 09:43:02,322 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 09:43:02,323 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 09:43:02,325 [5] DEBUG NHibernate.Type.StringType - binding 'cokceken' to parameter: 0
2018-03-27 09:43:02,327 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'cokceken' [Type: String (4000:0:0)]
2018-03-27 09:43:02,328 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:43:02,332 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-27 09:43:02,334 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 09:43:02,335 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 09:43:02,337 [5] DEBUG NHibernate.Loader.Loader - result set row: 0
2018-03-27 09:43:02,338 [5] DEBUG NHibernate.Type.Int32Type - returning '1' as column: id1_1_0_
2018-03-27 09:43:02,339 [5] DEBUG NHibernate.Loader.Loader - result row: EntityKey[Password.Domain.Model.User#1]
2018-03-27 09:43:02,341 [5] DEBUG NHibernate.Loader.Loader - Initializing object from DataReader: [Password.Domain.Model.User#1]
2018-03-27 09:43:02,343 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Hydrating entity: [Password.Domain.Model.User#1]
2018-03-27 09:43:02,344 [5] DEBUG NHibernate.Type.StringType - returning 'email' as column: email2_1_0_
2018-03-27 09:43:02,346 [5] DEBUG NHibernate.Type.StringType - returning 'password' as column: password3_1_0_
2018-03-27 09:43:02,347 [5] DEBUG NHibernate.Type.StringType - returning 'cokceken' as column: username4_1_0_
2018-03-27 09:43:02,348 [5] DEBUG NHibernate.Type.StringType - returning 'salt' as column: passwordsalt5_1_0_
2018-03-27 09:43:02,350 [5] DEBUG NHibernate.Loader.Loader - done processing result set (1 rows)
2018-03-27 09:43:02,351 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 09:43:02,352 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 22 ms
2018-03-27 09:43:02,354 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 09:43:02,355 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 09:43:02,357 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:43:02,359 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 1
2018-03-27 09:43:02,360 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - resolving associations for [Password.Domain.Model.User#1]
2018-03-27 09:43:02,362 [5] DEBUG NHibernate.Engine.TwoPhaseLoad - done materializing entity [Password.Domain.Model.User#1]
2018-03-27 09:43:02,363 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 09:43:02,364 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 09:43:02,365 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 09:43:02,366 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=712d5fbe-cb9f-4daf-8d8d-c3ed1d74984f] running ISession.Dispose()
2018-03-27 09:43:02,368 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=712d5fbe-cb9f-4daf-8d8d-c3ed1d74984f] executing real Dispose(True)
2018-03-27 09:43:02,369 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 09:43:02,370 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 09:43:16,589 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:cokcekenasd, password:asfknas+
2018-03-27 09:43:17,516 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 09:43:17,518 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:17,521 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 09:43:17,522 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:43:17,524 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 09:43:17,526 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 09:43:17,527 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 09:43:17,528 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 09:43:17,530 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:17,533 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 09:43:17,534 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:43:17,536 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 09:43:17,538 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 09:43:17,540 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 09:43:17,542 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 09:43:17,543 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:17,545 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 09:43:17,547 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 09:43:17,548 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:43:17,550 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:43:17,552 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:17,553 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:43:17,564 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 09:43:17,566 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:43:17,567 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:43:17,568 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:43:17,570 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:43:17,571 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:43:17,572 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:43:17,675 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 09:43:17,677 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 09:43:17,678 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 09:43:17,680 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 09:43:17,690 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:43:17,692 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:17,693 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:17,695 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:17,696 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:17,698 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:17,699 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:17,703 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:43:17,705 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 09:43:17,709 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:0a53c404-f8fd-4115-b6f1-fd8c496c6c35
Error Number:2714,State:6,Class:16
2018-03-27 09:43:17,710 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 09:43:17,712 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:43:17,714 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:43:17,716 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:43:17,717 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:43:17,719 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:43:17,721 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:43:17,723 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:43:17,725 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:17,726 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:17,728 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 09:43:17,729 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 09:43:17,731 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:43:17,733 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:43:17,734 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:17,736 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 09:43:17,738 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 09:43:17,740 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 09:43:17,742 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 09:43:17,744 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 09:43:17,746 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 09:43:17,747 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 09:43:17,749 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 09:43:17,751 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 09:43:17,752 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 09:43:17,754 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:43:17,756 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 09:43:17,758 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 09:43:17,759 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 09:43:17,761 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 09:43:17,762 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:43:17,764 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 09:43:17,765 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 09:43:17,766 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 09:43:17,768 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 09:43:17,769 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 09:43:17,770 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 09:43:17,772 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:43:17,803 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:43:17,804 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:17,806 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 09:43:17,808 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 09:43:17,810 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:43:17,811 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 09:43:17,813 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 09:43:17,814 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 09:43:17,816 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 09:43:17,817 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 09:43:17,819 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 09:43:17,820 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 09:43:17,822 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 09:43:17,823 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:43:17,825 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:43:17,826 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:43:17,827 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:43:17,829 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 09:43:17,830 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:43:17,832 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:43:17,833 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:43:17,835 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 09:43:17,836 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 09:43:17,838 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 09:43:17,839 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 09:43:17,841 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 09:43:17,842 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 09:43:17,843 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:43:17,845 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:43:17,846 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:43:17,848 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:43:17,849 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 09:43:17,850 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:43:17,852 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:43:17,853 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:43:17,854 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 9e85a2e003544b27bd32c0e2a8f9096a(unnamed)
2018-03-27 09:43:17,856 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 09:43:17,857 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 09:43:17,859 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 09:43:17,860 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 09:43:17,862 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 09:43:17,863 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=1aa6cf86-4900-43be-b75d-f17c0e36812d] opened session at timestamp: 636577405978, for session factory: [/9e85a2e003544b27bd32c0e2a8f9096a]
2018-03-27 09:43:17,865 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = cokcekenasd alias=this0_
2018-03-27 09:43:17,866 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = cokcekenasd
2018-03-27 09:43:17,867 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 09:43:17,869 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 09:43:17,870 [5] DEBUG NHibernate.Type.StringType - binding 'cokcekenasd' to parameter: 0
2018-03-27 09:43:17,872 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'cokcekenasd' [Type: String (4000:0:0)]
2018-03-27 09:43:17,873 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:43:17,876 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 1 ms
2018-03-27 09:43:17,878 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 09:43:17,879 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 09:43:17,881 [5] DEBUG NHibernate.Loader.Loader - done processing result set (0 rows)
2018-03-27 09:43:17,882 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 09:43:17,883 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 8 ms
2018-03-27 09:43:17,884 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 09:43:17,886 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 09:43:17,887 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:43:17,888 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 0
2018-03-27 09:43:17,890 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 09:43:17,891 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 09:43:17,892 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 09:43:17,894 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=1aa6cf86-4900-43be-b75d-f17c0e36812d] running ISession.Dispose()
2018-03-27 09:43:17,895 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=1aa6cf86-4900-43be-b75d-f17c0e36812d] executing real Dispose(True)
2018-03-27 09:43:17,896 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 09:43:17,897 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 09:43:22,109 [5] ERROR Password.Infrastructure.Services.Log4Net - Token not found with username: cokcekenasd
Password.Domain.Model.Exception.UserNotFoundException: Token not found with username: cokcekenasd
   at Password.Domain.Service.UserService.GetUserWithUsername(String username) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\UserService.cs:line 21
   at Password.Domain.Service.AuthenticationService.AreValidUserCredentials(String username, String password) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\AuthenticationService.cs:line 33
   at Password.UI.Controllers.HomeController.Login(UserCredentialModel model) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Password\Controllers\HomeController.cs:line 35
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c.<BeginInvokeSynchronousActionMethod>b__9_0(IAsyncResult asyncResult, ActionInvocation innerInvokeState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__11_0()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass11_1.<InvokeActionMethodFilterAsynchronouslyRecursive>b__2()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass7_0.<BeginInvokeActionMethodWithFilters>b__1(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_6.<BeginInvokeAction>b__3()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_1.<BeginInvokeAction>b__5(IAsyncResult asyncResult)
2018-03-27 09:43:53,729 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:asdsa, password:sad
2018-03-27 09:44:01,629 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 09:44:01,635 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:44:01,637 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 09:44:01,638 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:44:01,640 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 09:44:01,641 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 09:44:01,642 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 09:44:01,644 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 09:44:01,646 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:44:01,650 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 09:44:01,651 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:44:01,653 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 09:44:01,654 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 09:44:01,656 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 09:44:01,657 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 09:44:01,659 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:44:01,661 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 09:44:01,662 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 09:44:01,664 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:44:01,665 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:44:01,667 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:44:01,669 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:44:01,679 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 09:44:01,680 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:44:01,681 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:44:01,683 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:44:01,684 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:44:01,686 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:44:01,687 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:44:01,792 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 09:44:01,793 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 09:44:01,795 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 09:44:01,796 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 09:44:01,808 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:44:01,810 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:44:01,812 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:44:01,813 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:44:01,815 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:44:01,816 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:44:01,818 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:44:01,823 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:44:01,824 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 09:44:01,827 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:0a53c404-f8fd-4115-b6f1-fd8c496c6c35
Error Number:2714,State:6,Class:16
2018-03-27 09:44:01,829 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 09:44:01,830 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:44:01,832 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:44:01,834 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:44:01,835 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:44:01,837 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:44:01,839 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:44:01,840 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:44:01,842 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:44:01,843 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:44:01,846 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 09:44:01,847 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 09:44:01,848 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:44:01,850 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:44:01,852 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:44:01,854 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 09:44:01,857 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 09:44:01,858 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 09:44:01,860 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 09:44:01,863 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 09:44:01,863 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 09:44:01,865 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 09:44:01,866 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 09:44:01,868 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 09:44:01,869 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 09:44:01,871 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:44:01,872 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 09:44:01,874 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 09:44:01,875 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 09:44:01,877 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 09:44:01,878 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:44:01,880 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 09:44:01,881 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 09:44:01,883 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 09:44:01,884 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 09:44:01,886 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 09:44:01,887 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 09:44:01,889 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:44:01,917 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:44:01,918 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:44:01,920 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 09:44:01,921 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 09:44:01,923 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:44:01,925 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 09:44:01,926 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 09:44:01,928 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 09:44:01,929 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 09:44:01,931 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 09:44:01,932 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 09:44:01,934 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 09:44:01,936 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 09:44:01,937 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:44:01,939 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:44:01,941 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:44:01,942 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:44:01,943 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 09:44:01,945 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:44:01,946 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:44:01,947 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:44:01,949 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 09:44:01,950 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 09:44:01,951 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 09:44:01,953 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 09:44:01,954 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 09:44:01,955 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 09:44:01,956 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:44:01,958 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:44:01,959 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:44:01,960 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:44:01,962 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 09:44:01,963 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:44:01,964 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:44:01,965 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:44:01,967 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 478f2e156b674f93b40014b7701ee0f6(unnamed)
2018-03-27 09:44:01,968 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 09:44:01,970 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 09:44:01,971 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 09:44:01,972 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 09:44:01,973 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 09:44:01,975 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=9917071b-86d9-4abf-859e-3ad202bc3cf4] opened session at timestamp: 636577406419, for session factory: [/478f2e156b674f93b40014b7701ee0f6]
2018-03-27 09:44:01,976 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = asdsa alias=this0_
2018-03-27 09:44:01,978 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = asdsa
2018-03-27 09:44:01,979 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 09:44:01,980 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 09:44:01,981 [5] DEBUG NHibernate.Type.StringType - binding 'asdsa' to parameter: 0
2018-03-27 09:44:01,983 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'asdsa' [Type: String (4000:0:0)]
2018-03-27 09:44:01,984 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:44:01,988 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-27 09:44:01,989 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 09:44:01,990 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 09:44:01,991 [5] DEBUG NHibernate.Loader.Loader - done processing result set (0 rows)
2018-03-27 09:44:01,992 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 09:44:01,993 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 7 ms
2018-03-27 09:44:01,994 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 09:44:01,995 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 09:44:01,996 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:44:01,997 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 0
2018-03-27 09:44:01,998 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 09:44:02,000 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 09:44:02,001 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 09:44:02,002 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=9917071b-86d9-4abf-859e-3ad202bc3cf4] running ISession.Dispose()
2018-03-27 09:44:02,003 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=9917071b-86d9-4abf-859e-3ad202bc3cf4] executing real Dispose(True)
2018-03-27 09:44:02,004 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 09:44:02,005 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 09:44:04,926 [5] ERROR Password.Infrastructure.Services.Log4Net - Token not found with username: asdsa
Password.Domain.Model.Exception.UserNotFoundException: Token not found with username: asdsa
   at Password.Domain.Service.UserService.GetUserWithUsername(String username) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\UserService.cs:line 21
   at Password.Domain.Service.AuthenticationService.AreValidUserCredentials(String username, String password) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\AuthenticationService.cs:line 33
   at Password.UI.Controllers.HomeController.Login(UserCredentialModel model) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Password\Controllers\HomeController.cs:line 35
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c.<BeginInvokeSynchronousActionMethod>b__9_0(IAsyncResult asyncResult, ActionInvocation innerInvokeState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__11_0()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass11_1.<InvokeActionMethodFilterAsynchronouslyRecursive>b__2()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass7_0.<BeginInvokeActionMethodWithFilters>b__1(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_6.<BeginInvokeAction>b__3()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_1.<BeginInvokeAction>b__5(IAsyncResult asyncResult)
2018-03-27 09:49:49,642 [6] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:asd, password:
2018-03-27 09:49:52,972 [6] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-27 09:49:52,976 [6] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-27 09:49:52,979 [6] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-27 09:49:52,981 [6] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-27 09:49:53,077 [6] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 09:49:53,439 [6] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:49:53,470 [6] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 09:49:53,489 [6] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:49:53,501 [6] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 09:49:53,503 [6] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 09:49:53,508 [6] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 09:49:53,513 [6] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 09:49:53,515 [6] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:49:53,516 [6] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 09:49:53,518 [6] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:49:53,519 [6] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 09:49:53,520 [6] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 09:49:53,522 [6] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 09:49:53,523 [6] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 09:49:53,526 [6] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:49:53,529 [6] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 09:49:53,531 [6] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 09:49:53,533 [6] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:49:53,534 [6] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:49:53,536 [6] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:49:53,538 [6] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:49:53,579 [6] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 09:49:53,583 [6] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:49:53,585 [6] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:49:53,586 [6] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:49:53,588 [6] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:49:53,591 [6] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:49:53,594 [6] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:49:53,718 [6] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 09:49:53,720 [6] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 09:49:53,721 [6] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 09:49:53,722 [6] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 09:49:53,736 [6] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:49:53,742 [6] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:49:53,744 [6] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:49:53,745 [6] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:49:53,747 [6] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:49:53,749 [6] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:49:53,750 [6] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:49:53,757 [6] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:49:53,764 [6] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 09:49:53,770 [6] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:41f9bd7c-a52e-4559-ad06-4773724afc60
Error Number:2714,State:6,Class:16
2018-03-27 09:49:53,775 [6] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 09:49:53,777 [6] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:49:53,778 [6] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:49:53,779 [6] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:49:53,781 [6] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:49:53,782 [6] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:49:53,784 [6] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:49:53,785 [6] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:49:53,796 [6] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:49:53,801 [6] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:49:53,847 [6] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 09:49:53,849 [6] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 09:49:53,851 [6] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:49:53,853 [6] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:49:53,854 [6] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:49:53,856 [6] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 09:49:53,858 [6] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 09:49:53,860 [6] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 09:49:53,861 [6] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 09:49:53,862 [6] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 09:49:53,864 [6] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 09:49:53,865 [6] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 09:49:53,867 [6] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 09:49:53,869 [6] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 09:49:53,872 [6] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 09:49:53,873 [6] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:49:53,875 [6] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 09:49:53,877 [6] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 09:49:53,878 [6] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 09:49:53,880 [6] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 09:49:53,882 [6] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:49:53,884 [6] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 09:49:53,885 [6] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 09:49:53,887 [6] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 09:49:53,896 [6] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 09:49:53,898 [6] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 09:49:53,900 [6] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 09:49:53,902 [6] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:49:53,940 [6] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:49:53,943 [6] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:49:53,973 [6] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 09:49:53,985 [6] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 09:49:54,003 [6] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:49:54,005 [6] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 09:49:54,007 [6] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 09:49:54,037 [6] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 09:49:54,039 [6] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 09:49:54,040 [6] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 09:49:54,041 [6] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 09:49:54,042 [6] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 09:49:54,043 [6] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 09:49:54,045 [6] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:49:54,071 [6] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:49:54,073 [6] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:49:54,074 [6] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:49:54,075 [6] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 09:49:54,076 [6] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:49:54,079 [6] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:49:54,081 [6] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:49:54,083 [6] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 09:49:54,084 [6] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 09:49:54,085 [6] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 09:49:54,086 [6] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 09:49:54,087 [6] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 09:49:54,089 [6] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 09:49:54,090 [6] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:49:54,091 [6] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:49:54,092 [6] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:49:54,093 [6] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:49:54,094 [6] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 09:49:54,096 [6] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:49:54,098 [6] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:49:54,099 [6] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:49:54,101 [6] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-27 09:49:54,103 [6] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: e1aa299e9043495d94d90a410ece9c93(unnamed)
2018-03-27 09:49:54,104 [6] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 09:49:54,105 [6] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 09:49:54,109 [6] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 09:49:54,110 [6] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 09:49:54,112 [6] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 09:49:54,125 [6] DEBUG NHibernate.Impl.SessionImpl - [session-id=263b60ad-f6e0-466e-85d7-6cc1a54c423c] opened session at timestamp: 636577409941, for session factory: [/e1aa299e9043495d94d90a410ece9c93]
2018-03-27 09:49:54,175 [6] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = asd alias=this0_
2018-03-27 09:49:54,183 [6] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = asd
2018-03-27 09:49:54,216 [6] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 09:49:54,217 [6] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 09:49:54,220 [6] DEBUG NHibernate.Type.StringType - binding 'asd' to parameter: 0
2018-03-27 09:49:54,226 [6] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'asd' [Type: String (4000:0:0)]
2018-03-27 09:49:54,229 [6] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:49:54,235 [6] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 3 ms
2018-03-27 09:49:54,237 [6] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 09:49:54,239 [6] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 09:49:54,241 [6] DEBUG NHibernate.Loader.Loader - done processing result set (0 rows)
2018-03-27 09:49:54,243 [6] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 09:49:54,244 [6] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 12 ms
2018-03-27 09:49:54,246 [6] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 09:49:54,249 [6] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 09:49:54,250 [6] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:49:54,252 [6] DEBUG NHibernate.Loader.Loader - total objects hydrated: 0
2018-03-27 09:49:54,254 [6] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 09:49:54,255 [6] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 09:49:54,257 [6] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 09:49:54,260 [6] DEBUG NHibernate.Impl.SessionImpl - [session-id=263b60ad-f6e0-466e-85d7-6cc1a54c423c] running ISession.Dispose()
2018-03-27 09:49:54,261 [6] DEBUG NHibernate.Impl.SessionImpl - [session-id=263b60ad-f6e0-466e-85d7-6cc1a54c423c] executing real Dispose(True)
2018-03-27 09:49:54,264 [6] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 09:49:54,266 [6] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 09:49:58,482 [6] ERROR Password.Infrastructure.Services.Log4Net - Token not found with username: asd
Password.Domain.Model.Exception.UserNotFoundException: Token not found with username: asd
   at Password.Domain.Service.UserService.GetUserWithUsername(String username) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\UserService.cs:line 21
   at Password.Domain.Service.AuthenticationService.AreValidUserCredentials(String username, String password) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\AuthenticationService.cs:line 33
   at Password.UI.Controllers.HomeController.Login(UserCredentialModel model) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Password\Controllers\HomeController.cs:line 35
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c.<BeginInvokeSynchronousActionMethod>b__9_0(IAsyncResult asyncResult, ActionInvocation innerInvokeState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__11_0()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass11_1.<InvokeActionMethodFilterAsynchronouslyRecursive>b__2()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass7_0.<BeginInvokeActionMethodWithFilters>b__1(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_6.<BeginInvokeAction>b__3()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_1.<BeginInvokeAction>b__5(IAsyncResult asyncResult)
2018-03-27 09:58:18,990 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:asd, password:
2018-03-27 09:58:20,825 [5] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-27 09:58:20,829 [5] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-27 09:58:20,831 [5] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-27 09:58:20,833 [5] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-27 09:58:20,930 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 09:58:21,328 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:21,357 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 09:58:21,374 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:58:21,385 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 09:58:21,387 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 09:58:21,392 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 09:58:21,398 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 09:58:21,399 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:21,401 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 09:58:21,403 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:58:21,404 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 09:58:21,406 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 09:58:21,407 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 09:58:21,409 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 09:58:21,411 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:21,414 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 09:58:21,416 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 09:58:21,418 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:58:21,420 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:58:21,422 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:21,424 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:58:21,463 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 09:58:21,470 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:58:21,472 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:58:21,473 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:58:21,474 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:58:21,476 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:58:21,479 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:58:21,701 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 09:58:21,703 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 09:58:21,704 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 09:58:21,705 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 09:58:21,721 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:58:21,726 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:21,727 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:21,729 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:21,730 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:21,732 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:21,734 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:21,740 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:58:21,748 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 09:58:21,752 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:51d741f4-5ca9-4312-9176-11bff236451e
Error Number:2714,State:6,Class:16
2018-03-27 09:58:21,757 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 09:58:21,758 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:58:21,760 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:58:21,761 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:58:21,763 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:58:21,765 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:58:21,766 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:58:21,768 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:58:21,780 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:21,786 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:21,850 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 09:58:21,852 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 09:58:21,854 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:58:21,855 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:58:21,857 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:21,859 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 09:58:21,861 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 09:58:21,863 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 09:58:21,865 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 09:58:21,866 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 09:58:21,868 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 09:58:21,869 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 09:58:21,871 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 09:58:21,874 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 09:58:21,877 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 09:58:21,879 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:58:21,881 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 09:58:21,883 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 09:58:21,885 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 09:58:21,887 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 09:58:21,889 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:58:21,891 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 09:58:21,892 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 09:58:21,895 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 09:58:21,907 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 09:58:21,909 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 09:58:21,910 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 09:58:21,912 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:58:21,950 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:58:21,953 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:21,982 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 09:58:21,994 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 09:58:22,011 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:22,013 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 09:58:22,015 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 09:58:22,051 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 09:58:22,053 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 09:58:22,054 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 09:58:22,055 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 09:58:22,057 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 09:58:22,058 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 09:58:22,061 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:58:22,093 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:58:22,096 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:58:22,098 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:58:22,100 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 09:58:22,101 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:58:22,104 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:58:22,106 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:58:22,109 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 09:58:22,111 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 09:58:22,112 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 09:58:22,114 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 09:58:22,115 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 09:58:22,117 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 09:58:22,118 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:58:22,120 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:58:22,121 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:58:22,123 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:58:22,124 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 09:58:22,125 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:58:22,127 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:58:22,128 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:58:22,130 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-27 09:58:22,133 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: e63da77866894251b0374f89ea55e6b8(unnamed)
2018-03-27 09:58:22,134 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 09:58:22,136 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 09:58:22,140 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 09:58:22,142 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 09:58:22,145 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 09:58:22,161 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=e7b2672c-bb47-4333-a01a-91abfcf53ebd] opened session at timestamp: 636577415021, for session factory: [/e63da77866894251b0374f89ea55e6b8]
2018-03-27 09:58:22,206 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = asd alias=this0_
2018-03-27 09:58:22,214 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = asd
2018-03-27 09:58:22,244 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 09:58:22,246 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 09:58:22,249 [5] DEBUG NHibernate.Type.StringType - binding 'asd' to parameter: 0
2018-03-27 09:58:22,255 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'asd' [Type: String (4000:0:0)]
2018-03-27 09:58:22,258 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:58:22,263 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 3 ms
2018-03-27 09:58:22,265 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 09:58:22,268 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 09:58:22,269 [5] DEBUG NHibernate.Loader.Loader - done processing result set (0 rows)
2018-03-27 09:58:22,271 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 09:58:22,273 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 12 ms
2018-03-27 09:58:22,275 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 09:58:22,277 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 09:58:22,278 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:58:22,281 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 0
2018-03-27 09:58:22,282 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 09:58:22,284 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 09:58:22,286 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 09:58:22,289 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=e7b2672c-bb47-4333-a01a-91abfcf53ebd] running ISession.Dispose()
2018-03-27 09:58:22,291 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=e7b2672c-bb47-4333-a01a-91abfcf53ebd] executing real Dispose(True)
2018-03-27 09:58:22,293 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 09:58:22,295 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 09:58:26,234 [5] ERROR Password.Infrastructure.Services.Log4Net - Token not found with username: asd
Password.Domain.Model.Exception.UserNotFoundException: Token not found with username: asd
   at Password.Domain.Service.UserService.GetUserWithUsername(String username) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\UserService.cs:line 21
   at Password.Domain.Service.AuthenticationService.AreValidUserCredentials(String username, String password) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\AuthenticationService.cs:line 33
   at Password.UI.Controllers.HomeController.Login(UserCredentialModel model) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Password\Controllers\HomeController.cs:line 35
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c.<BeginInvokeSynchronousActionMethod>b__9_0(IAsyncResult asyncResult, ActionInvocation innerInvokeState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__11_0()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass11_1.<InvokeActionMethodFilterAsynchronouslyRecursive>b__2()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass7_0.<BeginInvokeActionMethodWithFilters>b__1(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_6.<BeginInvokeAction>b__3()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_1.<BeginInvokeAction>b__5(IAsyncResult asyncResult)
2018-03-27 09:58:48,149 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:asds, password:as
2018-03-27 09:58:49,518 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 09:58:49,520 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:49,521 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 09:58:49,523 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:58:49,526 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 09:58:49,528 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 09:58:49,530 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 09:58:49,531 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 09:58:49,533 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:49,535 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 09:58:49,537 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 09:58:49,538 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 09:58:49,540 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 09:58:49,542 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 09:58:49,543 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 09:58:49,545 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:49,546 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 09:58:49,548 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 09:58:49,550 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:58:49,552 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:58:49,554 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:49,555 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:58:49,579 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 09:58:49,580 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:58:49,581 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:58:49,582 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:58:49,584 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:58:49,585 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:58:49,586 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:58:49,692 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 09:58:49,694 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 09:58:49,695 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 09:58:49,696 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 09:58:49,707 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:58:49,709 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:49,711 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:49,712 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:49,714 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:49,715 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:49,717 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:49,722 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 09:58:49,724 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 09:58:49,727 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:51d741f4-5ca9-4312-9176-11bff236451e
Error Number:2714,State:6,Class:16
2018-03-27 09:58:49,728 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 09:58:49,730 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:58:49,731 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 09:58:49,733 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 09:58:49,734 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 09:58:49,736 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 09:58:49,737 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 09:58:49,739 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 09:58:49,740 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:49,743 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:49,743 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 09:58:49,745 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 09:58:49,746 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 09:58:49,748 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 09:58:49,750 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:49,751 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 09:58:49,753 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 09:58:49,755 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 09:58:49,756 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 09:58:49,757 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 09:58:49,759 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 09:58:49,761 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 09:58:49,762 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 09:58:49,763 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 09:58:49,764 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 09:58:49,766 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:58:49,767 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 09:58:49,769 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 09:58:49,770 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 09:58:49,771 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 09:58:49,772 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 09:58:49,773 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 09:58:49,775 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 09:58:49,776 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 09:58:49,778 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 09:58:49,779 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 09:58:49,780 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 09:58:49,783 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:58:49,811 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:58:49,812 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:49,815 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 09:58:49,815 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 09:58:49,816 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 09:58:49,817 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 09:58:49,819 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 09:58:49,821 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 09:58:49,822 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 09:58:49,823 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 09:58:49,825 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 09:58:49,826 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 09:58:49,828 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 09:58:49,829 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:58:49,831 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:58:49,833 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:58:49,835 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:58:49,836 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 09:58:49,837 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 09:58:49,839 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:58:49,840 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 09:58:49,841 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 09:58:49,842 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 09:58:49,844 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 09:58:49,846 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 09:58:49,847 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 09:58:49,848 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 09:58:49,850 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 09:58:49,851 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:58:49,854 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:58:49,854 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:58:49,855 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 09:58:49,857 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 09:58:49,858 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:58:49,860 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 09:58:49,862 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: e0c0a9107f3947628e75cc3ade1a4fc0(unnamed)
2018-03-27 09:58:49,863 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 09:58:49,864 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 09:58:49,866 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 09:58:49,868 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 09:58:49,869 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 09:58:49,870 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=f0b81029-2d5a-4579-aa3d-fca80a85305a] opened session at timestamp: 636577415298, for session factory: [/e0c0a9107f3947628e75cc3ade1a4fc0]
2018-03-27 09:58:49,872 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = asds alias=this0_
2018-03-27 09:58:49,873 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = asds
2018-03-27 09:58:49,875 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 09:58:49,876 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 09:58:49,878 [5] DEBUG NHibernate.Type.StringType - binding 'asds' to parameter: 0
2018-03-27 09:58:49,879 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'asds' [Type: String (4000:0:0)]
2018-03-27 09:58:49,881 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 09:58:49,885 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-27 09:58:49,886 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 09:58:49,887 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 09:58:49,888 [5] DEBUG NHibernate.Loader.Loader - done processing result set (0 rows)
2018-03-27 09:58:49,889 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 09:58:49,891 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 9 ms
2018-03-27 09:58:49,892 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 09:58:49,893 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 09:58:49,894 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 09:58:49,895 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 0
2018-03-27 09:58:49,896 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 09:58:49,897 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 09:58:49,898 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 09:58:49,899 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=f0b81029-2d5a-4579-aa3d-fca80a85305a] running ISession.Dispose()
2018-03-27 09:58:49,901 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=f0b81029-2d5a-4579-aa3d-fca80a85305a] executing real Dispose(True)
2018-03-27 09:58:49,902 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 09:58:49,903 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 09:58:53,418 [5] ERROR Password.Infrastructure.Services.Log4Net - Token not found with username: asds
Password.Domain.Model.Exception.UserNotFoundException: Token not found with username: asds
   at Password.Domain.Service.UserService.GetUserWithUsername(String username) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\UserService.cs:line 21
   at Password.Domain.Service.AuthenticationService.AreValidUserCredentials(String username, String password) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\AuthenticationService.cs:line 33
   at Password.UI.Controllers.HomeController.Login(UserCredentialModel model) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Password\Controllers\HomeController.cs:line 35
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c.<BeginInvokeSynchronousActionMethod>b__9_0(IAsyncResult asyncResult, ActionInvocation innerInvokeState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__11_0()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass11_1.<InvokeActionMethodFilterAsynchronouslyRecursive>b__2()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass7_0.<BeginInvokeActionMethodWithFilters>b__1(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_6.<BeginInvokeAction>b__3()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_1.<BeginInvokeAction>b__5(IAsyncResult asyncResult)
2018-03-27 10:02:38,146 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:df, password:asfknas+
2018-03-27 10:02:39,284 [5] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-27 10:02:39,288 [5] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-27 10:02:39,290 [5] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-27 10:02:39,293 [5] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-27 10:02:39,405 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 10:02:39,776 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:02:39,810 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 10:02:39,830 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:02:39,843 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 10:02:39,844 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 10:02:39,851 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 10:02:39,857 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 10:02:39,859 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:02:39,860 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 10:02:39,862 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:02:39,863 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 10:02:39,864 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 10:02:39,865 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 10:02:39,866 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 10:02:39,869 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:02:39,873 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 10:02:39,875 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 10:02:39,877 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:02:39,879 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:02:39,881 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:02:39,882 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:02:39,944 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 10:02:39,949 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:02:39,950 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:02:39,952 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:02:39,953 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:02:39,956 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:02:39,958 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:02:40,086 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 10:02:40,088 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 10:02:40,089 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 10:02:40,091 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 10:02:40,105 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:02:40,111 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:02:40,112 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:02:40,114 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:02:40,115 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:02:40,117 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:02:40,119 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:02:40,127 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:02:40,135 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 10:02:40,153 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:a6dbc207-cc49-4445-b411-d9e7732f7c4c
Error Number:2714,State:6,Class:16
2018-03-27 10:02:40,158 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 10:02:40,160 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:02:40,161 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:02:40,163 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:02:40,164 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:02:40,165 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:02:40,166 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:02:40,167 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:02:40,178 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:02:40,183 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:02:40,230 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 10:02:40,232 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 10:02:40,234 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:02:40,235 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:02:40,236 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:02:40,238 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 10:02:40,241 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 10:02:40,241 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 10:02:40,242 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 10:02:40,244 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 10:02:40,245 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 10:02:40,247 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 10:02:40,249 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 10:02:40,252 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 10:02:40,255 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 10:02:40,259 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:02:40,261 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 10:02:40,264 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 10:02:40,265 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 10:02:40,266 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 10:02:40,269 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:02:40,272 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 10:02:40,273 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 10:02:40,275 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 10:02:40,288 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 10:02:40,289 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 10:02:40,291 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 10:02:40,293 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:02:40,326 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:02:40,330 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:02:40,368 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 10:02:40,381 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 10:02:40,397 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:02:40,399 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 10:02:40,400 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 10:02:40,435 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 10:02:40,437 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 10:02:40,438 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 10:02:40,439 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 10:02:40,440 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 10:02:40,441 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 10:02:40,443 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:02:40,467 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:02:40,468 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:02:40,470 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:02:40,471 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 10:02:40,473 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:02:40,475 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:02:40,477 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:02:40,478 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 10:02:40,480 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 10:02:40,481 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 10:02:40,482 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 10:02:40,483 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 10:02:40,484 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 10:02:40,486 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:02:40,487 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:02:40,488 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:02:40,489 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:02:40,490 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 10:02:40,491 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:02:40,492 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:02:40,493 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:02:40,495 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-27 10:02:40,497 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: f4d496c3b7794b9d983b73acbae67758(unnamed)
2018-03-27 10:02:40,498 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 10:02:40,499 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 10:02:40,502 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 10:02:40,504 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 10:02:40,508 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 10:02:40,523 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=533905e1-d1da-4a1a-bd60-4801289565d4] opened session at timestamp: 636577417605, for session factory: [/f4d496c3b7794b9d983b73acbae67758]
2018-03-27 10:02:40,581 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = df alias=this0_
2018-03-27 10:02:40,589 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = df
2018-03-27 10:02:40,623 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 10:02:40,624 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 10:02:40,626 [5] DEBUG NHibernate.Type.StringType - binding 'df' to parameter: 0
2018-03-27 10:02:40,632 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'df' [Type: String (4000:0:0)]
2018-03-27 10:02:40,635 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:02:40,641 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-27 10:02:40,643 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 10:02:40,645 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 10:02:40,646 [5] DEBUG NHibernate.Loader.Loader - done processing result set (0 rows)
2018-03-27 10:02:40,648 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 10:02:40,650 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 11 ms
2018-03-27 10:02:40,651 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 10:02:40,653 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 10:02:40,655 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:02:40,657 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 0
2018-03-27 10:02:40,658 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 10:02:40,660 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 10:02:40,662 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 10:02:40,666 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=533905e1-d1da-4a1a-bd60-4801289565d4] running ISession.Dispose()
2018-03-27 10:02:40,668 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=533905e1-d1da-4a1a-bd60-4801289565d4] executing real Dispose(True)
2018-03-27 10:02:40,670 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 10:02:40,671 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 10:02:47,903 [5] ERROR Password.Infrastructure.Services.Log4Net - Token not found with username: df
Password.Domain.Model.Exception.UserNotFoundException: Token not found with username: df
   at Password.Domain.Service.UserService.GetUserWithUsername(String username) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\UserService.cs:line 21
   at Password.Domain.Service.AuthenticationService.AreValidUserCredentials(String username, String password) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\AuthenticationService.cs:line 33
   at Password.UI.Controllers.HomeController.Login(UserCredentialModel model) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Password\Controllers\HomeController.cs:line 35
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c.<BeginInvokeSynchronousActionMethod>b__9_0(IAsyncResult asyncResult, ActionInvocation innerInvokeState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__11_0()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass11_1.<InvokeActionMethodFilterAsynchronouslyRecursive>b__2()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass7_0.<BeginInvokeActionMethodWithFilters>b__1(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_6.<BeginInvokeAction>b__3()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_1.<BeginInvokeAction>b__5(IAsyncResult asyncResult)
2018-03-27 10:17:32,543 [10] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:asds, password:
2018-03-27 10:17:33,338 [10] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-27 10:17:33,342 [10] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-27 10:17:33,344 [10] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-27 10:17:33,346 [10] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-27 10:17:33,442 [10] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 10:17:33,893 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:17:33,927 [10] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 10:17:33,949 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:17:33,961 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 10:17:33,964 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 10:17:33,970 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 10:17:33,977 [10] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 10:17:33,979 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:17:33,981 [10] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 10:17:33,983 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:17:33,986 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 10:17:33,987 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 10:17:33,989 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 10:17:33,990 [10] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 10:17:33,992 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:17:33,996 [10] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 10:17:33,999 [10] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 10:17:34,002 [10] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:17:34,004 [10] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:17:34,007 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:17:34,009 [10] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:17:34,052 [10] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 10:17:34,056 [10] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:17:34,058 [10] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:17:34,060 [10] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:17:34,061 [10] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:17:34,064 [10] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:17:34,068 [10] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:17:34,197 [10] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 10:17:34,199 [10] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 10:17:34,201 [10] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 10:17:34,204 [10] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 10:17:34,221 [10] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:17:34,227 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:17:34,230 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:17:34,231 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:17:34,234 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:17:34,236 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:17:34,238 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:17:34,244 [10] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:17:34,253 [10] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 10:17:34,259 [10] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:2b3f4af3-18b6-4757-8f5c-7ac744e28af1
Error Number:2714,State:6,Class:16
2018-03-27 10:17:34,265 [10] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 10:17:34,268 [10] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:17:34,270 [10] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:17:34,272 [10] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:17:34,273 [10] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:17:34,275 [10] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:17:34,276 [10] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:17:34,277 [10] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:17:34,288 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:17:34,294 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:17:34,344 [10] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 10:17:34,347 [10] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 10:17:34,348 [10] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:17:34,350 [10] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:17:34,351 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:17:34,354 [10] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 10:17:34,356 [10] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 10:17:34,358 [10] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 10:17:34,359 [10] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 10:17:34,361 [10] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 10:17:34,362 [10] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 10:17:34,364 [10] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 10:17:34,366 [10] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 10:17:34,369 [10] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 10:17:34,371 [10] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 10:17:34,373 [10] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:17:34,375 [10] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 10:17:34,377 [10] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 10:17:34,378 [10] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 10:17:34,380 [10] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 10:17:34,382 [10] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:17:34,383 [10] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 10:17:34,384 [10] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 10:17:34,386 [10] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 10:17:34,396 [10] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 10:17:34,398 [10] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 10:17:34,400 [10] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 10:17:34,402 [10] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:17:34,436 [10] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:17:34,439 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:17:34,469 [10] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 10:17:34,480 [10] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 10:17:34,497 [10] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:17:34,499 [10] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 10:17:34,500 [10] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 10:17:34,529 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 10:17:34,530 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 10:17:34,532 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 10:17:34,533 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 10:17:34,535 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 10:17:34,536 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 10:17:34,538 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:17:34,562 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:17:34,563 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:17:34,565 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:17:34,566 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 10:17:34,568 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:17:34,571 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:17:34,573 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:17:34,575 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 10:17:34,576 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 10:17:34,577 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 10:17:34,579 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 10:17:34,580 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 10:17:34,581 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 10:17:34,582 [10] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:17:34,584 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:17:34,586 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:17:34,587 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:17:34,588 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 10:17:34,590 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:17:34,591 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:17:34,593 [10] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:17:34,595 [10] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-27 10:17:34,597 [10] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 379b236466e94763970af10e62f1af85(unnamed)
2018-03-27 10:17:34,599 [10] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 10:17:34,600 [10] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 10:17:34,604 [10] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 10:17:34,605 [10] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 10:17:34,608 [10] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 10:17:34,623 [10] DEBUG NHibernate.Impl.SessionImpl - [session-id=ee5081ad-a88a-4995-aed9-de0e6f106ff1] opened session at timestamp: 636577426546, for session factory: [/379b236466e94763970af10e62f1af85]
2018-03-27 10:17:34,679 [10] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = asds alias=this0_
2018-03-27 10:17:34,687 [10] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = asds
2018-03-27 10:17:34,720 [10] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 10:17:34,722 [10] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 10:17:34,726 [10] DEBUG NHibernate.Type.StringType - binding 'asds' to parameter: 0
2018-03-27 10:17:34,732 [10] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'asds' [Type: String (4000:0:0)]
2018-03-27 10:17:34,735 [10] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:17:34,740 [10] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-27 10:17:34,742 [10] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 10:17:34,745 [10] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 10:17:34,746 [10] DEBUG NHibernate.Loader.Loader - done processing result set (0 rows)
2018-03-27 10:17:34,748 [10] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 10:17:34,749 [10] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 11 ms
2018-03-27 10:17:34,752 [10] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 10:17:34,754 [10] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 10:17:34,756 [10] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:17:34,758 [10] DEBUG NHibernate.Loader.Loader - total objects hydrated: 0
2018-03-27 10:17:34,759 [10] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 10:17:34,761 [10] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 10:17:34,763 [10] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 10:17:34,766 [10] DEBUG NHibernate.Impl.SessionImpl - [session-id=ee5081ad-a88a-4995-aed9-de0e6f106ff1] running ISession.Dispose()
2018-03-27 10:17:34,768 [10] DEBUG NHibernate.Impl.SessionImpl - [session-id=ee5081ad-a88a-4995-aed9-de0e6f106ff1] executing real Dispose(True)
2018-03-27 10:17:34,770 [10] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 10:17:34,772 [10] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 10:17:37,658 [10] ERROR Password.Infrastructure.Services.Log4Net - Token not found with username: asds
Password.Domain.Model.Exception.UserNotFoundException: Token not found with username: asds
   at Password.Domain.Service.UserService.GetUserWithUsername(String username) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\UserService.cs:line 21
   at Password.Domain.Service.AuthenticationService.AreValidUserCredentials(String username, String password) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\AuthenticationService.cs:line 33
   at Password.UI.Controllers.HomeController.Login(UserCredentialModel model) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Password\Controllers\HomeController.cs:line 34
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c.<BeginInvokeSynchronousActionMethod>b__9_0(IAsyncResult asyncResult, ActionInvocation innerInvokeState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__11_0()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass11_1.<InvokeActionMethodFilterAsynchronouslyRecursive>b__2()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass7_0.<BeginInvokeActionMethodWithFilters>b__1(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_6.<BeginInvokeAction>b__3()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_1.<BeginInvokeAction>b__5(IAsyncResult asyncResult)
2018-03-27 10:21:11,303 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:asd, password:
2018-03-27 10:21:13,124 [5] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-27 10:21:13,128 [5] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-27 10:21:13,130 [5] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-27 10:21:13,133 [5] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-27 10:21:13,224 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 10:21:13,604 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:13,633 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 10:21:13,654 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:21:13,665 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 10:21:13,667 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 10:21:13,674 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 10:21:13,681 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 10:21:13,683 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:13,685 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 10:21:13,687 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:21:13,689 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 10:21:13,691 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 10:21:13,693 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 10:21:13,694 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 10:21:13,696 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:13,700 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 10:21:13,703 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 10:21:13,705 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:21:13,707 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:21:13,710 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:13,712 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:21:13,760 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 10:21:13,766 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:21:13,768 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:21:13,770 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:21:13,772 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:21:13,776 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:21:13,780 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:21:13,913 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 10:21:13,914 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 10:21:13,916 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 10:21:13,917 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 10:21:13,931 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:21:13,936 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:13,938 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:13,939 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:13,940 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:13,942 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:13,944 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:13,950 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:21:13,957 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 10:21:13,963 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:cd5c9035-2c86-456f-ab9f-a7c9e02628cb
Error Number:2714,State:6,Class:16
2018-03-27 10:21:13,969 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 10:21:13,970 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:21:13,972 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:21:13,973 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:21:13,975 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:21:13,976 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:21:13,976 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:21:13,979 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:21:13,989 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:13,993 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:14,037 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 10:21:14,039 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 10:21:14,040 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:21:14,042 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:21:14,043 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:14,045 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 10:21:14,046 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 10:21:14,048 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 10:21:14,049 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 10:21:14,051 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 10:21:14,052 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 10:21:14,053 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 10:21:14,055 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 10:21:14,057 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 10:21:14,058 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 10:21:14,060 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:21:14,061 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 10:21:14,063 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 10:21:14,064 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 10:21:14,065 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 10:21:14,067 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:21:14,069 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 10:21:14,070 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 10:21:14,072 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 10:21:14,082 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 10:21:14,084 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 10:21:14,087 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 10:21:14,089 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:21:14,134 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:21:14,138 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:14,181 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 10:21:14,195 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 10:21:14,221 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:14,223 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 10:21:14,225 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 10:21:14,256 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 10:21:14,258 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 10:21:14,259 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 10:21:14,260 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 10:21:14,261 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 10:21:14,263 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 10:21:14,264 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:21:14,286 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:21:14,288 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:21:14,289 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:21:14,290 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 10:21:14,292 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:21:14,294 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:21:14,295 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:21:14,297 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 10:21:14,298 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 10:21:14,300 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 10:21:14,301 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 10:21:14,303 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 10:21:14,305 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 10:21:14,306 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:21:14,308 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:21:14,309 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:21:14,311 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:21:14,312 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 10:21:14,314 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:21:14,315 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:21:14,317 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:21:14,319 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-27 10:21:14,320 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: a6c7c03cb58847cd8296688543ffa632(unnamed)
2018-03-27 10:21:14,322 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 10:21:14,323 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 10:21:14,327 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 10:21:14,329 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 10:21:14,332 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 10:21:14,344 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=6ebfc244-84ef-494d-af17-4e96b4a01fca] opened session at timestamp: 636577428743, for session factory: [/a6c7c03cb58847cd8296688543ffa632]
2018-03-27 10:21:14,382 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = asd alias=this0_
2018-03-27 10:21:14,390 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = asd
2018-03-27 10:21:14,424 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 10:21:14,426 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 10:21:14,429 [5] DEBUG NHibernate.Type.StringType - binding 'asd' to parameter: 0
2018-03-27 10:21:14,435 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'asd' [Type: String (4000:0:0)]
2018-03-27 10:21:14,438 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:21:14,443 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 3 ms
2018-03-27 10:21:14,445 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 10:21:14,447 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 10:21:14,449 [5] DEBUG NHibernate.Loader.Loader - done processing result set (0 rows)
2018-03-27 10:21:14,451 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 10:21:14,453 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 13 ms
2018-03-27 10:21:14,454 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 10:21:14,456 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 10:21:14,458 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:21:14,459 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 0
2018-03-27 10:21:14,461 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 10:21:14,463 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 10:21:14,465 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 10:21:14,468 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=6ebfc244-84ef-494d-af17-4e96b4a01fca] running ISession.Dispose()
2018-03-27 10:21:14,469 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=6ebfc244-84ef-494d-af17-4e96b4a01fca] executing real Dispose(True)
2018-03-27 10:21:14,471 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 10:21:14,473 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 10:21:15,654 [5] ERROR Password.Infrastructure.Services.Log4Net - Token not found with username: asd
Password.Domain.Model.Exception.UserNotFoundException: Token not found with username: asd
   at Password.Domain.Service.UserService.GetUserWithUsername(String username) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\UserService.cs:line 21
   at Password.Domain.Service.AuthenticationService.AreValidUserCredentials(String username, String password) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\AuthenticationService.cs:line 33
   at Password.UI.Controllers.HomeController.Login(UserCredentialModel model) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Password\Controllers\HomeController.cs:line 34
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c.<BeginInvokeSynchronousActionMethod>b__9_0(IAsyncResult asyncResult, ActionInvocation innerInvokeState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__11_0()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass11_1.<InvokeActionMethodFilterAsynchronouslyRecursive>b__2()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass7_0.<BeginInvokeActionMethodWithFilters>b__1(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_6.<BeginInvokeAction>b__3()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_1.<BeginInvokeAction>b__5(IAsyncResult asyncResult)
2018-03-27 10:21:41,306 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:asd, password:asd
2018-03-27 10:21:42,120 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 10:21:42,122 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:42,124 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 10:21:42,126 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:21:42,128 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 10:21:42,130 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 10:21:42,132 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 10:21:42,134 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 10:21:42,136 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:42,138 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 10:21:42,140 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:21:42,142 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 10:21:42,144 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 10:21:42,146 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 10:21:42,148 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 10:21:42,150 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:42,152 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 10:21:42,153 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 10:21:42,155 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:21:42,157 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:21:42,159 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:42,162 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:21:42,172 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 10:21:42,174 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:21:42,175 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:21:42,177 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:21:42,179 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:21:42,180 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:21:42,182 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:21:42,282 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 10:21:42,284 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 10:21:42,285 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 10:21:42,287 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 10:21:42,297 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:21:42,299 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:42,302 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:42,304 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:42,306 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:42,308 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:42,309 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:42,314 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:21:42,316 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 10:21:42,320 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:cd5c9035-2c86-456f-ab9f-a7c9e02628cb
Error Number:2714,State:6,Class:16
2018-03-27 10:21:42,322 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 10:21:42,324 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:21:42,326 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:21:42,327 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:21:42,329 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:21:42,330 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:21:42,332 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:21:42,334 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:21:42,336 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:42,338 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:42,340 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 10:21:42,342 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 10:21:42,344 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:21:42,346 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:21:42,348 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:42,349 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 10:21:42,351 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 10:21:42,352 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 10:21:42,354 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 10:21:42,355 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 10:21:42,356 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 10:21:42,357 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 10:21:42,359 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 10:21:42,360 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 10:21:42,362 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 10:21:42,363 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:21:42,364 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 10:21:42,366 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 10:21:42,367 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 10:21:42,368 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 10:21:42,369 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:21:42,371 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 10:21:42,372 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 10:21:42,373 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 10:21:42,375 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 10:21:42,376 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 10:21:42,377 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 10:21:42,379 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:21:42,408 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:21:42,410 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:42,411 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 10:21:42,413 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 10:21:42,414 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:21:42,416 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 10:21:42,417 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 10:21:42,419 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 10:21:42,420 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 10:21:42,421 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 10:21:42,423 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 10:21:42,424 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 10:21:42,425 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 10:21:42,427 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:21:42,428 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:21:42,430 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:21:42,431 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:21:42,432 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 10:21:42,434 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:21:42,435 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:21:42,437 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:21:42,438 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 10:21:42,439 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 10:21:42,441 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 10:21:42,443 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 10:21:42,444 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 10:21:42,446 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 10:21:42,447 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:21:42,448 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:21:42,450 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:21:42,451 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:21:42,452 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 10:21:42,454 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:21:42,455 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:21:42,456 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:21:42,458 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 22cf6f594abf4eadb28dfcd5c75fdfc5(unnamed)
2018-03-27 10:21:42,459 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 10:21:42,461 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 10:21:42,462 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 10:21:42,463 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 10:21:42,465 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 10:21:42,466 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=2cf5e728-9005-4f65-97c2-ece5d374e6bf] opened session at timestamp: 636577429024, for session factory: [/22cf6f594abf4eadb28dfcd5c75fdfc5]
2018-03-27 10:21:42,468 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = asd alias=this0_
2018-03-27 10:21:42,469 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = asd
2018-03-27 10:21:42,471 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 10:21:42,473 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 10:21:42,474 [5] DEBUG NHibernate.Type.StringType - binding 'asd' to parameter: 0
2018-03-27 10:21:42,476 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'asd' [Type: String (4000:0:0)]
2018-03-27 10:21:42,478 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:21:42,482 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-27 10:21:42,483 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 10:21:42,484 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 10:21:42,486 [5] DEBUG NHibernate.Loader.Loader - done processing result set (0 rows)
2018-03-27 10:21:42,487 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 10:21:42,489 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 9 ms
2018-03-27 10:21:42,490 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 10:21:42,491 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 10:21:42,492 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:21:42,494 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 0
2018-03-27 10:21:42,495 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 10:21:42,496 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 10:21:42,497 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 10:21:42,499 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=2cf5e728-9005-4f65-97c2-ece5d374e6bf] running ISession.Dispose()
2018-03-27 10:21:42,500 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=2cf5e728-9005-4f65-97c2-ece5d374e6bf] executing real Dispose(True)
2018-03-27 10:21:42,502 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 10:21:42,504 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 10:21:43,422 [5] ERROR Password.Infrastructure.Services.Log4Net - Token not found with username: asd
Password.Domain.Model.Exception.UserNotFoundException: Token not found with username: asd
   at Password.Domain.Service.UserService.GetUserWithUsername(String username) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\UserService.cs:line 21
   at Password.Domain.Service.AuthenticationService.AreValidUserCredentials(String username, String password) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\AuthenticationService.cs:line 33
   at Password.UI.Controllers.HomeController.Login(UserCredentialModel model) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Password\Controllers\HomeController.cs:line 34
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c.<BeginInvokeSynchronousActionMethod>b__9_0(IAsyncResult asyncResult, ActionInvocation innerInvokeState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__11_0()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass11_1.<InvokeActionMethodFilterAsynchronouslyRecursive>b__2()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass7_0.<BeginInvokeActionMethodWithFilters>b__1(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_6.<BeginInvokeAction>b__3()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_1.<BeginInvokeAction>b__5(IAsyncResult asyncResult)
2018-03-27 10:23:24,046 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:asd, password:asd
2018-03-27 10:23:24,782 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 10:23:24,784 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:24,787 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 10:23:24,788 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:23:24,790 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 10:23:24,791 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 10:23:24,792 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 10:23:24,794 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 10:23:24,796 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:24,798 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 10:23:24,799 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:23:24,801 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 10:23:24,802 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 10:23:24,804 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 10:23:24,805 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 10:23:24,807 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:24,808 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 10:23:24,810 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 10:23:24,811 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:23:24,813 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:23:24,815 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:24,816 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:23:24,827 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 10:23:24,828 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:23:24,830 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:23:24,831 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:23:24,832 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:23:24,833 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:23:24,835 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:23:24,943 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 10:23:24,945 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 10:23:24,946 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 10:23:24,948 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 10:23:24,959 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:23:24,961 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:24,962 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:24,964 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:24,966 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:24,968 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:24,969 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:24,975 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:23:24,977 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 10:23:24,981 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:cd5c9035-2c86-456f-ab9f-a7c9e02628cb
Error Number:2714,State:6,Class:16
2018-03-27 10:23:24,983 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 10:23:24,984 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:23:24,985 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:23:24,986 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:23:24,988 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:23:24,989 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:23:24,991 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:23:24,993 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:23:24,995 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:24,997 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:25,000 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 10:23:25,002 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 10:23:25,003 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:23:25,005 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:23:25,007 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:25,008 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 10:23:25,010 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 10:23:25,012 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 10:23:25,014 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 10:23:25,016 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 10:23:25,018 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 10:23:25,020 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 10:23:25,021 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 10:23:25,023 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 10:23:25,024 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 10:23:25,026 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:23:25,027 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 10:23:25,028 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 10:23:25,030 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 10:23:25,031 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 10:23:25,033 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:23:25,034 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 10:23:25,035 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 10:23:25,037 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 10:23:25,038 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 10:23:25,039 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 10:23:25,040 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 10:23:25,042 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:23:25,071 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:23:25,073 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:25,074 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 10:23:25,075 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 10:23:25,077 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:25,078 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 10:23:25,080 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 10:23:25,081 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 10:23:25,082 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 10:23:25,084 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 10:23:25,085 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 10:23:25,087 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 10:23:25,088 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 10:23:25,089 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:23:25,091 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:23:25,093 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:23:25,094 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:23:25,096 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 10:23:25,098 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:23:25,099 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:23:25,100 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:23:25,102 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 10:23:25,103 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 10:23:25,105 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 10:23:25,106 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 10:23:25,107 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 10:23:25,109 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 10:23:25,110 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:23:25,111 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:23:25,113 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:23:25,114 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:23:25,116 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 10:23:25,117 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:23:25,119 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:23:25,121 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:23:25,122 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 07d6dec0b9cb43218aec48691d0a5ec9(unnamed)
2018-03-27 10:23:25,123 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 10:23:25,125 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 10:23:25,126 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 10:23:25,127 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 10:23:25,129 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 10:23:25,130 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=27339232-e747-4429-9104-da42d7597e3c] opened session at timestamp: 636577430051, for session factory: [/07d6dec0b9cb43218aec48691d0a5ec9]
2018-03-27 10:23:25,132 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = asd alias=this0_
2018-03-27 10:23:25,134 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = asd
2018-03-27 10:23:25,135 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 10:23:25,136 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 10:23:25,138 [5] DEBUG NHibernate.Type.StringType - binding 'asd' to parameter: 0
2018-03-27 10:23:25,139 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'asd' [Type: String (4000:0:0)]
2018-03-27 10:23:25,141 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:23:25,145 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 3 ms
2018-03-27 10:23:25,147 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 10:23:25,149 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 10:23:25,150 [5] DEBUG NHibernate.Loader.Loader - done processing result set (0 rows)
2018-03-27 10:23:25,151 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 10:23:25,153 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 10 ms
2018-03-27 10:23:25,154 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 10:23:25,156 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 10:23:25,157 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:23:25,159 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 0
2018-03-27 10:23:25,160 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 10:23:25,161 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 10:23:25,163 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 10:23:25,164 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=27339232-e747-4429-9104-da42d7597e3c] running ISession.Dispose()
2018-03-27 10:23:25,166 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=27339232-e747-4429-9104-da42d7597e3c] executing real Dispose(True)
2018-03-27 10:23:25,167 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 10:23:25,169 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 10:23:26,605 [5] ERROR Password.Infrastructure.Services.Log4Net - Token not found with username: asd
Password.Domain.Model.Exception.UserNotFoundException: Token not found with username: asd
   at Password.Domain.Service.UserService.GetUserWithUsername(String username) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\UserService.cs:line 21
   at Password.Domain.Service.AuthenticationService.AreValidUserCredentials(String username, String password) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\AuthenticationService.cs:line 33
   at Password.UI.Controllers.HomeController.Login(UserCredentialModel model) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Password\Controllers\HomeController.cs:line 34
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c.<BeginInvokeSynchronousActionMethod>b__9_0(IAsyncResult asyncResult, ActionInvocation innerInvokeState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__11_0()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass11_1.<InvokeActionMethodFilterAsynchronouslyRecursive>b__2()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass7_0.<BeginInvokeActionMethodWithFilters>b__1(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_6.<BeginInvokeAction>b__3()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_1.<BeginInvokeAction>b__5(IAsyncResult asyncResult)
2018-03-27 10:23:33,562 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:asd, password:asd
2018-03-27 10:23:34,416 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 10:23:34,418 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:34,420 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 10:23:34,422 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:23:34,423 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 10:23:34,425 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 10:23:34,427 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 10:23:34,429 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 10:23:34,431 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:34,433 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 10:23:34,435 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:23:34,437 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 10:23:34,439 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 10:23:34,440 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 10:23:34,442 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 10:23:34,444 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:34,446 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 10:23:34,448 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 10:23:34,450 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:23:34,452 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:23:34,455 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:34,457 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:23:34,467 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 10:23:34,469 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:23:34,471 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:23:34,472 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:23:34,474 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:23:34,475 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:23:34,477 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:23:34,583 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 10:23:34,585 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 10:23:34,586 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 10:23:34,588 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 10:23:34,599 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:23:34,601 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:34,603 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:34,605 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:34,607 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:34,608 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:34,610 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:34,616 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:23:34,618 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 10:23:34,623 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:cd5c9035-2c86-456f-ab9f-a7c9e02628cb
Error Number:2714,State:6,Class:16
2018-03-27 10:23:34,625 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 10:23:34,626 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:23:34,628 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:23:34,630 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:23:34,632 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:23:34,633 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:23:34,635 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:23:34,638 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:23:34,640 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:34,642 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:34,644 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 10:23:34,646 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 10:23:34,648 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:23:34,650 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:23:34,651 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:34,654 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 10:23:34,655 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 10:23:34,657 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 10:23:34,659 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 10:23:34,661 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 10:23:34,662 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 10:23:34,664 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 10:23:34,666 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 10:23:34,667 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 10:23:34,669 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 10:23:34,683 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:23:34,685 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 10:23:34,686 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 10:23:34,688 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 10:23:34,690 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 10:23:34,691 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:23:34,693 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 10:23:34,694 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 10:23:34,696 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 10:23:34,698 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 10:23:34,700 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 10:23:34,702 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 10:23:34,704 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:23:34,737 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:23:34,739 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:34,741 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 10:23:34,743 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 10:23:34,744 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:23:34,746 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 10:23:34,747 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 10:23:34,749 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 10:23:34,750 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 10:23:34,752 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 10:23:34,753 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 10:23:34,755 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 10:23:34,756 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 10:23:34,758 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:23:34,759 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:23:34,761 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:23:34,762 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:23:34,764 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 10:23:34,765 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:23:34,767 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:23:34,768 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:23:34,770 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 10:23:34,771 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 10:23:34,773 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 10:23:34,775 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 10:23:34,776 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 10:23:34,778 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 10:23:34,779 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:23:34,780 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:23:34,782 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:23:34,783 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:23:34,785 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 10:23:34,786 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:23:34,788 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:23:34,789 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:23:34,791 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: a136d651d80044b29e4d94eeee93888c(unnamed)
2018-03-27 10:23:34,792 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 10:23:34,794 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 10:23:34,795 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 10:23:34,797 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 10:23:34,799 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 10:23:34,800 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=b5a4a11d-0974-420a-b3ee-6943010eddae] opened session at timestamp: 636577430148, for session factory: [/a136d651d80044b29e4d94eeee93888c]
2018-03-27 10:23:34,802 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = asd alias=this0_
2018-03-27 10:23:34,804 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = asd
2018-03-27 10:23:34,806 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 10:23:34,807 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 10:23:34,809 [5] DEBUG NHibernate.Type.StringType - binding 'asd' to parameter: 0
2018-03-27 10:23:34,810 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'asd' [Type: String (4000:0:0)]
2018-03-27 10:23:34,812 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:23:34,816 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-27 10:23:34,817 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 10:23:34,819 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 10:23:34,820 [5] DEBUG NHibernate.Loader.Loader - done processing result set (0 rows)
2018-03-27 10:23:34,821 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 10:23:34,823 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 9 ms
2018-03-27 10:23:34,824 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 10:23:34,825 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 10:23:34,827 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:23:34,828 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 0
2018-03-27 10:23:34,829 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 10:23:34,830 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 10:23:34,832 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 10:23:34,834 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=b5a4a11d-0974-420a-b3ee-6943010eddae] running ISession.Dispose()
2018-03-27 10:23:34,835 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=b5a4a11d-0974-420a-b3ee-6943010eddae] executing real Dispose(True)
2018-03-27 10:23:34,837 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 10:23:34,839 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 10:23:36,092 [5] ERROR Password.Infrastructure.Services.Log4Net - Token not found with username: asd
Password.Domain.Model.Exception.UserNotFoundException: Token not found with username: asd
   at Password.Domain.Service.UserService.GetUserWithUsername(String username) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\UserService.cs:line 21
   at Password.Domain.Service.AuthenticationService.AreValidUserCredentials(String username, String password) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\AuthenticationService.cs:line 33
   at Password.UI.Controllers.HomeController.Login(UserCredentialModel model) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Password\Controllers\HomeController.cs:line 34
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c.<BeginInvokeSynchronousActionMethod>b__9_0(IAsyncResult asyncResult, ActionInvocation innerInvokeState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__11_0()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass11_1.<InvokeActionMethodFilterAsynchronouslyRecursive>b__2()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass7_0.<BeginInvokeActionMethodWithFilters>b__1(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_6.<BeginInvokeAction>b__3()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_1.<BeginInvokeAction>b__5(IAsyncResult asyncResult)
2018-03-27 10:24:09,436 [12] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:asd, password:asd
2018-03-27 10:24:09,580 [12] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-27 10:24:09,585 [12] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-27 10:24:09,587 [12] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-27 10:24:09,589 [12] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-27 10:24:09,694 [12] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 10:24:10,061 [12] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:24:10,097 [12] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 10:24:10,117 [12] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:24:10,132 [12] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 10:24:10,134 [12] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 10:24:10,139 [12] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 10:24:10,145 [12] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 10:24:10,147 [12] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:24:10,150 [12] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 10:24:10,152 [12] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:24:10,154 [12] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 10:24:10,156 [12] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 10:24:10,158 [12] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 10:24:10,159 [12] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 10:24:10,162 [12] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:24:10,165 [12] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 10:24:10,167 [12] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 10:24:10,169 [12] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:24:10,170 [12] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:24:10,172 [12] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:24:10,174 [12] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:24:10,238 [12] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 10:24:10,244 [12] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:24:10,246 [12] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:24:10,247 [12] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:24:10,249 [12] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:24:10,251 [12] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:24:10,254 [12] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:24:10,289 [12] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 10:24:10,291 [12] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 10:24:10,292 [12] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 10:24:10,294 [12] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 10:24:10,302 [12] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:24:10,308 [12] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:24:10,310 [12] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:24:10,311 [12] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:24:10,314 [12] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:24:10,316 [12] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:24:10,317 [12] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:24:10,324 [12] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:24:10,332 [12] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 10:24:10,338 [12] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:5d43d4d7-6b53-46a1-89aa-b83489bb2fe4
Error Number:2714,State:6,Class:16
2018-03-27 10:24:10,344 [12] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 10:24:10,347 [12] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:24:10,350 [12] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:24:10,351 [12] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:24:10,353 [12] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:24:10,355 [12] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:24:10,356 [12] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:24:10,358 [12] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:24:10,370 [12] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:24:10,377 [12] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:24:10,426 [12] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 10:24:10,429 [12] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 10:24:10,431 [12] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:24:10,432 [12] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:24:10,435 [12] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:24:10,437 [12] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 10:24:10,439 [12] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 10:24:10,441 [12] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 10:24:10,443 [12] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 10:24:10,445 [12] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 10:24:10,446 [12] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 10:24:10,448 [12] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 10:24:10,450 [12] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 10:24:10,452 [12] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 10:24:10,455 [12] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 10:24:10,457 [12] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:24:10,459 [12] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 10:24:10,461 [12] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 10:24:10,463 [12] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 10:24:10,465 [12] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 10:24:10,467 [12] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:24:10,469 [12] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 10:24:10,471 [12] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 10:24:10,473 [12] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 10:24:10,483 [12] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 10:24:10,485 [12] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 10:24:10,487 [12] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 10:24:10,489 [12] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:24:10,520 [12] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:24:10,524 [12] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:24:10,573 [12] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 10:24:10,589 [12] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 10:24:10,608 [12] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:24:10,610 [12] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 10:24:10,611 [12] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 10:24:10,640 [12] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 10:24:10,641 [12] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 10:24:10,643 [12] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 10:24:10,644 [12] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 10:24:10,646 [12] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 10:24:10,647 [12] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 10:24:10,648 [12] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:24:10,673 [12] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:24:10,675 [12] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:24:10,676 [12] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:24:10,678 [12] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 10:24:10,679 [12] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:24:10,682 [12] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:24:10,683 [12] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:24:10,685 [12] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 10:24:10,687 [12] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 10:24:10,688 [12] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 10:24:10,689 [12] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 10:24:10,690 [12] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 10:24:10,692 [12] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 10:24:10,693 [12] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:24:10,694 [12] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:24:10,695 [12] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:24:10,696 [12] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:24:10,698 [12] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 10:24:10,699 [12] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:24:10,700 [12] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:24:10,701 [12] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:24:10,703 [12] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-27 10:24:10,705 [12] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: 9c60a9a2e60845acb810929067bd7b5b(unnamed)
2018-03-27 10:24:10,706 [12] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 10:24:10,708 [12] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 10:24:10,712 [12] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 10:24:10,713 [12] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 10:24:10,718 [12] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 10:24:10,732 [12] DEBUG NHibernate.Impl.SessionImpl - [session-id=5fa0ecc9-bae0-41aa-9774-323f8f412abf] opened session at timestamp: 636577430507, for session factory: [/9c60a9a2e60845acb810929067bd7b5b]
2018-03-27 10:24:10,774 [12] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = asd alias=this0_
2018-03-27 10:24:10,784 [12] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = asd
2018-03-27 10:24:10,824 [12] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 10:24:10,826 [12] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 10:24:10,828 [12] DEBUG NHibernate.Type.StringType - binding 'asd' to parameter: 0
2018-03-27 10:24:10,835 [12] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'asd' [Type: String (4000:0:0)]
2018-03-27 10:24:10,838 [12] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:24:10,844 [12] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-27 10:24:10,847 [12] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 10:24:10,849 [12] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 10:24:10,850 [12] DEBUG NHibernate.Loader.Loader - done processing result set (0 rows)
2018-03-27 10:24:10,853 [12] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 10:24:10,855 [12] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 13 ms
2018-03-27 10:24:10,856 [12] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 10:24:10,859 [12] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 10:24:10,860 [12] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:24:10,863 [12] DEBUG NHibernate.Loader.Loader - total objects hydrated: 0
2018-03-27 10:24:10,864 [12] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 10:24:10,866 [12] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 10:24:10,868 [12] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 10:24:10,871 [12] DEBUG NHibernate.Impl.SessionImpl - [session-id=5fa0ecc9-bae0-41aa-9774-323f8f412abf] running ISession.Dispose()
2018-03-27 10:24:10,873 [12] DEBUG NHibernate.Impl.SessionImpl - [session-id=5fa0ecc9-bae0-41aa-9774-323f8f412abf] executing real Dispose(True)
2018-03-27 10:24:10,875 [12] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 10:24:10,877 [12] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 10:24:13,240 [12] ERROR Password.Infrastructure.Services.Log4Net - Token not found with username: asd
Password.Domain.Model.Exception.UserNotFoundException: Token not found with username: asd
   at Password.Domain.Service.UserService.GetUserWithUsername(String username) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\UserService.cs:line 21
   at Password.Domain.Service.AuthenticationService.AreValidUserCredentials(String username, String password) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Domain\Service\AuthenticationService.cs:line 33
   at Password.UI.Controllers.HomeController.Login(UserCredentialModel model) in C:\Users\s.cokceken\Desktop\cokceken\Katas\Password\Password\Controllers\HomeController.cs:line 34
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c.<BeginInvokeSynchronousActionMethod>b__9_0(IAsyncResult asyncResult, ActionInvocation innerInvokeState)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`2.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<InvokeActionMethodFilterAsynchronouslyRecursive>b__11_0()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.AsyncInvocationWithFilters.<>c__DisplayClass11_1.<InvokeActionMethodFilterAsynchronouslyRecursive>b__2()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass7_0.<BeginInvokeActionMethodWithFilters>b__1(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.CallEndDelegate(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResultBase`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_6.<BeginInvokeAction>b__3()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass3_1.<BeginInvokeAction>b__5(IAsyncResult asyncResult)
2018-03-27 10:35:37,179 [5] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:asdas, password:asfknas+
2018-03-27 10:35:37,320 [5] INFO  NHibernate.Cfg.Environment - NHibernate 5.1.0 (assembly 5.1.0.0)
2018-03-27 10:35:37,324 [5] INFO  NHibernate.Cfg.Environment - hibernate-configuration section not found in application configuration file
2018-03-27 10:35:37,327 [5] INFO  NHibernate.Cfg.Environment - Bytecode provider name : lcg
2018-03-27 10:35:37,332 [5] INFO  NHibernate.Cfg.Environment - Using reflection optimizer
2018-03-27 10:35:37,440 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 10:35:37,839 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:37,871 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 10:35:37,890 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:35:37,902 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 10:35:37,904 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 10:35:37,909 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 10:35:37,914 [5] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 10:35:37,916 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:37,918 [5] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 10:35:37,919 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:35:37,921 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 10:35:37,922 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 10:35:37,923 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 10:35:37,924 [5] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 10:35:37,926 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:37,930 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 10:35:37,932 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 10:35:37,935 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:35:37,938 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:35:37,940 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:37,942 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:35:38,011 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 10:35:38,016 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:35:38,018 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:35:38,020 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:35:38,021 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:35:38,023 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:35:38,026 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:35:38,150 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 10:35:38,151 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 10:35:38,153 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 10:35:38,154 [5] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 10:35:38,170 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:35:38,178 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:38,181 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:38,183 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:38,186 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:38,187 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:38,189 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:38,196 [5] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:35:38,204 [5] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 10:35:38,210 [5] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:e501089c-9e66-402f-a59e-1177541d2563
Error Number:2714,State:6,Class:16
2018-03-27 10:35:38,214 [5] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 10:35:38,216 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:35:38,218 [5] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:35:38,220 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:35:38,221 [5] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:35:38,222 [5] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:35:38,224 [5] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:35:38,225 [5] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:35:38,235 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:38,241 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:38,285 [5] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 10:35:38,287 [5] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 10:35:38,288 [5] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:35:38,289 [5] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:35:38,291 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:38,293 [5] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 10:35:38,295 [5] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 10:35:38,296 [5] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 10:35:38,298 [5] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 10:35:38,299 [5] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 10:35:38,300 [5] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 10:35:38,302 [5] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 10:35:38,304 [5] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 10:35:38,306 [5] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 10:35:38,308 [5] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 10:35:38,309 [5] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:35:38,311 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 10:35:38,312 [5] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 10:35:38,314 [5] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 10:35:38,315 [5] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 10:35:38,317 [5] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:35:38,319 [5] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 10:35:38,320 [5] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 10:35:38,323 [5] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 10:35:38,333 [5] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 10:35:38,335 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 10:35:38,337 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 10:35:38,339 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:35:38,372 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:35:38,375 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:38,416 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 10:35:38,428 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 10:35:38,446 [5] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:38,448 [5] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 10:35:38,450 [5] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 10:35:38,480 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 10:35:38,482 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 10:35:38,483 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 10:35:38,485 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 10:35:38,486 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 10:35:38,488 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 10:35:38,489 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:35:38,512 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:35:38,514 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:35:38,515 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:35:38,517 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 10:35:38,518 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:35:38,521 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:35:38,523 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:35:38,524 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 10:35:38,525 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 10:35:38,527 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 10:35:38,528 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 10:35:38,529 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 10:35:38,530 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 10:35:38,531 [5] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:35:38,532 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:35:38,533 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:35:38,534 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:35:38,536 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 10:35:38,537 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:35:38,538 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:35:38,539 [5] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:35:38,541 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - initializing class SessionFactoryObjectFactory
2018-03-27 10:35:38,543 [5] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: a068e05c39db49d7a1c410396b103711(unnamed)
2018-03-27 10:35:38,544 [5] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 10:35:38,546 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 10:35:38,550 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 10:35:38,551 [5] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 10:35:38,555 [5] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 10:35:38,571 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=dbdffb2f-c900-4587-b210-19764fd06206] opened session at timestamp: 636577437385, for session factory: [/a068e05c39db49d7a1c410396b103711]
2018-03-27 10:35:38,631 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = asdas alias=this0_
2018-03-27 10:35:38,641 [5] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = asdas
2018-03-27 10:35:38,674 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 10:35:38,675 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 10:35:38,678 [5] DEBUG NHibernate.Type.StringType - binding 'asdas' to parameter: 0
2018-03-27 10:35:38,685 [5] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'asdas' [Type: String (4000:0:0)]
2018-03-27 10:35:38,687 [5] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:35:38,692 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 2 ms
2018-03-27 10:35:38,695 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 10:35:38,697 [5] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 10:35:38,698 [5] DEBUG NHibernate.Loader.Loader - done processing result set (0 rows)
2018-03-27 10:35:38,701 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 10:35:38,703 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 12 ms
2018-03-27 10:35:38,704 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 10:35:38,706 [5] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 10:35:38,707 [5] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:35:38,709 [5] DEBUG NHibernate.Loader.Loader - total objects hydrated: 0
2018-03-27 10:35:38,711 [5] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 10:35:38,713 [5] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 10:35:38,715 [5] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 10:35:38,719 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=dbdffb2f-c900-4587-b210-19764fd06206] running ISession.Dispose()
2018-03-27 10:35:38,720 [5] DEBUG NHibernate.Impl.SessionImpl - [session-id=dbdffb2f-c900-4587-b210-19764fd06206] executing real Dispose(True)
2018-03-27 10:35:38,722 [5] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 10:35:38,724 [5] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 10:35:41,966 [5] INFO  Password.Infrastructure.Services.Log4Net - User not found with username: asdas
2018-03-27 10:35:47,698 [15] DEBUG Password.Infrastructure.Services.Log4Net - Login attempt with username:cokceken, password:asd
2018-03-27 10:35:47,701 [15] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.Token, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="Token"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="ExpireDateTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="ExpireDateTime" /></property><property name="Value" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Value" /></property><many-to-one class="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="User"><column name="User_id" /></many-to-one></class></hibernate-mapping>
2018-03-27 10:35:47,703 [15] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:47,705 [15] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.Token -> Token
2018-03-27 10:35:47,707 [15] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:35:47,709 [15] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: ExpireDateTime -> ExpireDateTime, type: DateTime
2018-03-27 10:35:47,711 [15] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Value -> Value, type: String
2018-03-27 10:35:47,712 [15] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: User -> User_id, type: Password.Domain.Model.User
2018-03-27 10:35:47,714 [15] DEBUG NHibernate.Cfg.Configuration - Mapping XML:
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"><class xmlns="urn:nhibernate-mapping-2.2" name="Password.Domain.Model.User, Password.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="[User]"><id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Id" /><generator class="identity" /></id><property name="Email" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Email" /></property><property name="Password" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Password" /></property><property name="Username" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="Username" /></property><property name="PasswordSalt" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"><column name="PasswordSalt" /></property></class></hibernate-mapping>
2018-03-27 10:35:47,717 [15] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:47,718 [15] INFO  NHibernate.Cfg.XmlHbmBinding.Binder - Mapping class: Password.Domain.Model.User -> [User]
2018-03-27 10:35:47,720 [15] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Id -> Id, type: Int32
2018-03-27 10:35:47,721 [15] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Email -> Email, type: String
2018-03-27 10:35:47,723 [15] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Password -> Password, type: String
2018-03-27 10:35:47,724 [15] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: Username -> Username, type: String
2018-03-27 10:35:47,726 [15] DEBUG NHibernate.Cfg.XmlHbmBinding.Binder - Mapped property: PasswordSalt -> PasswordSalt, type: String
2018-03-27 10:35:47,727 [15] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:47,729 [15] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - Running hbm2ddl schema update
2018-03-27 10:35:47,731 [15] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - fetching database metadata
2018-03-27 10:35:47,732 [15] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:35:47,734 [15] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:35:47,736 [15] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:47,738 [15] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:35:47,743 [15] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - updating schema
2018-03-27 10:35:47,745 [15] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:35:47,747 [15] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:35:47,749 [15] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:35:47,751 [15] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:35:47,752 [15] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:35:47,754 [15] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:35:47,772 [15] INFO  NHibernate.Dialect.Schema.ITableMetadata - table found: password.dbo.Token
2018-03-27 10:35:47,774 [15] INFO  NHibernate.Dialect.Schema.ITableMetadata - columns: Id, ExpireDateTime, Value, User_id
2018-03-27 10:35:47,775 [15] INFO  NHibernate.Dialect.Schema.ITableMetadata - foreign keys: FK7786F1A3232E7974
2018-03-27 10:35:47,777 [15] INFO  NHibernate.Dialect.Schema.ITableMetadata - indexes: PK__Token__3214EC073FCAFAF0
2018-03-27 10:35:47,781 [15] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:35:47,783 [15] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:47,784 [15] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:47,786 [15] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:47,787 [15] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:47,788 [15] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:47,790 [15] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:47,794 [15] INFO  NHibernate.Tool.hbm2ddl.DatabaseMetadata - table not found: [User]
2018-03-27 10:35:47,796 [15] DEBUG NHibernate.Tool.hbm2ddl.SchemaUpdate - create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
2018-03-27 10:35:47,799 [15] ERROR NHibernate.Tool.hbm2ddl.SchemaUpdate - Unsuccessful: create table [User] (Id INT IDENTITY NOT NULL, Email NVARCHAR(255) null, Password NVARCHAR(255) null, Username NVARCHAR(255) null, PasswordSalt NVARCHAR(255) null, primary key (Id))
System.Data.SqlClient.SqlException (0x80131904): There is already an object named 'User' in the database.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at NHibernate.Tool.hbm2ddl.SchemaUpdate.Execute(Action`1 scriptAction, Boolean doUpdate)
ClientConnectionId:e501089c-9e66-402f-a59e-1177541d2563
Error Number:2714,State:6,Class:16
2018-03-27 10:35:47,801 [15] INFO  NHibernate.Tool.hbm2ddl.SchemaUpdate - schema update complete
2018-03-27 10:35:47,802 [15] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:35:47,803 [15] INFO  NHibernate.Cfg.Configuration - checking mappings queue
2018-03-27 10:35:47,805 [15] INFO  NHibernate.Cfg.Configuration - processing one-to-many association mappings
2018-03-27 10:35:47,806 [15] INFO  NHibernate.Cfg.Configuration - processing one-to-one association property references
2018-03-27 10:35:47,807 [15] INFO  NHibernate.Cfg.Configuration - processing foreign key constraints
2018-03-27 10:35:47,808 [15] DEBUG NHibernate.Cfg.Configuration - resolving reference to class: Password.Domain.Model.User
2018-03-27 10:35:47,810 [15] INFO  NHibernate.Cfg.Configuration - processing filters (second pass)
2018-03-27 10:35:47,811 [15] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:47,813 [15] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:47,815 [15] INFO  NHibernate.Exceptions.SQLExceptionConverterFactory - Using dialect defined converter
2018-03-27 10:35:47,816 [15] INFO  NHibernate.Cfg.SettingsFactory - Generate SQL with comments: disabled
2018-03-27 10:35:47,818 [15] INFO  NHibernate.Connection.ConnectionProviderFactory - Initializing connection provider: NHibernate.Connection.DriverConnectionProvider
2018-03-27 10:35:47,819 [15] INFO  NHibernate.Connection.ConnectionProvider - Configuring ConnectionProvider
2018-03-27 10:35:47,820 [15] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:47,822 [15] INFO  NHibernate.Cfg.SettingsFactory - Transaction factory: NHibernate.Transaction.AdoNetWithSystemTransactionFactory
2018-03-27 10:35:47,823 [15] INFO  NHibernate.Cfg.SettingsFactory - Optimize cache for minimal puts: False
2018-03-27 10:35:47,824 [15] INFO  NHibernate.Cfg.SettingsFactory - Connection release mode: auto
2018-03-27 10:35:47,826 [15] INFO  NHibernate.Cfg.SettingsFactory - Default batch fetch size: 1
2018-03-27 10:35:47,827 [15] INFO  NHibernate.Cfg.SettingsFactory - echoing all SQL to stdout
2018-03-27 10:35:47,829 [15] INFO  NHibernate.Cfg.SettingsFactory - Statistics: disabled
2018-03-27 10:35:47,830 [15] INFO  NHibernate.Cfg.SettingsFactory - Deleted entity synthetic identifier rollback: disabled
2018-03-27 10:35:47,831 [15] INFO  NHibernate.Cfg.SettingsFactory - Query translator: NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory
2018-03-27 10:35:47,833 [15] INFO  NHibernate.Cfg.SettingsFactory - Query provider: NHibernate.Linq.DefaultQueryProvider
2018-03-27 10:35:47,834 [15] INFO  NHibernate.Cfg.SettingsFactory - Query language substitutions: {'true'='1', 'false'='0', 'yes'=''Y'', 'no'=''N''}
2018-03-27 10:35:47,835 [15] INFO  NHibernate.Cfg.SettingsFactory - cache provider: NHibernate.Cache.NoCacheProvider, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:35:47,837 [15] INFO  NHibernate.Cfg.SettingsFactory - Order SQL inserts for batching: enabled
2018-03-27 10:35:47,838 [15] INFO  NHibernate.Cfg.SettingsFactory - Order SQL updates for batching: disabled
2018-03-27 10:35:47,839 [15] DEBUG NHibernate.Cfg.SettingsFactory - Wrap result sets: disabled
2018-03-27 10:35:47,841 [15] DEBUG NHibernate.Cfg.SettingsFactory - Batch versioned data: disabled
2018-03-27 10:35:47,842 [15] INFO  NHibernate.Cfg.SettingsFactory - Batcher factory: NHibernate.AdoNet.SqlClientBatchingBatcherFactory, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
2018-03-27 10:35:47,843 [15] INFO  NHibernate.Cfg.SettingsFactory - Default flush mode: Auto
2018-03-27 10:35:47,845 [15] INFO  NHibernate.Cfg.SettingsFactory - Named query checking : enabled
2018-03-27 10:35:47,846 [15] DEBUG NHibernate.Cfg.SettingsFactory - Track session id: enabled
2018-03-27 10:35:47,847 [15] INFO  NHibernate.Impl.SessionFactoryImpl - building session factory
2018-03-27 10:35:47,849 [15] DEBUG NHibernate.Impl.SessionFactoryImpl - Session factory constructed with filter configurations : {}
2018-03-27 10:35:47,850 [15] DEBUG NHibernate.Impl.SessionFactoryImpl - instantiating session factory with properties: {'use_reflection_optimizer'='True', 'connection.provider'='NHibernate.Connection.DriverConnectionProvider', 'connection.driver_class'='NHibernate.Driver.SqlClientDriver, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'hibernate.dialect'='NHibernate.Dialect.MsSql2012Dialect, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4', 'show_sql'='true', 'connection.connection_string'='Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=password;Integrated Security=True'}
2018-03-27 10:35:47,851 [15] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:35:47,871 [15] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:35:47,873 [15] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:47,874 [15] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.Token
2018-03-27 10:35:47,875 [15] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.Token
2018-03-27 10:35:47,876 [15] INFO  NHibernate.Dialect.Dialect - Using dialect: NHibernate.Dialect.MsSql2012Dialect
2018-03-27 10:35:47,878 [15] DEBUG NHibernate.Tuple.Entity.AbstractEntityTuplizer - No custom accessors found for entity: Password.Domain.Model.User
2018-03-27 10:35:47,879 [15] DEBUG NHibernate.Tuple.Entity.PocoEntityTuplizer - Create Instantiator using optimizer for:Password.Domain.Model.User
2018-03-27 10:35:47,881 [15] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.Token
2018-03-27 10:35:47,882 [15] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM Token WHERE Id = ?
2018-03-27 10:35:47,883 [15] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT token_.Id, token_.ExpireDateTime as expiredatetime2_0_, token_.Value as value3_0_, token_.User_id as user4_0_ FROM Token token_ WHERE token_.Id=?
2018-03-27 10:35:47,885 [15] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO Token (ExpireDateTime, Value, User_id, Id) VALUES (?, ?, ?, ?)
2018-03-27 10:35:47,886 [15] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE Token SET ExpireDateTime = ?, Value = ?, User_id = ? WHERE Id = ?
2018-03-27 10:35:47,887 [15] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM Token WHERE Id = ?
2018-03-27 10:35:47,888 [15] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO Token (ExpireDateTime, Value, User_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:35:47,890 [15] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:35:47,891 [15] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:35:47,892 [15] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:35:47,893 [15] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock, nowait) WHERE token0_.Id=?
2018-03-27 10:35:47,894 [15] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ with (updlock, rowlock) WHERE token0_.Id=?
2018-03-27 10:35:47,896 [15] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:35:47,897 [15] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.Token: SELECT token0_.Id as id1_0_0_, token0_.ExpireDateTime as expiredatetime2_0_0_, token0_.Value as value3_0_0_, token0_.User_id as user4_0_0_ FROM Token token0_ WHERE token0_.Id=?
2018-03-27 10:35:47,899 [15] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Static SQL for entity: Password.Domain.Model.User
2018-03-27 10:35:47,900 [15] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Version select: SELECT Id FROM [User] WHERE Id = ?
2018-03-27 10:35:47,901 [15] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Snapshot select: SELECT user_.Id, user_.Email as email2_1_, user_.Password as password3_1_, user_.Username as username4_1_, user_.PasswordSalt as passwordsalt5_1_ FROM [User] user_ WHERE user_.Id=?
2018-03-27 10:35:47,903 [15] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Insert 0: INSERT INTO [User] (Email, Password, Username, PasswordSalt, Id) VALUES (?, ?, ?, ?, ?)
2018-03-27 10:35:47,904 [15] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Update 0: UPDATE [User] SET Email = ?, Password = ?, Username = ?, PasswordSalt = ? WHERE Id = ?
2018-03-27 10:35:47,905 [15] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Delete 0: DELETE FROM [User] WHERE Id = ?
2018-03-27 10:35:47,906 [15] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister -  Identity insert: INSERT INTO [User] (Email, Password, Username, PasswordSalt) VALUES (?, ?, ?, ?); select SCOPE_IDENTITY()
2018-03-27 10:35:47,907 [15] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:35:47,909 [15] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:35:47,910 [15] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:35:47,910 [15] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock, nowait) WHERE user0_.Id=?
2018-03-27 10:35:47,913 [15] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ with (updlock, rowlock) WHERE user0_.Id=?
2018-03-27 10:35:47,914 [15] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+MergeCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:35:47,916 [15] DEBUG NHibernate.Loader.Entity.AbstractEntityLoader - Static select for action NHibernate.Engine.CascadingAction+RefreshCascadingAction on entity Password.Domain.Model.User: SELECT user0_.Id as id1_1_0_, user0_.Email as email2_1_0_, user0_.Password as password3_1_0_, user0_.Username as username4_1_0_, user0_.PasswordSalt as passwordsalt5_1_0_ FROM [User] user0_ WHERE user0_.Id=?
2018-03-27 10:35:47,917 [15] DEBUG NHibernate.Impl.SessionFactoryObjectFactory - registered: f883cf8ced5048a6bbba200e152a3542(unnamed)
2018-03-27 10:35:47,918 [15] INFO  NHibernate.Impl.SessionFactoryObjectFactory - no name configured
2018-03-27 10:35:47,919 [15] DEBUG NHibernate.Impl.SessionFactoryImpl - Instantiated session factory
2018-03-27 10:35:47,920 [15] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named HQL queries
2018-03-27 10:35:47,921 [15] DEBUG NHibernate.Impl.SessionFactoryImpl - Checking 0 named SQL queries
2018-03-27 10:35:47,923 [15] DEBUG NHibernate.Impl.SessionFactoryImpl+SessionBuilderImpl`1[[NHibernate.ISessionBuilder, NHibernate, Version=5.1.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4]] - Opening Hibernate Session.
2018-03-27 10:35:47,924 [15] DEBUG NHibernate.Impl.SessionImpl - [session-id=6181a5bd-87ad-4592-86a3-cd0f8c5c7b17] opened session at timestamp: 636577437479, for session factory: [/f883cf8ced5048a6bbba200e152a3542]
2018-03-27 10:35:47,925 [15] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - put criteria=Username = cokceken alias=this0_
2018-03-27 10:35:47,926 [15] DEBUG NHibernate.Loader.Criteria.CriteriaQueryTranslator - returning alias=this_ for criteria=Username = cokceken
2018-03-27 10:35:47,928 [15] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened new DbCommand, open DbCommands: 1
2018-03-27 10:35:47,929 [15] DEBUG NHibernate.AdoNet.AbstractBatcher - Building an DbCommand object for the SqlString: SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = ?
2018-03-27 10:35:47,930 [15] DEBUG NHibernate.Type.StringType - binding 'cokceken' to parameter: 0
2018-03-27 10:35:47,932 [15] DEBUG NHibernate.SQL - SELECT this_.Id as id1_1_0_, this_.Email as email2_1_0_, this_.Password as password3_1_0_, this_.Username as username4_1_0_, this_.PasswordSalt as passwordsalt5_1_0_ FROM [User] this_ WHERE this_.Username = @p0;@p0 = 'cokceken' [Type: String (4000:0:0)]
2018-03-27 10:35:47,934 [15] DEBUG NHibernate.Connection.DriverConnectionProvider - Obtaining DbConnection from Driver
2018-03-27 10:35:47,936 [15] DEBUG NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 1 ms
2018-03-27 10:35:47,937 [15] DEBUG NHibernate.AdoNet.AbstractBatcher - Opened DbDataReader, open DbDataReaders: 1
2018-03-27 10:35:47,939 [15] DEBUG NHibernate.Loader.Loader - processing result set
2018-03-27 10:35:47,940 [15] DEBUG NHibernate.Loader.Loader - result set row: 0
2018-03-27 10:35:47,943 [15] DEBUG NHibernate.Type.Int32Type - returning '1' as column: id1_1_0_
2018-03-27 10:35:47,946 [15] DEBUG NHibernate.Loader.Loader - result row: EntityKey[Password.Domain.Model.User#1]
2018-03-27 10:35:47,952 [15] DEBUG NHibernate.Loader.Loader - Initializing object from DataReader: [Password.Domain.Model.User#1]
2018-03-27 10:35:47,977 [15] DEBUG NHibernate.Persister.Entity.AbstractEntityPersister - Hydrating entity: [Password.Domain.Model.User#1]
2018-03-27 10:35:47,979 [15] DEBUG NHibernate.Type.StringType - returning 'email' as column: email2_1_0_
2018-03-27 10:35:47,981 [15] DEBUG NHibernate.Type.StringType - returning 'password' as column: password3_1_0_
2018-03-27 10:35:47,982 [15] DEBUG NHibernate.Type.StringType - returning 'cokceken' as column: username4_1_0_
2018-03-27 10:35:47,984 [15] DEBUG NHibernate.Type.StringType - returning 'salt' as column: passwordsalt5_1_0_
2018-03-27 10:35:47,987 [15] DEBUG NHibernate.Loader.Loader - done processing result set (1 rows)
2018-03-27 10:35:47,988 [15] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbDataReader, open DbDataReaders :0
2018-03-27 10:35:47,989 [15] DEBUG NHibernate.AdoNet.AbstractBatcher - DataReader was closed after 54 ms
2018-03-27 10:35:47,990 [15] DEBUG NHibernate.AdoNet.AbstractBatcher - Closed DbCommand, open DbCommands: 0
2018-03-27 10:35:47,992 [15] DEBUG NHibernate.AdoNet.ConnectionManager - Aggressively releasing database connection
2018-03-27 10:35:47,993 [15] DEBUG NHibernate.Connection.ConnectionProvider - Closing connection
2018-03-27 10:35:47,994 [15] DEBUG NHibernate.Loader.Loader - total objects hydrated: 1
2018-03-27 10:35:47,998 [15] DEBUG NHibernate.Engine.TwoPhaseLoad - resolving associations for [Password.Domain.Model.User#1]
2018-03-27 10:35:48,001 [15] DEBUG NHibernate.Engine.TwoPhaseLoad - done materializing entity [Password.Domain.Model.User#1]
2018-03-27 10:35:48,003 [15] DEBUG NHibernate.Engine.StatefulPersistenceContext - initializing non-lazy collections
2018-03-27 10:35:48,004 [15] DEBUG NHibernate.AdoNet.ConnectionManager - After autocommit
2018-03-27 10:35:48,005 [15] DEBUG NHibernate.Impl.SessionImpl - transaction completion
2018-03-27 10:35:48,006 [15] DEBUG NHibernate.Impl.SessionImpl - [session-id=6181a5bd-87ad-4592-86a3-cd0f8c5c7b17] running ISession.Dispose()
2018-03-27 10:35:48,008 [15] DEBUG NHibernate.Impl.SessionImpl - [session-id=6181a5bd-87ad-4592-86a3-cd0f8c5c7b17] executing real Dispose(True)
2018-03-27 10:35:48,009 [15] DEBUG NHibernate.Impl.SessionImpl - closing session
2018-03-27 10:35:48,010 [15] DEBUG NHibernate.AdoNet.AbstractBatcher - running BatcherImpl.Dispose(true)
2018-03-27 10:35:49,329 [15] INFO  Password.Infrastructure.Services.Log4Net - Wrong password
